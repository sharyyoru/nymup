if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MAWBridgeTypes.bs",[],function(a,b,c,d,e,f){"use strict";function a(a){return{TAG:1,_0:a}}function b(a){return{TAG:2,_0:a}}function c(a){return{TAG:0,_0:a}}function d(a){return{TAG:0,_0:a}}function e(a){return{TAG:1,_0:a}}function g(a){return 0}f.makeInitialThreadRange=a;f.makeThreadRangeForLoadBefore=b;f.makeThreadRangeNoThreads=c;f.makeInitialRange=d;f.makeExtendBefore=e;f.makeNoMsg=g},null);
__d("LSMessageSendStatus.bs",["bs_caml_int64"],function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,4];b=[0,5];f.none=a;f.sendingToServer=c;f.serverReceived=d;f.nonRetriableError=e;f.retriableError=b},null);
__d("MAWBridgeTypes.re",["MAWBridgeTypes.bs"],function(a,b,c,d,e,f){c=(a=b("MAWBridgeTypes.bs")).makeInitialThreadRange;f.makeInitialThreadRange=c;d=a.makeThreadRangeForLoadBefore;f.makeThreadRangeForLoadBefore=d;e=a.makeThreadRangeNoThreads;f.makeThreadRangeNoThreads=e;b=a.makeInitialRange;f.makeInitialRange=b;c=a.makeExtendBefore;f.makeExtendBefore=c;d=a.makeNoMsg;f.makeNoMsg=d},null);
__d("OfflineThreadingId.re",["OfflineThreadingId.bs"],function(a,b,c,d,e,f){a=b("OfflineThreadingId.bs").make;f.make=a},null);
__d("WAErr",[],function(a,b,c,d,e,f){"use strict";function a(a){a=new Error(a);if(a.stack===void 0)try{throw a}catch(a){}return a}f["default"]=a},66);
__d("WABaseGlobals",["WAErr"],function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){h=a}function i(){if(h==null)throw c("WAErr")("Trying to access WAGlobals before being set");return h}function b(a){var b=i();b.myJids=a}function d(){var a;a=(a=i().myJids)==null?void 0:a.deviceJid;if(a==null)throw c("WAErr")("Trying to access myDeviceJid, but it's not set");return a}function e(){var a;a=(a=i().myJids)==null?void 0:a.userJid;if(a==null)throw c("WAErr")("Trying to access myUserJid, but it's not set");return a}function f(){return i().db}function j(){return i().jidUtils}function k(){return i().config}g.setGlobals=a;g.setMyJids=b;g.getMyDeviceJid=d;g.getMyUserJid=e;g.getDbImpls=f;g.getJidUtilsApi=j;g.getConfig=k},98);
__d("WAGlobals",["WABaseGlobals","WAErr","WAJids"],function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){h=a,d("WABaseGlobals").setGlobals(a)}function i(){if(h==null)throw c("WAErr")("WaMsgr api called before set");return h}function b(a,b){var d=i();if(d.myJids!=null)throw c("WAErr")("Trying to set UserJid and DeviceJid but they are already set");d.myJids={userJid:a,deviceJid:b}}function j(){var a;a=(a=i().myJids)==null?void 0:a.deviceJid;if(a==null)throw c("WAErr")("Trying to access myDeviceJid, but it's not set");return a}function e(){var a;a=(a=i().myJids)==null?void 0:a.userJid;if(a==null)throw c("WAErr")("Trying to access myUserJid, but it's not set");return a}function f(){return i().db}function k(){return i().jobResultConverter}function l(){return i().persistedJobs.api}function m(){return i().persistedJobs.manager}function n(a){return d("WAJids").extractUserJid(a)===d("WAJids").extractUserJid(j())}function o(){return i().jidUtils}function p(){return i().transactions}function q(){return i().crypto.manager}function r(){return i().crypto.inMemoryManager}function s(){return i().crypto.inMemorySignal}function t(){return i().config}g.setGlobals=a;g.setMyJids=b;g.getMyDeviceJid=j;g.getMyUserJid=e;g.getDbImpls=f;g.getJobResultConvertersImpls=k;g.getPersistedJobsApi=l;g.getJobManager=m;g.isPeerDevice=n;g.getJidUtilsApi=o;g.getTransactions=p;g.getCryptoManager=q;g.getInMemoryCryptoManager=r;g.getInMemorySignal=s;g.getConfig=t},98);
__d("WANullthrows",[],function(a,b,c,d,e,f){function a(a,b){b===void 0&&(b="?");if(a==null)throw new Error("Unexpected null or undefined: "+b);return a}f["default"]=a},66);
__d("WALogger",["WAHex","WANullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] ",""]);h=function(){return a};return a}var i=null;function a(a){i=a}function j(a,b){return{verbose:function(){return j(a,b)},color:function(c){return j(a,b)},devConsole:function(){var d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];(d=c("WANullthrows")(i,"WA devConsole logger called before initialization")).devConsole.apply(d,[a,b].concat(f));return j(a,b)},sendLogs:function(c){return a!=="ERROR"&&a!=="CATCHING"?m(h(),c,b):j(a,b)},tags:function(){return j(a,b)}}}function b(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];var f=n(a,d);c("WANullthrows")(i,"WA DEV logger called before initialization").debug(f);return j("DEV",f)}function e(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];var f=n(a,d);c("WANullthrows")(i,"WA DEV_XMPP logger called before initialization").debug(f);return j("DEV_XMPP",f)}function f(a){return function(b){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];var g=n(b,e);c("WANullthrows")(i,"WA WARN logger called before initialization").error(g,a);return j("CATCHING",g)}}function k(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];var f=n(a,d);c("WANullthrows")(i,"WA LOG logger called before initialization").info(f);return j("LOG",f)}function l(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];var f=n(a,d);c("WANullthrows")(i,"WA WARN logger called before initialization").warn(f);return j("WARN",f)}function m(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];var f=n(a,d);c("WANullthrows")(i,"WA ERROR logger called before initialization").error(f);return j("ERROR",f)}function n(a,b){var c=[a[0]];b.forEach((function(b,d){c.push(o(b),a[d+1])}));return c.join("")}function o(a){if(typeof a==="string")return"'"+a+"'";else if(a==null||typeof a!=="object")return String(a);else if(Array.isArray(a))return"["+a.join(",")+"]";else if(a instanceof Uint8Array)if(a.length<64)return"<<"+p(a)+">>";else{var b=a.subarray(0,32);return"<<"+p(b)+", "+(a.length-b.length)+" more bytes>>"}else if(a.toString===Object.prototype.toString)return JSON.stringify(a,function(a,b){return a?String(b):b});else return String(a)}function p(a){var b=!0,c=a.length;while(b&&c){var e=a[--c];b=32<=e&&e<127}if(b)return JSON.stringify(String.fromCharCode.apply(String,a));else return d("WAHex").toHex(a)}g.initializeWaLogger=a;g.DEV=b;g.DEV_XMPP=e;g.CATCHING=f;g.LOG=k;g.WARN=l;g.ERROR=m;g.debugStr=o;g.bytesToDebugString=p}),98);
__d("WABase64",["WALogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Found unexpected character code while decoding B64 at index ",", length ",": ",""]);h=function(){return a};return a}var i=43,j=47,k=61,l=45,m=95,n=3e3,o="data:image/jpeg;base64,";function a(a){return p(a,i,j,!0)}function b(a,b){b===void 0&&(b=!1);return p(a,l,m,b)}function p(a,b,c,d){a=Array.isArray(a)||a instanceof ArrayBuffer?new Uint8Array(a):a;if(a.length<=n)return q(a,b,c,d);else{var e=[];for(var f=0;f<a.length;f+=n)e.push(q(a.subarray(f,f+n),b,c,d));return e.join("")}}function q(a,b,c,d){var e=Math.ceil(a.length*4/3),f=4*Math.ceil(a.length/3),g=new Array(f);for(var h=0,i=0;h<f;h+=4,i+=3){var j=a[i]<<16|a[i+1]<<8|a[i+2];g[h]=j>>18;g[h+1]=j>>12&63;g[h+2]=j>>6&63;g[h+3]=j&63}for(var j=0;j<e;j++){a=g[j];a<26?g[j]=65+a:a<52?g[j]=71+a:a<62?g[j]=a-4:a===62?g[j]=b:g[j]=c}for(var h=e;h<f;h++)g[h]=61;i=String.fromCharCode.apply(String,g);return d?i:i.substring(0,e)}function r(a,b,c,e){var f=a.length,g=new Int32Array(f+f%4);for(var i=0;i<f;i++){var j=a.charCodeAt(i);if(65<=j&&j<=90)g[i]=j-65;else if(97<=j&&j<=122)g[i]=j-71;else if(48<=j&&j<=57)g[i]=j+4;else if(j===b)g[i]=62;else if(j===c)g[i]=63;else if(j===e){f=i;break}else{self.WALogger.ERROR!=null&&d("WALogger").ERROR(h(),i,f,j);return null}}j=g.length/4;for(var b=0,c=0;b<j;b++,c+=4)g[b]=g[c]<<18|g[c+1]<<12|g[c+2]<<6|g[c+3];e=Math.floor(f*3/4);i=new Uint8Array(e);a=0;b=0;for(;b+3<=e;a++,b+=3){j=g[a];i[b]=j>>16;i[b+1]=j>>8&255;i[b+2]=j&255}switch(e-b){case 2:i[b]=g[a]>>16;i[b+1]=g[a]>>8&255;break;case 1:i[b]=g[a]>>16}return i}function c(a){a=r(a,i,j,k);if(a)return a.buffer;else throw new Error("Base64.decode given invalid string")}function e(a,b){b===void 0&&(b=!1);a=r(a,l,m,b?k:-1);if(a)return a.buffer;else throw new Error("Base64.decode given invalid string")}function f(a){a=a instanceof ArrayBuffer?new Uint8Array(a):r(a,i,j,k);return a&&Array.from(a)}function s(a){return Math.floor(a.length*3/4)}g.BASE64_DATA_URL_SCHEME=o;g.encodeB64=a;g.encodeB64UrlSafe=b;g.decodeB64=c;g.decodeB64UrlSafe=e;g.decodeB64ToJsArray=f;g.sizeWhenB64Decoded=s}),98);
__d("tweetnacl.dist",[],(function(a,b,c,d,e,f){(function(){var a={780:function(a,b,c){!function(a){"use strict";var b=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},d=function(){throw new Error("no PRNG")},e=new Uint8Array(16),f=new Uint8Array(32);f[0]=9;var g=b(),h=b([1]),i=b([56129,1]),ba=b([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ca=b([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),j=b([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),da=b([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),k=b([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function l(a,b,c,d){a[b]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=255&c,a[b+4]=d>>24&255,a[b+5]=d>>16&255,a[b+6]=d>>8&255,a[b+7]=255&d}function m(a,b,c,d,e){var f,h=0;for(f=0;f<e;f++)h|=a[b+f]^c[d+f];return(1&h-1>>>8)-1}function n(a,b,c,d){return m(a,b,c,d,16)}function ea(a,b,c,d){return m(a,b,c,d,32)}function o(a,b,c,d){!function(a,b,c,d){for(var e,f=255&d[0]|(255&d[1])<<8|(255&d[2])<<16|(255&d[3])<<24,l=255&c[0]|(255&c[1])<<8|(255&c[2])<<16|(255&c[3])<<24,fa=255&c[4]|(255&c[5])<<8|(255&c[6])<<16|(255&c[7])<<24,ga=255&c[8]|(255&c[9])<<8|(255&c[10])<<16|(255&c[11])<<24,w=255&c[12]|(255&c[13])<<8|(255&c[14])<<16|(255&c[15])<<24,x=255&d[4]|(255&d[5])<<8|(255&d[6])<<16|(255&d[7])<<24,y=255&b[0]|(255&b[1])<<8|(255&b[2])<<16|(255&b[3])<<24,z=255&b[4]|(255&b[5])<<8|(255&b[6])<<16|(255&b[7])<<24,ra=255&b[8]|(255&b[9])<<8|(255&b[10])<<16|(255&b[11])<<24,b=255&b[12]|(255&b[13])<<8|(255&b[14])<<16|(255&b[15])<<24,A=255&d[8]|(255&d[9])<<8|(255&d[10])<<16|(255&d[11])<<24,B=255&c[16]|(255&c[17])<<8|(255&c[18])<<16|(255&c[19])<<24,C=255&c[20]|(255&c[21])<<8|(255&c[22])<<16|(255&c[23])<<24,D=255&c[24]|(255&c[25])<<8|(255&c[26])<<16|(255&c[27])<<24,c=255&c[28]|(255&c[29])<<8|(255&c[30])<<16|(255&c[31])<<24,d=255&d[12]|(255&d[13])<<8|(255&d[14])<<16|(255&d[15])<<24,E=f,F=l,G=fa,H=ga,I=w,J=x,K=y,L=z,M=ra,N=b,O=A,P=B,Q=C,R=D,S=c,T=d,U=0;U<20;U+=2)E^=(e=(Q^=(e=(M^=(e=(I^=(e=E+Q|0)<<7|e>>>25)+E|0)<<9|e>>>23)+I|0)<<13|e>>>19)+M|0)<<18|e>>>14,J^=(e=(F^=(e=(R^=(e=(N^=(e=J+F|0)<<7|e>>>25)+J|0)<<9|e>>>23)+N|0)<<13|e>>>19)+R|0)<<18|e>>>14,O^=(e=(K^=(e=(G^=(e=(S^=(e=O+K|0)<<7|e>>>25)+O|0)<<9|e>>>23)+S|0)<<13|e>>>19)+G|0)<<18|e>>>14,T^=(e=(P^=(e=(L^=(e=(H^=(e=T+P|0)<<7|e>>>25)+T|0)<<9|e>>>23)+H|0)<<13|e>>>19)+L|0)<<18|e>>>14,E^=(e=(H^=(e=(G^=(e=(F^=(e=E+H|0)<<7|e>>>25)+E|0)<<9|e>>>23)+F|0)<<13|e>>>19)+G|0)<<18|e>>>14,J^=(e=(I^=(e=(L^=(e=(K^=(e=J+I|0)<<7|e>>>25)+J|0)<<9|e>>>23)+K|0)<<13|e>>>19)+L|0)<<18|e>>>14,O^=(e=(N^=(e=(M^=(e=(P^=(e=O+N|0)<<7|e>>>25)+O|0)<<9|e>>>23)+P|0)<<13|e>>>19)+M|0)<<18|e>>>14,T^=(e=(S^=(e=(R^=(e=(Q^=(e=T+S|0)<<7|e>>>25)+T|0)<<9|e>>>23)+Q|0)<<13|e>>>19)+R|0)<<18|e>>>14;E=E+f|0,F=F+l|0,G=G+fa|0,H=H+ga|0,I=I+w|0,J=J+x|0,K=K+y|0,L=L+z|0,M=M+ra|0,N=N+b|0,O=O+A|0,P=P+B|0,Q=Q+C|0,R=R+D|0,S=S+c|0,T=T+d|0,a[0]=E>>>0&255,a[1]=E>>>8&255,a[2]=E>>>16&255,a[3]=E>>>24&255,a[4]=F>>>0&255,a[5]=F>>>8&255,a[6]=F>>>16&255,a[7]=F>>>24&255,a[8]=G>>>0&255,a[9]=G>>>8&255,a[10]=G>>>16&255,a[11]=G>>>24&255,a[12]=H>>>0&255,a[13]=H>>>8&255,a[14]=H>>>16&255,a[15]=H>>>24&255,a[16]=I>>>0&255,a[17]=I>>>8&255,a[18]=I>>>16&255,a[19]=I>>>24&255,a[20]=J>>>0&255,a[21]=J>>>8&255,a[22]=J>>>16&255,a[23]=J>>>24&255,a[24]=K>>>0&255,a[25]=K>>>8&255,a[26]=K>>>16&255,a[27]=K>>>24&255,a[28]=L>>>0&255,a[29]=L>>>8&255,a[30]=L>>>16&255,a[31]=L>>>24&255,a[32]=M>>>0&255,a[33]=M>>>8&255,a[34]=M>>>16&255,a[35]=M>>>24&255,a[36]=N>>>0&255,a[37]=N>>>8&255,a[38]=N>>>16&255,a[39]=N>>>24&255,a[40]=O>>>0&255,a[41]=O>>>8&255,a[42]=O>>>16&255,a[43]=O>>>24&255,a[44]=P>>>0&255,a[45]=P>>>8&255,a[46]=P>>>16&255,a[47]=P>>>24&255,a[48]=Q>>>0&255,a[49]=Q>>>8&255,a[50]=Q>>>16&255,a[51]=Q>>>24&255,a[52]=R>>>0&255,a[53]=R>>>8&255,a[54]=R>>>16&255,a[55]=R>>>24&255,a[56]=S>>>0&255,a[57]=S>>>8&255,a[58]=S>>>16&255,a[59]=S>>>24&255,a[60]=T>>>0&255,a[61]=T>>>8&255,a[62]=T>>>16&255,a[63]=T>>>24&255}(a,b,c,d)}function fa(a,b,c,d){!function(a,b,c,d){for(var e,f=255&d[0]|(255&d[1])<<8|(255&d[2])<<16|(255&d[3])<<24,l=255&c[0]|(255&c[1])<<8|(255&c[2])<<16|(255&c[3])<<24,fa=255&c[4]|(255&c[5])<<8|(255&c[6])<<16|(255&c[7])<<24,ga=255&c[8]|(255&c[9])<<8|(255&c[10])<<16|(255&c[11])<<24,ia=255&c[12]|(255&c[13])<<8|(255&c[14])<<16|(255&c[15])<<24,ja=255&d[4]|(255&d[5])<<8|(255&d[6])<<16|(255&d[7])<<24,ka=255&b[0]|(255&b[1])<<8|(255&b[2])<<16|(255&b[3])<<24,la=255&b[4]|(255&b[5])<<8|(255&b[6])<<16|(255&b[7])<<24,p=255&b[8]|(255&b[9])<<8|(255&b[10])<<16|(255&b[11])<<24,b=255&b[12]|(255&b[13])<<8|(255&b[14])<<16|(255&b[15])<<24,q=255&d[8]|(255&d[9])<<8|(255&d[10])<<16|(255&d[11])<<24,r=255&c[16]|(255&c[17])<<8|(255&c[18])<<16|(255&c[19])<<24,s=255&c[20]|(255&c[21])<<8|(255&c[22])<<16|(255&c[23])<<24,t=255&c[24]|(255&c[25])<<8|(255&c[26])<<16|(255&c[27])<<24,c=255&c[28]|(255&c[29])<<8|(255&c[30])<<16|(255&c[31])<<24,d=255&d[12]|(255&d[13])<<8|(255&d[14])<<16|(255&d[15])<<24,ma=0;ma<20;ma+=2)f^=(e=(s^=(e=(p^=(e=(ia^=(e=f+s|0)<<7|e>>>25)+f|0)<<9|e>>>23)+ia|0)<<13|e>>>19)+p|0)<<18|e>>>14,ja^=(e=(l^=(e=(t^=(e=(b^=(e=ja+l|0)<<7|e>>>25)+ja|0)<<9|e>>>23)+b|0)<<13|e>>>19)+t|0)<<18|e>>>14,q^=(e=(ka^=(e=(fa^=(e=(c^=(e=q+ka|0)<<7|e>>>25)+q|0)<<9|e>>>23)+c|0)<<13|e>>>19)+fa|0)<<18|e>>>14,d^=(e=(r^=(e=(la^=(e=(ga^=(e=d+r|0)<<7|e>>>25)+d|0)<<9|e>>>23)+ga|0)<<13|e>>>19)+la|0)<<18|e>>>14,f^=(e=(ga^=(e=(fa^=(e=(l^=(e=f+ga|0)<<7|e>>>25)+f|0)<<9|e>>>23)+l|0)<<13|e>>>19)+fa|0)<<18|e>>>14,ja^=(e=(ia^=(e=(la^=(e=(ka^=(e=ja+ia|0)<<7|e>>>25)+ja|0)<<9|e>>>23)+ka|0)<<13|e>>>19)+la|0)<<18|e>>>14,q^=(e=(b^=(e=(p^=(e=(r^=(e=q+b|0)<<7|e>>>25)+q|0)<<9|e>>>23)+r|0)<<13|e>>>19)+p|0)<<18|e>>>14,d^=(e=(c^=(e=(t^=(e=(s^=(e=d+c|0)<<7|e>>>25)+d|0)<<9|e>>>23)+s|0)<<13|e>>>19)+t|0)<<18|e>>>14;a[0]=f>>>0&255,a[1]=f>>>8&255,a[2]=f>>>16&255,a[3]=f>>>24&255,a[4]=ja>>>0&255,a[5]=ja>>>8&255,a[6]=ja>>>16&255,a[7]=ja>>>24&255,a[8]=q>>>0&255,a[9]=q>>>8&255,a[10]=q>>>16&255,a[11]=q>>>24&255,a[12]=d>>>0&255,a[13]=d>>>8&255,a[14]=d>>>16&255,a[15]=d>>>24&255,a[16]=ka>>>0&255,a[17]=ka>>>8&255,a[18]=ka>>>16&255,a[19]=ka>>>24&255,a[20]=la>>>0&255,a[21]=la>>>8&255,a[22]=la>>>16&255,a[23]=la>>>24&255,a[24]=p>>>0&255,a[25]=p>>>8&255,a[26]=p>>>16&255,a[27]=p>>>24&255,a[28]=b>>>0&255,a[29]=b>>>8&255,a[30]=b>>>16&255,a[31]=b>>>24&255}(a,b,c,d)}var ga=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ha(a,b,c,d,e,f,h){var j,da=new Uint8Array(16),k=new Uint8Array(64);for(j=0;j<16;j++)da[j]=0;for(j=0;j<8;j++)da[j]=f[j];for(;e>=64;){for(o(k,da,h,ga),j=0;j<64;j++)a[b+j]=c[d+j]^k[j];for(f=1,j=8;j<16;j++)f=f+(255&da[j])|0,da[j]=255&f,f>>>=8;e-=64,b+=64,d+=64}if(e>0)for(o(k,da,h,ga),j=0;j<e;j++)a[b+j]=c[d+j]^k[j];return 0}function ia(a,b,c,d,e){var f,aa=new Uint8Array(16),ba=new Uint8Array(64);for(f=0;f<16;f++)aa[f]=0;for(f=0;f<8;f++)aa[f]=d[f];for(;c>=64;){for(o(ba,aa,e,ga),f=0;f<64;f++)a[b+f]=ba[f];for(d=1,f=8;f<16;f++)d=d+(255&aa[f])|0,aa[f]=255&d,d>>>=8;c-=64,b+=64}if(c>0)for(o(ba,aa,e,ga),f=0;f<c;f++)a[b+f]=ba[f];return 0}function ja(a,b,c,d,e){var f=new Uint8Array(32);fa(f,d,e,ga);for(var e=new Uint8Array(8),g=0;g<8;g++)e[g]=d[g+16];return ia(a,b,c,e,f)}function ka(a,b,c,d,e,f,i){var ca=new Uint8Array(32);fa(ca,f,i,ga);for(var i=new Uint8Array(8),j=0;j<8;j++)i[j]=f[j+16];return ha(a,b,c,d,e,i,ca)}var la=function(a){var b,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,b=255&a[0]|(255&a[1])<<8,this.r[0]=8191&b,c=255&a[2]|(255&a[3])<<8,this.r[1]=8191&(b>>>13|c<<3),b=255&a[4]|(255&a[5])<<8,this.r[2]=7939&(c>>>10|b<<6),c=255&a[6]|(255&a[7])<<8,this.r[3]=8191&(b>>>7|c<<9),b=255&a[8]|(255&a[9])<<8,this.r[4]=255&(c>>>4|b<<12),this.r[5]=b>>>1&8190,c=255&a[10]|(255&a[11])<<8,this.r[6]=8191&(b>>>14|c<<2),b=255&a[12]|(255&a[13])<<8,this.r[7]=8065&(c>>>11|b<<5),c=255&a[14]|(255&a[15])<<8,this.r[8]=8191&(b>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&a[16]|(255&a[17])<<8,this.pad[1]=255&a[18]|(255&a[19])<<8,this.pad[2]=255&a[20]|(255&a[21])<<8,this.pad[3]=255&a[22]|(255&a[23])<<8,this.pad[4]=255&a[24]|(255&a[25])<<8,this.pad[5]=255&a[26]|(255&a[27])<<8,this.pad[6]=255&a[28]|(255&a[29])<<8,this.pad[7]=255&a[30]|(255&a[31])<<8};function p(a,b,c,d,e,f){f=new la(f);return f.update(c,d,e),f.finish(a,b),0}function q(a,b,c,d,e,f){var h=new Uint8Array(16);return p(h,0,c,d,e,f),n(a,b,h,0)}function r(a,b,c,d,e){if(c<32)return-1;for(ka(a,0,b,0,c,d,e),p(a,16,a,32,c-32,a),b=0;b<16;b++)a[b]=0;return 0}function s(a,b,c,d,e){var f=new Uint8Array(32);if(c<32)return-1;if(ja(f,0,32,d,e),0!==q(b,16,b,32,c-32,f))return-1;for(ka(a,0,b,0,c,d,e),f=0;f<32;f++)a[f]=0;return 0}function t(a,b){var c;for(c=0;c<16;c++)a[c]=0|b[c]}function ma(a){var b,c,d=1;for(b=0;b<16;b++)c=a[b]+d+65535,d=Math.floor(c/65536),a[b]=c-65536*d;a[0]+=d-1+37*(d-1)}function na(a,b,c){for(var d,c=~(c-1),e=0;e<16;e++)d=c&(a[e]^b[e]),a[e]^=d,b[e]^=d}function oa(a,c){var d,e,f=b(),i=b();for(d=0;d<16;d++)i[d]=c[d];for(ma(i),ma(i),ma(i),c=0;c<2;c++){for(f[0]=i[0]-65517,d=1;d<15;d++)f[d]=i[d]-65535-(f[d-1]>>16&1),f[d-1]&=65535;f[15]=i[15]-32767-(f[14]>>16&1),e=f[15]>>16&1,f[14]&=65535,na(i,f,1-e)}for(d=0;d<16;d++)a[2*d]=255&i[d],a[2*d+1]=i[d]>>8}function pa(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);return oa(c,a),oa(d,b),ea(c,0,d,0)}function qa(a){var b=new Uint8Array(32);return oa(b,a),1&b[0]}function u(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function v(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]+c[d]}function w(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]-c[d]}function x(a,b,c){var d,e=0,f=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0,T=0,U=0,V=0,W=0,X=0,Y=0,Z=0,$=0,p=0,q=0,r=0,s=0,t=0,ma=0,na=0,oa=0,pa=0,qa=0,u=c[0],v=c[1],w=c[2],x=c[3],y=c[4],z=c[5],ra=c[6],A=c[7],B=c[8],C=c[9],D=c[10],E=c[11],F=c[12],G=c[13],H=c[14];c=c[15];e+=(d=b[0])*u,f+=d*v,I+=d*w,J+=d*x,K+=d*y,L+=d*z,M+=d*ra,N+=d*A,O+=d*B,P+=d*C,Q+=d*D,R+=d*E,S+=d*F,T+=d*G,U+=d*H,V+=d*c,f+=(d=b[1])*u,I+=d*v,J+=d*w,K+=d*x,L+=d*y,M+=d*z,N+=d*ra,O+=d*A,P+=d*B,Q+=d*C,R+=d*D,S+=d*E,T+=d*F,U+=d*G,V+=d*H,W+=d*c,I+=(d=b[2])*u,J+=d*v,K+=d*w,L+=d*x,M+=d*y,N+=d*z,O+=d*ra,P+=d*A,Q+=d*B,R+=d*C,S+=d*D,T+=d*E,U+=d*F,V+=d*G,W+=d*H,X+=d*c,J+=(d=b[3])*u,K+=d*v,L+=d*w,M+=d*x,N+=d*y,O+=d*z,P+=d*ra,Q+=d*A,R+=d*B,S+=d*C,T+=d*D,U+=d*E,V+=d*F,W+=d*G,X+=d*H,Y+=d*c,K+=(d=b[4])*u,L+=d*v,M+=d*w,N+=d*x,O+=d*y,P+=d*z,Q+=d*ra,R+=d*A,S+=d*B,T+=d*C,U+=d*D,V+=d*E,W+=d*F,X+=d*G,Y+=d*H,Z+=d*c,L+=(d=b[5])*u,M+=d*v,N+=d*w,O+=d*x,P+=d*y,Q+=d*z,R+=d*ra,S+=d*A,T+=d*B,U+=d*C,V+=d*D,W+=d*E,X+=d*F,Y+=d*G,Z+=d*H,$+=d*c,M+=(d=b[6])*u,N+=d*v,O+=d*w,P+=d*x,Q+=d*y,R+=d*z,S+=d*ra,T+=d*A,U+=d*B,V+=d*C,W+=d*D,X+=d*E,Y+=d*F,Z+=d*G,$+=d*H,p+=d*c,N+=(d=b[7])*u,O+=d*v,P+=d*w,Q+=d*x,R+=d*y,S+=d*z,T+=d*ra,U+=d*A,V+=d*B,W+=d*C,X+=d*D,Y+=d*E,Z+=d*F,$+=d*G,p+=d*H,q+=d*c,O+=(d=b[8])*u,P+=d*v,Q+=d*w,R+=d*x,S+=d*y,T+=d*z,U+=d*ra,V+=d*A,W+=d*B,X+=d*C,Y+=d*D,Z+=d*E,$+=d*F,p+=d*G,q+=d*H,r+=d*c,P+=(d=b[9])*u,Q+=d*v,R+=d*w,S+=d*x,T+=d*y,U+=d*z,V+=d*ra,W+=d*A,X+=d*B,Y+=d*C,Z+=d*D,$+=d*E,p+=d*F,q+=d*G,r+=d*H,s+=d*c,Q+=(d=b[10])*u,R+=d*v,S+=d*w,T+=d*x,U+=d*y,V+=d*z,W+=d*ra,X+=d*A,Y+=d*B,Z+=d*C,$+=d*D,p+=d*E,q+=d*F,r+=d*G,s+=d*H,t+=d*c,R+=(d=b[11])*u,S+=d*v,T+=d*w,U+=d*x,V+=d*y,W+=d*z,X+=d*ra,Y+=d*A,Z+=d*B,$+=d*C,p+=d*D,q+=d*E,r+=d*F,s+=d*G,t+=d*H,ma+=d*c,S+=(d=b[12])*u,T+=d*v,U+=d*w,V+=d*x,W+=d*y,X+=d*z,Y+=d*ra,Z+=d*A,$+=d*B,p+=d*C,q+=d*D,r+=d*E,s+=d*F,t+=d*G,ma+=d*H,na+=d*c,T+=(d=b[13])*u,U+=d*v,V+=d*w,W+=d*x,X+=d*y,Y+=d*z,Z+=d*ra,$+=d*A,p+=d*B,q+=d*C,r+=d*D,s+=d*E,t+=d*F,ma+=d*G,na+=d*H,oa+=d*c,U+=(d=b[14])*u,V+=d*v,W+=d*w,X+=d*x,Y+=d*y,Z+=d*z,$+=d*ra,p+=d*A,q+=d*B,r+=d*C,s+=d*D,t+=d*E,ma+=d*F,na+=d*G,oa+=d*H,pa+=d*c,V+=(d=b[15])*u,f+=38*(X+=d*w),I+=38*(Y+=d*x),J+=38*(Z+=d*y),K+=38*($+=d*z),L+=38*(p+=d*ra),M+=38*(q+=d*A),N+=38*(r+=d*B),O+=38*(s+=d*C),P+=38*(t+=d*D),Q+=38*(ma+=d*E),R+=38*(na+=d*F),S+=38*(oa+=d*G),T+=38*(pa+=d*H),U+=38*(qa+=d*c),e=(d=(e+=38*(W+=d*v))+1+65535)-65536*(b=Math.floor(d/65536)),f=(d=f+b+65535)-65536*(b=Math.floor(d/65536)),I=(d=I+b+65535)-65536*(b=Math.floor(d/65536)),J=(d=J+b+65535)-65536*(b=Math.floor(d/65536)),K=(d=K+b+65535)-65536*(b=Math.floor(d/65536)),L=(d=L+b+65535)-65536*(b=Math.floor(d/65536)),M=(d=M+b+65535)-65536*(b=Math.floor(d/65536)),N=(d=N+b+65535)-65536*(b=Math.floor(d/65536)),O=(d=O+b+65535)-65536*(b=Math.floor(d/65536)),P=(d=P+b+65535)-65536*(b=Math.floor(d/65536)),Q=(d=Q+b+65535)-65536*(b=Math.floor(d/65536)),R=(d=R+b+65535)-65536*(b=Math.floor(d/65536)),S=(d=S+b+65535)-65536*(b=Math.floor(d/65536)),T=(d=T+b+65535)-65536*(b=Math.floor(d/65536)),U=(d=U+b+65535)-65536*(b=Math.floor(d/65536)),V=(d=V+b+65535)-65536*(b=Math.floor(d/65536)),e=(d=(e+=b-1+37*(b-1))+1+65535)-65536*(b=Math.floor(d/65536)),f=(d=f+b+65535)-65536*(b=Math.floor(d/65536)),I=(d=I+b+65535)-65536*(b=Math.floor(d/65536)),J=(d=J+b+65535)-65536*(b=Math.floor(d/65536)),K=(d=K+b+65535)-65536*(b=Math.floor(d/65536)),L=(d=L+b+65535)-65536*(b=Math.floor(d/65536)),M=(d=M+b+65535)-65536*(b=Math.floor(d/65536)),N=(d=N+b+65535)-65536*(b=Math.floor(d/65536)),O=(d=O+b+65535)-65536*(b=Math.floor(d/65536)),P=(d=P+b+65535)-65536*(b=Math.floor(d/65536)),Q=(d=Q+b+65535)-65536*(b=Math.floor(d/65536)),R=(d=R+b+65535)-65536*(b=Math.floor(d/65536)),S=(d=S+b+65535)-65536*(b=Math.floor(d/65536)),T=(d=T+b+65535)-65536*(b=Math.floor(d/65536)),U=(d=U+b+65535)-65536*(b=Math.floor(d/65536)),V=(d=V+b+65535)-65536*(b=Math.floor(d/65536)),e+=b-1+37*(b-1),a[0]=e,a[1]=f,a[2]=I,a[3]=J,a[4]=K,a[5]=L,a[6]=M,a[7]=N,a[8]=O,a[9]=P,a[10]=Q,a[11]=R,a[12]=S,a[13]=T,a[14]=U,a[15]=V}function y(a,b){x(a,b,b)}function z(a,c){var d,e=b();for(d=0;d<16;d++)e[d]=c[d];for(d=253;d>=0;d--)y(e,e),2!==d&&4!==d&&x(e,e,c);for(d=0;d<16;d++)a[d]=e[d]}function ra(a,c){var d,e=b();for(d=0;d<16;d++)e[d]=c[d];for(d=250;d>=0;d--)y(e,e),1!==d&&x(e,e,c);for(d=0;d<16;d++)a[d]=e[d]}function A(a,c,d){var e,f=new Uint8Array(32),m=new Float64Array(80),n=b(),ea=b(),o=b(),fa=b(),ga=b(),ha=b();for(e=0;e<31;e++)f[e]=c[e];for(f[31]=127&c[31]|64,f[0]&=248,u(m,d),e=0;e<16;e++)ea[e]=m[e],fa[e]=n[e]=o[e]=0;for(n[0]=fa[0]=1,e=254;e>=0;--e)na(n,ea,c=f[e>>>3]>>>(7&e)&1),na(o,fa,c),v(ga,n,o),w(n,n,o),v(o,ea,fa),w(ea,ea,fa),y(fa,ga),y(ha,n),x(n,o,n),x(o,ea,ga),v(ga,n,o),w(n,n,o),y(ea,n),w(o,fa,ha),x(n,o,i),v(n,n,fa),x(o,o,n),x(n,fa,ha),x(fa,ea,m),y(ea,ga),na(n,ea,c),na(o,fa,c);for(e=0;e<16;e++)m[e+16]=n[e],m[e+32]=o[e],m[e+48]=ea[e],m[e+64]=fa[e];d=m.subarray(32);c=m.subarray(16);return z(d,d),x(c,c,d),oa(a,c),0}function B(a,b){return A(a,b,f)}function C(a,b){return d(b,32),B(a,b)}function D(a,b,c){var d=new Uint8Array(32);return A(d,c,b),fa(a,e,d,ga)}la.prototype.blocks=function(a,b,c){for(var d,d,d,d,d,d,d,d,e,f,d,aa,g,h,i,ba,ca,k,A,B=this.fin?0:2048,C=this.h[0],D=this.h[1],E=this.h[2],F=this.h[3],G=this.h[4],H=this.h[5],I=this.h[6],J=this.h[7],K=this.h[8],L=this.h[9],M=this.r[0],N=this.r[1],O=this.r[2],P=this.r[3],Q=this.r[4],R=this.r[5],S=this.r[6],T=this.r[7],U=this.r[8],V=this.r[9];c>=16;)f=0,f+=(C+=8191&(d=255&a[b+0]|(255&a[b+1])<<8))*M,f+=(D+=8191&(d>>>13|(d=255&a[b+2]|(255&a[b+3])<<8)<<3))*(5*V),f+=(E+=8191&(d>>>10|(d=255&a[b+4]|(255&a[b+5])<<8)<<6))*(5*U),f+=(F+=8191&(d>>>7|(d=255&a[b+6]|(255&a[b+7])<<8)<<9))*(5*T),e=(f+=(G+=8191&(d>>>4|(d=255&a[b+8]|(255&a[b+9])<<8)<<12))*(5*S))>>>13,f&=8191,f+=(H+=d>>>1&8191)*(5*R),f+=(I+=8191&(d>>>14|(d=255&a[b+10]|(255&a[b+11])<<8)<<2))*(5*Q),f+=(J+=8191&(d>>>11|(d=255&a[b+12]|(255&a[b+13])<<8)<<5))*(5*P),f+=(K+=8191&(d>>>8|(d=255&a[b+14]|(255&a[b+15])<<8)<<8))*(5*O),d=e+=(f+=(L+=d>>>5|B)*(5*N))>>>13,d+=C*N,d+=D*M,d+=E*(5*V),d+=F*(5*U),e=(d+=G*(5*T))>>>13,d&=8191,d+=H*(5*S),d+=I*(5*R),d+=J*(5*Q),d+=K*(5*P),e+=(d+=L*(5*O))>>>13,d&=8191,aa=e,aa+=C*O,aa+=D*N,aa+=E*M,aa+=F*(5*V),e=(aa+=G*(5*U))>>>13,aa&=8191,aa+=H*(5*T),aa+=I*(5*S),aa+=J*(5*R),aa+=K*(5*Q),g=e+=(aa+=L*(5*P))>>>13,g+=C*P,g+=D*O,g+=E*N,g+=F*M,e=(g+=G*(5*V))>>>13,g&=8191,g+=H*(5*U),g+=I*(5*T),g+=J*(5*S),g+=K*(5*R),h=e+=(g+=L*(5*Q))>>>13,h+=C*Q,h+=D*P,h+=E*O,h+=F*N,e=(h+=G*M)>>>13,h&=8191,h+=H*(5*V),h+=I*(5*U),h+=J*(5*T),h+=K*(5*S),i=e+=(h+=L*(5*R))>>>13,i+=C*R,i+=D*Q,i+=E*P,i+=F*O,e=(i+=G*N)>>>13,i&=8191,i+=H*M,i+=I*(5*V),i+=J*(5*U),i+=K*(5*T),ba=e+=(i+=L*(5*S))>>>13,ba+=C*S,ba+=D*R,ba+=E*Q,ba+=F*P,e=(ba+=G*O)>>>13,ba&=8191,ba+=H*N,ba+=I*M,ba+=J*(5*V),ba+=K*(5*U),ca=e+=(ba+=L*(5*T))>>>13,ca+=C*T,ca+=D*S,ca+=E*R,ca+=F*Q,e=(ca+=G*P)>>>13,ca&=8191,ca+=H*O,ca+=I*N,ca+=J*M,ca+=K*(5*V),k=e+=(ca+=L*(5*U))>>>13,k+=C*U,k+=D*T,k+=E*S,k+=F*R,e=(k+=G*Q)>>>13,k&=8191,k+=H*P,k+=I*O,k+=J*N,k+=K*M,A=e+=(k+=L*(5*V))>>>13,A+=C*V,A+=D*U,A+=E*T,A+=F*S,e=(A+=G*R)>>>13,A&=8191,A+=H*Q,A+=I*P,A+=J*O,A+=K*N,C=8191&(e=(((e+=(A+=L*M)>>>13)<<2)+e|0)+(f&=8191)|0),D=d+=e>>>=13,E=aa&=8191,F=g&=8191,G=h&=8191,H=i&=8191,I=ba&=8191,J=ca&=8191,K=k&=8191,L=A&=8191,b+=16,c-=16;this.h[0]=C,this.h[1]=D,this.h[2]=E,this.h[3]=F,this.h[4]=G,this.h[5]=H,this.h[6]=I,this.h[7]=J,this.h[8]=K,this.h[9]=L},la.prototype.finish=function(a,b){var c,d,e=new Uint16Array(10);if(this.leftover){for(d=this.leftover,this.buffer[d++]=1;d<16;d++)this.buffer[d]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(c=this.h[1]>>>13,this.h[1]&=8191,d=2;d<10;d++)this.h[d]+=c,c=this.h[d]>>>13,this.h[d]&=8191;for(this.h[0]+=5*c,c=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=c,c=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=c,e[0]=this.h[0]+5,c=e[0]>>>13,e[0]&=8191,d=1;d<10;d++)e[d]=this.h[d]+c,c=e[d]>>>13,e[d]&=8191;for(e[9]-=8192,c=(1^c)-1,d=0;d<10;d++)e[d]&=c;for(c=~c,d=0;d<10;d++)this.h[d]=this.h[d]&c|e[d];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),c=this.h[0]+this.pad[0],this.h[0]=65535&c,d=1;d<8;d++)c=(this.h[d]+this.pad[d]|0)+(c>>>16)|0,this.h[d]=65535&c;a[b+0]=this.h[0]>>>0&255,a[b+1]=this.h[0]>>>8&255,a[b+2]=this.h[1]>>>0&255,a[b+3]=this.h[1]>>>8&255,a[b+4]=this.h[2]>>>0&255,a[b+5]=this.h[2]>>>8&255,a[b+6]=this.h[3]>>>0&255,a[b+7]=this.h[3]>>>8&255,a[b+8]=this.h[4]>>>0&255,a[b+9]=this.h[4]>>>8&255,a[b+10]=this.h[5]>>>0&255,a[b+11]=this.h[5]>>>8&255,a[b+12]=this.h[6]>>>0&255,a[b+13]=this.h[6]>>>8&255,a[b+14]=this.h[7]>>>0&255,a[b+15]=this.h[7]>>>8&255},la.prototype.update=function(a,b,c){var d,e;if(this.leftover){for((e=16-this.leftover)>c&&(e=c),d=0;d<e;d++)this.buffer[this.leftover+d]=a[b+d];if(c-=e,b+=e,this.leftover+=e,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(c>=16&&(e=c-c%16,this.blocks(a,b,e),b+=e,c-=e),c){for(d=0;d<c;d++)this.buffer[this.leftover+d]=a[b+d];this.leftover+=c}};var E=r,F=s,G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function H(a,b,c,d){for(var e,f,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,p,q,r,s,t=new Int32Array(16),ma=new Int32Array(16),na=a[0],oa=a[1],pa=a[2],qa=a[3],u=a[4],v=a[5],w=a[6],x=a[7],y=b[0],z=b[1],ra=b[2],A=b[3],B=b[4],C=b[5],D=b[6],E=b[7],F=0;d>=128;){for(X=0;X<16;X++)Y=8*X+F,t[X]=c[Y+0]<<24|c[Y+1]<<16|c[Y+2]<<8|c[Y+3],ma[X]=c[Y+4]<<24|c[Y+5]<<16|c[Y+6]<<8|c[Y+7];for(X=0;X<80;X++)if(e=na,f=oa,H=pa,I=qa,J=u,K=v,L=w,N=y,O=z,P=ra,Q=A,R=B,S=C,T=D,p=65535&($=E),q=$>>>16,r=65535&(Z=x),s=Z>>>16,p+=65535&($=(B>>>14|u<<18)^(B>>>18|u<<14)^(u>>>9|B<<23)),q+=$>>>16,r+=65535&(Z=(u>>>14|B<<18)^(u>>>18|B<<14)^(B>>>9|u<<23)),s+=Z>>>16,p+=65535&($=B&C^~B&D),q+=$>>>16,r+=65535&(Z=u&v^~u&w),s+=Z>>>16,p+=65535&($=G[2*X+1]),q+=$>>>16,r+=65535&(Z=G[2*X]),s+=Z>>>16,Z=t[X%16],q+=($=ma[X%16])>>>16,r+=65535&Z,s+=Z>>>16,r+=(q+=(p+=65535&$)>>>16)>>>16,p=65535&($=W=65535&p|q<<16),q=$>>>16,r=65535&(Z=V=65535&r|(s+=r>>>16)<<16),s=Z>>>16,p+=65535&($=(y>>>28|na<<4)^(na>>>2|y<<30)^(na>>>7|y<<25)),q+=$>>>16,r+=65535&(Z=(na>>>28|y<<4)^(y>>>2|na<<30)^(y>>>7|na<<25)),s+=Z>>>16,q+=($=y&z^y&ra^z&ra)>>>16,r+=65535&(Z=na&oa^na&pa^oa&pa),s+=Z>>>16,M=65535&(r+=(q+=(p+=65535&$)>>>16)>>>16)|(s+=r>>>16)<<16,U=65535&p|q<<16,p=65535&($=Q),q=$>>>16,r=65535&(Z=I),s=Z>>>16,q+=($=W)>>>16,r+=65535&(Z=V),s+=Z>>>16,oa=e,pa=f,qa=H,u=65535&(r+=(q+=(p+=65535&$)>>>16)>>>16)|(s+=r>>>16)<<16,v=J,w=K,x=L,na=M,z=N,ra=O,A=P,B=65535&p|q<<16,C=R,D=S,E=T,y=U,X%16==15)for(Y=0;Y<16;Y++)Z=t[Y],p=65535&($=ma[Y]),q=$>>>16,r=65535&Z,s=Z>>>16,Z=t[(Y+9)%16],p+=65535&($=ma[(Y+9)%16]),q+=$>>>16,r+=65535&Z,s+=Z>>>16,V=t[(Y+1)%16],p+=65535&($=((W=ma[(Y+1)%16])>>>1|V<<31)^(W>>>8|V<<24)^(W>>>7|V<<25)),q+=$>>>16,r+=65535&(Z=(V>>>1|W<<31)^(V>>>8|W<<24)^V>>>7),s+=Z>>>16,V=t[(Y+14)%16],q+=($=((W=ma[(Y+14)%16])>>>19|V<<13)^(V>>>29|W<<3)^(W>>>6|V<<26))>>>16,r+=65535&(Z=(V>>>19|W<<13)^(W>>>29|V<<3)^V>>>6),s+=Z>>>16,s+=(r+=(q+=(p+=65535&$)>>>16)>>>16)>>>16,t[Y]=65535&r|s<<16,ma[Y]=65535&p|q<<16;p=65535&($=y),q=$>>>16,r=65535&(Z=na),s=Z>>>16,Z=a[0],q+=($=b[0])>>>16,r+=65535&Z,s+=Z>>>16,s+=(r+=(q+=(p+=65535&$)>>>16)>>>16)>>>16,a[0]=na=65535&r|s<<16,b[0]=y=65535&p|q<<16,p=65535&($=z),q=$>>>16,r=65535&(Z=oa),s=Z>>>16,Z=a[1],q+=($=b[1])>>>16,r+=65535&Z,s+=Z>>>16,s+=(r+=(q+=(p+=65535&$)>>>16)>>>16)>>>16,a[1]=oa=65535&r|s<<16,b[1]=z=65535&p|q<<16,p=65535&($=ra),q=$>>>16,r=65535&(Z=pa),s=Z>>>16,Z=a[2],q+=($=b[2])>>>16,r+=65535&Z,s+=Z>>>16,s+=(r+=(q+=(p+=65535&$)>>>16)>>>16)>>>16,a[2]=pa=65535&r|s<<16,b[2]=ra=65535&p|q<<16,p=65535&($=A),q=$>>>16,r=65535&(Z=qa),s=Z>>>16,Z=a[3],q+=($=b[3])>>>16,r+=65535&Z,s+=Z>>>16,s+=(r+=(q+=(p+=65535&$)>>>16)>>>16)>>>16,a[3]=qa=65535&r|s<<16,b[3]=A=65535&p|q<<16,p=65535&($=B),q=$>>>16,r=65535&(Z=u),s=Z>>>16,Z=a[4],q+=($=b[4])>>>16,r+=65535&Z,s+=Z>>>16,s+=(r+=(q+=(p+=65535&$)>>>16)>>>16)>>>16,a[4]=u=65535&r|s<<16,b[4]=B=65535&p|q<<16,p=65535&($=C),q=$>>>16,r=65535&(Z=v),s=Z>>>16,Z=a[5],q+=($=b[5])>>>16,r+=65535&Z,s+=Z>>>16,s+=(r+=(q+=(p+=65535&$)>>>16)>>>16)>>>16,a[5]=v=65535&r|s<<16,b[5]=C=65535&p|q<<16,p=65535&($=D),q=$>>>16,r=65535&(Z=w),s=Z>>>16,Z=a[6],q+=($=b[6])>>>16,r+=65535&Z,s+=Z>>>16,s+=(r+=(q+=(p+=65535&$)>>>16)>>>16)>>>16,a[6]=w=65535&r|s<<16,b[6]=D=65535&p|q<<16,p=65535&($=E),q=$>>>16,r=65535&(Z=x),s=Z>>>16,Z=a[7],q+=($=b[7])>>>16,r+=65535&Z,s+=Z>>>16,s+=(r+=(q+=(p+=65535&$)>>>16)>>>16)>>>16,a[7]=x=65535&r|s<<16,b[7]=E=65535&p|q<<16,F+=128,d-=128}return d}function I(a,b,c){var d,e=new Int32Array(8),f=new Int32Array(8),i=new Uint8Array(256),ba=c;for(e[0]=1779033703,e[1]=3144134277,e[2]=1013904242,e[3]=2773480762,e[4]=1359893119,e[5]=2600822924,e[6]=528734635,e[7]=1541459225,f[0]=4089235720,f[1]=2227873595,f[2]=4271175723,f[3]=1595750129,f[4]=2917565137,f[5]=725511199,f[6]=4215389547,f[7]=327033209,H(e,f,b,c),c%=128,d=0;d<c;d++)i[d]=b[ba-c+d];for(i[c]=128,i[(c=256-128*(c<112?1:0))-9]=0,l(i,c-8,ba/536870912|0,ba<<3),H(e,f,i,c),d=0;d<8;d++)l(a,8*d,e[d],f[d]);return 0}function J(a,c){var d=b(),e=b(),f=b(),k=b(),l=b(),m=b(),n=b(),ea=b(),o=b();w(d,a[1],a[0]),w(o,c[1],c[0]),x(d,d,o),v(e,a[0],a[1]),v(o,c[0],c[1]),x(e,e,o),x(f,a[3],c[3]),x(f,f,ca),x(k,a[2],c[2]),v(k,k,k),w(l,e,d),w(m,k,f),v(n,k,f),v(ea,e,d),x(a[0],l,m),x(a[1],ea,n),x(a[2],n,m),x(a[3],l,ea)}function K(a,b,c){var d;for(d=0;d<4;d++)na(a[d],b[d],c)}function L(a,c){var d=b(),e=b(),f=b();z(f,c[2]),x(d,c[0],f),x(e,c[1],f),oa(a,e),a[31]^=qa(d)<<7}function M(a,b,c){var d,e;for(t(a[0],g),t(a[1],h),t(a[2],h),t(a[3],g),e=255;e>=0;--e)K(a,b,d=c[e/8|0]>>(7&e)&1),J(b,a),J(a,a),K(a,b,d)}function N(a,c){var d=[b(),b(),b(),b()];t(d[0],j),t(d[1],da),t(d[2],h),x(d[3],j,da),M(a,d,c)}function O(a,c,e){var f=new Uint8Array(64),aa=[b(),b(),b(),b()];for(e||d(c,32),I(f,c,32),f[0]&=248,f[31]&=127,f[31]|=64,N(aa,f),L(a,aa),e=0;e<32;e++)c[e+32]=a[e];return 0}var P=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Q(a,b){var c,d,e,f;for(d=63;d>=32;--d){for(c=0,e=d-32,f=d-12;e<f;++e)b[e]+=c-16*b[d]*P[e-(d-32)],c=Math.floor((b[e]+128)/256),b[e]-=256*c;b[e]+=c,b[d]=0}for(c=0,e=0;e<32;e++)b[e]+=c-(b[31]>>4)*P[e],c=b[e]>>8,b[e]&=255;for(e=0;e<32;e++)b[e]-=c*P[e];for(d=0;d<32;d++)b[d+1]+=b[d]>>8,a[d]=255&b[d]}function R(a){var b,c=new Float64Array(64);for(b=0;b<64;b++)c[b]=a[b];for(b=0;b<64;b++)a[b]=0;Q(a,c)}function S(a,c,d,e){var f,g=new Uint8Array(64),k=new Uint8Array(64),l=new Uint8Array(64),m=new Float64Array(64),n=[b(),b(),b(),b()];I(g,e,32),g[0]&=248,g[31]&=127,g[31]|=64;var ea=d+64;for(f=0;f<d;f++)a[64+f]=c[f];for(f=0;f<32;f++)a[32+f]=g[32+f];for(I(l,a.subarray(32),d+32),R(l),N(n,l),L(a,n),f=32;f<64;f++)a[f]=e[f];for(I(k,a,d+64),R(k),f=0;f<64;f++)m[f]=0;for(f=0;f<32;f++)m[f]=l[f];for(f=0;f<32;f++)for(c=0;c<32;c++)m[f+c]+=k[f]*g[c];return Q(a.subarray(32),m),ea}function T(a,c,d,e){var f,l=new Uint8Array(32),m=new Uint8Array(64),n=[b(),b(),b(),b()],o=[b(),b(),b(),b()];if(d<64)return-1;if(function(a,c){var d=b(),e=b(),f=b(),l=b(),m=b(),n=b(),ea=b();return t(a[2],h),u(a[1],c),y(f,a[1]),x(l,f,ba),w(f,f,a[2]),v(l,a[2],l),y(m,l),y(n,m),x(ea,n,m),x(d,ea,f),x(d,d,l),ra(d,d),x(d,d,f),x(d,d,l),x(d,d,l),x(a[0],d,l),y(e,a[0]),x(e,e,l),pa(e,f)&&x(a[0],a[0],k),y(e,a[0]),x(e,e,l),pa(e,f)?-1:(qa(a[0])===c[31]>>7&&w(a[0],g,a[0]),x(a[3],a[0],a[1]),0)}(o,e))return-1;for(f=0;f<d;f++)a[f]=c[f];for(f=0;f<32;f++)a[f+32]=e[f];if(I(m,a,d),R(m),M(n,o,m),N(o,c.subarray(32)),J(n,o),L(l,n),d-=64,ea(c,0,l,0)){for(f=0;f<d;f++)a[f]=0;return-1}for(f=0;f<d;f++)a[f]=c[f+64];return d}var U,V=64,W=32,X=64;function Y(a,b){if(32!==a.length)throw new Error("bad key size");if(24!==b.length)throw new Error("bad nonce size")}function Z(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function $(a){for(var b=0;b<a.length;b++)a[b]=0}a.lowlevel={crypto_core_hsalsa20:fa,crypto_stream_xor:ka,crypto_stream:ja,crypto_stream_salsa20_xor:ha,crypto_stream_salsa20:ia,crypto_onetimeauth:p,crypto_onetimeauth_verify:q,crypto_verify_16:n,crypto_verify_32:ea,crypto_secretbox:r,crypto_secretbox_open:s,crypto_scalarmult:A,crypto_scalarmult_base:B,crypto_box_beforenm:D,crypto_box_afternm:E,crypto_box:function(a,b,c,d,e,f){var h=new Uint8Array(32);return D(h,e,f),E(a,b,c,d,h)},crypto_box_open:function(a,b,c,d,e,f){var h=new Uint8Array(32);return D(h,e,f),F(a,b,c,d,h)},crypto_box_keypair:C,crypto_hash:I,crypto_sign:S,crypto_sign_keypair:O,crypto_sign_open:T,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:V,crypto_sign_PUBLICKEYBYTES:W,crypto_sign_SECRETKEYBYTES:X,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:b,D:ba,L:P,pack25519:oa,unpack25519:u,M:x,A:v,S:y,Z:w,pow2523:ra,add:J,set25519:t,modL:Q,scalarmult:M,scalarbase:N},a.randomBytes=function(a){var b=new Uint8Array(a);return d(b,a),b},a.secretbox=function(a,b,c){Z(a,b,c),Y(c,b);for(var d=new Uint8Array(32+a.length),e=new Uint8Array(d.length),f=0;f<a.length;f++)d[f+32]=a[f];return r(e,d,d.length,b,c),e.subarray(16)},a.secretbox.open=function(a,b,c){Z(a,b,c),Y(c,b);for(var d=new Uint8Array(16+a.length),e=new Uint8Array(d.length),f=0;f<a.length;f++)d[f+16]=a[f];return d.length<32||0!==s(e,d,d.length,b,c)?null:e.subarray(32)},a.secretbox.keyLength=32,a.secretbox.nonceLength=24,a.secretbox.overheadLength=16,a.scalarMult=function(a,b){if(Z(a,b),32!==a.length)throw new Error("bad n size");if(32!==b.length)throw new Error("bad p size");var c=new Uint8Array(32);return A(c,a,b),c},a.scalarMult.base=function(a){if(Z(a),32!==a.length)throw new Error("bad n size");var b=new Uint8Array(32);return B(b,a),b},a.scalarMult.scalarLength=32,a.scalarMult.groupElementLength=32,a.box=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox(b,c,d)},a.box.before=function(a,b){Z(a,b),(function(a,b){if(32!==a.length)throw new Error("bad public key size");if(32!==b.length)throw new Error("bad secret key size")})(a,b);var c=new Uint8Array(32);return D(c,a,b),c},a.box.after=a.secretbox,a.box.open=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox.open(b,c,d)},a.box.open.after=a.secretbox.open,a.box.keyPair=function(){var a=new Uint8Array(32),b=new Uint8Array(32);return C(a,b),{publicKey:a,secretKey:b}},a.box.keyPair.fromSecretKey=function(a){if(Z(a),32!==a.length)throw new Error("bad secret key size");var b=new Uint8Array(32);return B(b,a),{publicKey:b,secretKey:new Uint8Array(a)}},a.box.publicKeyLength=32,a.box.secretKeyLength=32,a.box.sharedKeyLength=32,a.box.nonceLength=24,a.box.overheadLength=a.secretbox.overheadLength,a.sign=function(a,b){if(Z(a,b),b.length!==X)throw new Error("bad secret key size");var c=new Uint8Array(V+a.length);return S(c,a,a.length,b),c},a.sign.open=function(a,b){if(Z(a,b),b.length!==W)throw new Error("bad public key size");var c=new Uint8Array(a.length);a=T(c,a,a.length,b);if(a<0)return null;for(var b=new Uint8Array(a),a=0;a<b.length;a++)b[a]=c[a];return b},a.sign.detached=function(b,c){for(var b=a.sign(b,c),c=new Uint8Array(V),d=0;d<c.length;d++)c[d]=b[d];return c},a.sign.detached.verify=function(a,b,c){if(Z(a,b,c),b.length!==V)throw new Error("bad signature size");if(c.length!==W)throw new Error("bad public key size");var d,e=new Uint8Array(V+a.length),f=new Uint8Array(V+a.length);for(d=0;d<V;d++)e[d]=b[d];for(d=0;d<a.length;d++)e[d+V]=a[d];return T(f,e,e.length,c)>=0},a.sign.keyPair=function(){var a=new Uint8Array(W),b=new Uint8Array(X);return O(a,b),{publicKey:a,secretKey:b}},a.sign.keyPair.fromSecretKey=function(a){if(Z(a),a.length!==X)throw new Error("bad secret key size");for(var b=new Uint8Array(W),c=0;c<b.length;c++)b[c]=a[32+c];return{publicKey:b,secretKey:new Uint8Array(a)}},a.sign.keyPair.fromSeed=function(a){if(Z(a),32!==a.length)throw new Error("bad seed size");for(var b=new Uint8Array(W),c=new Uint8Array(X),d=0;d<32;d++)c[d]=a[d];return O(b,c,!0),{publicKey:b,secretKey:c}},a.sign.publicKeyLength=W,a.sign.secretKeyLength=X,a.sign.seedLength=32,a.sign.signatureLength=V,a.hash=function(a){Z(a);var b=new Uint8Array(64);return I(b,a,a.length),b},a.hash.hashLength=64,a.verify=function(a,b){return Z(a,b),0!==a.length&&0!==b.length&&a.length===b.length&&0===m(a,0,b,0,a.length)},a.setPRNG=function(a){d=a},(U="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&U.getRandomValues?a.setPRNG(function(a,b){var c,d=new Uint8Array(b);for(c=0;c<b;c+=65536)U.getRandomValues(d.subarray(c,c+Math.min(b-c,65536)));for(c=0;c<b;c++)a[c]=d[c];$(d)}):(U=c(24))&&U.randomBytes&&a.setPRNG(function(a,b){var c,d=U.randomBytes(b);for(c=0;c<b;c++)a[c]=d[c];$(d)})}(a.exports?a.exports:self.nacl=self.nacl||{})},24:function(){}},b={};function c(d){var e=b[d];if(void 0!==e)return e.exports;e=b[d]={exports:{}};return a[d](e,e.exports,c),e.exports}c.n=function(a){var b=a&&a.__esModule?function(){return a["default"]}:function(){return a};return c.d(b,{a:b}),b},c.d=function(a,b){for(var d in b)c.o(b,d)&&!c.o(a,d)&&Object.defineProperty(a,d,{enumerable:!0,get:b[d]})},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.r=function(a){"undefined"!=typeof Symbol&&(typeof Symbol==="function"?Symbol.toStringTag:"@@toStringTag")&&Object.defineProperty(a,typeof Symbol==="function"?Symbol.toStringTag:"@@toStringTag",{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var d={};(function(){"use strict";c.r(d);var a=c(780),b={},e=function(c){"default"!==c&&(b[c]=function(){return a[c]})};for(var f in a)e(f);c.d(d,b)})();var e=f;for(var aa in d)e[aa]=d[aa];d.__esModule&&Object.defineProperty(e,"__esModule",{value:!0})})()}),null);
__d("WAArrayBufferUtils",["Promise"],(function(a,b,c,d,e,f){function a(a){var b=new ArrayBuffer(a.length);b=new Uint8Array(b);var c,d;for(c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b.buffer}function c(a,c){c===void 0&&(c=5e5);return new(b("Promise"))(function(b,d){var e=a.length,f=new ArrayBuffer(e),g=new Uint8Array(f),h=0;requestAnimationFrame(i);function i(){var d=Math.min(h+c,e);while(h<d)g[h]=a.charCodeAt(h),h++;if(h===e){b(f);return}requestAnimationFrame(i)}})}function d(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var g=8388607;function e(a,b){a=new Uint8Array(a);if(b>g)throw new Error("Divisor is too big");var c=0;for(var d=0;d<a.length;++d)c=((c<<8)+a[d])%b;return c}function h(a){a=a.map(function(a){return new Uint8Array(a)});var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength},0);return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}function i(a,b){a=new Uint8Array(a);b=new Uint8Array(b);return j(a,b)}function j(a,b){if(a.byteLength!==b.byteLength)return!1;for(var c=0;c!==a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}f.stringToArrayBuffer=a;f.largeStringToArrayBuffer=c;f.arrayBufferToString=d;f.arrayBufferMod=e;f.concatBuffers=h;f.arrayBuffersEqualUNSAFE=i;f.uint8ArraysEqualUNSAFE=j}),66);
__d("WAProtoConst",[],(function(a,b,c,d,e,f){a={REPEATED:1<<6,PACKED:1<<7,REQUIRED:1<<8};b=31;c={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17};d={VARINT:0,BIT64:1,BINARY:2,BIT32:5};e={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"};f.FLAGS=a;f.TYPE_MASK=b;f.TYPES=c;f.ENC=d;f.KEYS=e}),66);
__d("WACommon.pb",["WAProtoConst"],function(a,b,c,d,e,f,g){a={PLACEHOLDER:0,NO_PLACEHOLDER:1,IGNORE:2};b={};c={};e={};b.internalSpec={remoteJid:[1,d("WAProtoConst").TYPES.STRING],fromMe:[2,d("WAProtoConst").TYPES.BOOL],id:[3,d("WAProtoConst").TYPES.STRING],participant:[4,d("WAProtoConst").TYPES.STRING]};c.internalSpec={text:[1,d("WAProtoConst").TYPES.STRING],mentionedJid:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING]};e.internalSpec={payload:[1,d("WAProtoConst").TYPES.BYTES],version:[2,d("WAProtoConst").TYPES.INT32]};g.FUTUREPROOFBEHAVIOR=a;g.MessageKeySpec=b;g.MessageTextSpec=c;g.SubProtocolSpec=e},98);
__d("WAArmadilloApplication.pb",["WACommon.pb","WAProtoConst"],function(a,b,c,d,e,f,g){a={ES_OPEN:1,ES_CLOSE:2};b={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2};c={INFO:0,EYE_OFF:1,NEWS_OFF:2,WARNING:3,PRIVATE:4,NONE:5};e={OPEN_NATIVE:11};f={SINGLE:0,PORTRAIT:3};var h={IG_STORY_MENTION:4,IG_MEDIA_SHARE:9,IG_MULTIPOST_SHARE:10,IG_FEED_VIDEO_SHARE:11,IG_STORY_PHOTO_SHARE:12,IG_STORY_VIDEO_SHARE:13,IG_CLIPS_SHARE:14,IG_IGTV_SHARE:15,IG_SHOP_SHARE:16,IG_STORY_REPLY:17,IG_STORY_REACTION:18,IG_PROFILE_SHARE:19,FB_FEED_SHARE:1e3,FB_STORY_REPLY:1001,FB_STORY_SHARE:1002,FB_STORY_MENTION:1003,FB_FEED_VIDEO_SHARE:1004,FB_GAMING_CUSTOM_UPDATE:1005},i={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2},j={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2},k={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={};l.internalSpec={payload:[1,d("WAProtoConst").TYPES.MESSAGE,n],metadata:[2,d("WAProtoConst").TYPES.MESSAGE,m]};m.internalSpec={};n.internalSpec={content:[1,d("WAProtoConst").TYPES.MESSAGE,E],applicationData:[2,d("WAProtoConst").TYPES.MESSAGE,s],signal:[3,d("WAProtoConst").TYPES.MESSAGE,p],subProtocol:[4,d("WAProtoConst").TYPES.MESSAGE,o],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};o.internalSpec={futureProof:[1,d("WAProtoConst").TYPES.ENUM,d("WACommon.pb").FUTUREPROOFBEHAVIOR]};p.internalSpec={encryptedBackupsSecrets:[1,d("WAProtoConst").TYPES.MESSAGE,q],__oneofs__:{signal:["encryptedBackupsSecrets"]}};q.internalSpec={backupId:[1,d("WAProtoConst").TYPES.UINT64],serverDataId:[2,d("WAProtoConst").TYPES.UINT64],epoch:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,r],tempOcmfClientState:[4,d("WAProtoConst").TYPES.BYTES],mailboxRootKey:[5,d("WAProtoConst").TYPES.BYTES],obliviousValidationToken:[6,d("WAProtoConst").TYPES.BYTES]};r.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT64],anonId:[2,d("WAProtoConst").TYPES.BYTES],rootKey:[3,d("WAProtoConst").TYPES.BYTES],status:[4,d("WAProtoConst").TYPES.ENUM,a]};s.internalSpec={metadataSync:[1,d("WAProtoConst").TYPES.MESSAGE,D],messageHistorySync:[2,d("WAProtoConst").TYPES.MESSAGE,t],__oneofs__:{applicationData:["metadataSync","messageHistorySync"]}};t.internalSpec={history:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec]};u.internalSpec={actionTimestamp:[1,d("WAProtoConst").TYPES.INT64],chatAction:[101,d("WAProtoConst").TYPES.MESSAGE,x],messageAction:[102,d("WAProtoConst").TYPES.MESSAGE,v],__oneofs__:{actionType:["chatAction","messageAction"]}};v.internalSpec={key:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageKeySpec],messageDelete:[101,d("WAProtoConst").TYPES.MESSAGE,w],__oneofs__:{action:["messageDelete"]}};w.internalSpec={};x.internalSpec={chatId:[1,d("WAProtoConst").TYPES.STRING],chatArchive:[101,d("WAProtoConst").TYPES.MESSAGE,A],chatDelete:[102,d("WAProtoConst").TYPES.MESSAGE,z],chatRead:[103,d("WAProtoConst").TYPES.MESSAGE,y],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}};y.internalSpec={messageRange:[1,d("WAProtoConst").TYPES.MESSAGE,C],read:[2,d("WAProtoConst").TYPES.BOOL]};z.internalSpec={messageRange:[1,d("WAProtoConst").TYPES.MESSAGE,C]};A.internalSpec={messageRange:[1,d("WAProtoConst").TYPES.MESSAGE,C],archived:[2,d("WAProtoConst").TYPES.BOOL]};B.internalSpec={key:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageKeySpec],timestamp:[2,d("WAProtoConst").TYPES.INT64]};C.internalSpec={lastMessageTimestamp:[1,d("WAProtoConst").TYPES.INT64],lastSystemMessageTimestamp:[2,d("WAProtoConst").TYPES.INT64],messages:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,B]};D.internalSpec={actions:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,u]};E.internalSpec={commonSticker:[1,d("WAProtoConst").TYPES.MESSAGE,K],screenshotAction:[3,d("WAProtoConst").TYPES.MESSAGE,F],extendedContentMessage:[4,d("WAProtoConst").TYPES.MESSAGE,G],ravenMessage:[5,d("WAProtoConst").TYPES.MESSAGE,J],ravenActionNotifMessage:[6,d("WAProtoConst").TYPES.MESSAGE,I],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage"]}};F.internalSpec={screenshotType:[1,d("WAProtoConst").TYPES.ENUM,b]};G.internalSpec={associatedMessage:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],targetType:[2,d("WAProtoConst").TYPES.ENUM,h],targetUsername:[3,d("WAProtoConst").TYPES.STRING],targetId:[4,d("WAProtoConst").TYPES.STRING],targetExpiringAtSec:[5,d("WAProtoConst").TYPES.INT64],xmaLayoutType:[6,d("WAProtoConst").TYPES.ENUM,f],ctas:[7,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,H],previews:[8,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],titleText:[9,d("WAProtoConst").TYPES.STRING],subtitleText:[10,d("WAProtoConst").TYPES.STRING],maxTitleNumOfLines:[11,d("WAProtoConst").TYPES.UINT32],maxSubtitleNumOfLines:[12,d("WAProtoConst").TYPES.UINT32],favicon:[13,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],headerImage:[14,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],headerTitle:[15,d("WAProtoConst").TYPES.STRING],overlayIconGlyph:[16,d("WAProtoConst").TYPES.ENUM,c],overlayTitle:[17,d("WAProtoConst").TYPES.STRING],overlayDescription:[18,d("WAProtoConst").TYPES.STRING],sentWithMessageId:[19,d("WAProtoConst").TYPES.STRING]};H.internalSpec={buttonType:[1,d("WAProtoConst").TYPES.ENUM,e],title:[2,d("WAProtoConst").TYPES.STRING],actionUrl:[3,d("WAProtoConst").TYPES.STRING],nativeUrl:[4,d("WAProtoConst").TYPES.STRING]};I.internalSpec={key:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageKeySpec],actionTimestamp:[2,d("WAProtoConst").TYPES.INT64],actionType:[3,d("WAProtoConst").TYPES.ENUM,i]};J.internalSpec={ephemeralType:[1,d("WAProtoConst").TYPES.ENUM,j],imageMessage:[2,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],videoMessage:[3,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}};K.internalSpec={stickerType:[1,d("WAProtoConst").TYPES.ENUM,k]};g.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCHSTATUS=a;g.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOTTYPE=b;g.ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_OVERLAYICONGLYPH=c;g.ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_CTA_BUTTONTYPE=e;g.ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_XMALAYOUTTYPE=f;g.ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_EXTENDEDCONTENTTYPE=h;g.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTIONTYPE=i;g.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERALTYPE=j;g.ARMADILLO_CONTENT_COMMON_STICKER_STICKERTYPE=k;g.ArmadilloSpec=l;g.Armadillo$MetadataSpec=m;g.Armadillo$PayloadSpec=n;g.Armadillo$SubProtocolPayloadSpec=o;g.Armadillo$SignalSpec=p;g.Armadillo$Signal$EncryptedBackupsSecretsSpec=q;g.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=r;g.Armadillo$ApplicationDataSpec=s;g.Armadillo$ApplicationData$MessageHistorySyncSpec=t;g.Armadillo$ApplicationData$MetadataSyncActionSpec=u;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=v;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=w;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=x;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=y;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=z;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=A;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=B;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=C;g.Armadillo$ApplicationData$MetadataSyncNotificationSpec=D;g.Armadillo$ContentSpec=E;g.Armadillo$Content$ScreenshotActionSpec=F;g.Armadillo$Content$ExtendedContentMessageSpec=G;g.Armadillo$Content$ExtendedContentMessage$CTASpec=H;g.Armadillo$Content$RavenActionNotifMessageSpec=I;g.Armadillo$Content$RavenMessageSpec=J;g.Armadillo$Content$CommonStickerSpec=K},98);
__d("WADualSendMsgUtils",["WAJids"],function(a,b,c,d,e,f,g){function a(a){return a!=null&&a.startsWith("shadow_")}function b(a){var b=a.split("shadow_");if(b[0]===""&&b[1]!=null){var c=b[1].split("@msgr")[0];b=b[1].split("@g.us")[0];if(c!=null)return d("WAJids").toMsgrUserJid(c);else if(b!=null)return d("WAJids").toGroupJid(b)}return a}function c(a){return(a==null?void 0:a.tag())==="test"}g.isDualSendJid=a;g.removeDualSendPrefix=b;g.parseTestNodeForDualSend=c},98);
__d("MAWBridgeTypes",["MAWAckLevel.re","MAWBridgeTypes.re","MAWDbMedia","MAWDbMsg","MAWGlobals","MAWImageUtils","MAWVault","WAArmadilloApplication.pb","WAAssertUnreachable","WADualSendMsgUtils","WAJids","WALogger","WAMsgType","WATimeUtils"],function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Calling the messages starting countdown bridge event with remaning time less or equal to 0"]);i=function(){return a};return a}function j(a,b){var c;if(((c=a.quote)==null?void 0:c.content)==null||a.quote.content.msgId==null&&a.quote.content.sourceId==null)return;c=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId;var e=a.quote||{};e=e.content;a=((a=a.quote)==null?void 0:a.content)||{};var f=a.author,g=a.mediaId,h=a.msgId,i=a.sourceId,j=a.specialTextSize,k=a.type;a=a.xmaMessageType;e=e.type===d("WAMsgType").MSG_TYPE.TEXT?e.msgContent.content:void 0;var l=d("WAJids").authorToUserId(f,c);f=f===d("WAJids").AUTHOR_ME||l===c;c=b||{};b=c.replyMediaId;var m=c.replyMediaPreviewHeight,n=c.replyMediaPreviewWidth,o=c.replyMediaUrlFallback,p=c.replyMediaUrlMimeType;c=c.replyXMAId;if(a===d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_EXTENDEDCONTENTTYPE.FB_STORY_REPLY)return{isStoryReply:!0,replyMediaId:g,replyMediaUrlMimeType:"image/jpeg",replySenderIsMe:f,replySourceId:i,replyStatusType:"Image",replyToUserId:l};a=d("MAWImageUtils").boundHeightWidth(m,n,96*.8);g=a.height;i=a.width;return{isStoryReply:!1,replyMediaId:b,replyMediaPreviewHeight:k===d("WAMsgType").MSG_TYPE.STICKER?g:m,replyMediaPreviewWidth:k===d("WAMsgType").MSG_TYPE.STICKER?i:n,replyMediaUrlFallback:o,replyMediaUrlMimeType:p,replyMessageText:e,replySenderIsMe:f,replySourceId:h,replyStatusType:j===1?d("WAMsgType").MSG_TYPE.STICKER:k,replyToUserId:l,replyXMAId:c}}function a(a,b){var c=d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(a){return!0},user:function(a){return!1}});return{cannotReplyReason:a.cannotReplyReason,chatId:a.chatId,clientThreadKey:b,folder:a.folder,isDualSend:d("WADualSendMsgUtils").isDualSendJid(a.jid),isGroup:c,jid:a.jid,lastActivityTs:a.newestMsgTs||d("WATimeUtils").castToUnixTime(0),lastReadTs:a.lastReadMsgTs||d("WATimeUtils").castToUnixTime(0),muteCallsExpireTimeMs:(b=a.muteCallsExpireTimeMs)!=null?b:0,muteExpireTimeMs:(c=a.muteExpireTimeMs)!=null?c:0}}function b(a){return{deliveredWatermarkTs:a.deliveredWatermarkTs||d("WATimeUtils").castToUnixTime(0),fbid:d("WAJids").extractUserId(a.userJid),isAdmin:a.type==="superadmin"||a.type==="admin",isInvited:a.type==="invitedParticipant",isSuperAdmin:a.type==="superadmin",lastReadActionTs:a.lastReadActionTs||d("WATimeUtils").castToUnixTime(0),readWatermarkTs:a.lastReadWatermarkTs||d("WATimeUtils").castToUnixTime(0),threadId:a.threadId}}function e(a,b){return{fbid:d("WAJids").extractUserId(b),threadId:a}}function f(a){return{threadId:a}}function k(a,b,e){var f,g=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId;f=((f=a.isForwarded)!=null?f:!1)&&a.type!==d("WAMsgType").MSG_TYPE.STICKER;var h=d("MAWDbMsg").getCanonicalTsFromMsg(a);e=j(a,e);var i=d("MAWDbMsg").getSortOrderWithFallback(a),k=d("WADualSendMsgUtils").isDualSendJid(a.threadJid);switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:var l=d("MAWVault").isVaulted(a.msgContent.content)?a.msgContent.content:d("MAWVault").vault(a.msgContent.content);return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,content:l,ephemeralDurationInSec:(l=a.ephemeralSetting)==null?void 0:l.ephemeralExpirationInSec,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:k,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:i,specialTextSize:a.specialTextSize,ts:h,type_:a.type});case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,ephemeralDurationInSec:(l=a.ephemeralSetting)==null?void 0:l.ephemeralExpirationInSec,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:k,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:i,ts:h,type_:a.type});case d("WAMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers["extends"]({},e,{ack:d("MAWAckLevel.re").ACK.clock,chatId:a.thread,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:k,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:i,ts:h,type_:a.type});case d("WAMsgType").MSG_TYPE.CIPHERTEXT:return{ack:d("MAWAckLevel.re").ACK.clock,chatId:a.thread,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:k,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:i,ts:h,type_:a.type};case d("WAMsgType").MSG_TYPE.UNAVAILABLE:case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},e,{ack:d("MAWAckLevel.re").ACK.clock,chatId:a.thread,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:k,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:i,ts:h,type_:a.type});case d("WAMsgType").MSG_TYPE.ICDC_ALERT:return{ack:a.ack,adminContent:[a.msgContent.authorName],adminType:a.msgContent.adminType,chatId:a.thread,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:k,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:i,ts:h,type_:a.type};case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return{ack:a.ack,adminContent:a.msgContent.adminMsgContent,adminType:a.msgContent.adminType,chatId:a.thread,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:k,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:i,ts:h,type_:a.type};case d("WAMsgType").MSG_TYPE.REVOKED:return{ack:a.ack,chatId:a.thread,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:k,isForwarded:f,msgId:a.msgId,offlineMsg:b,originalTs:a.originalTs,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:i,ts:h,type_:a.type};case d("WAMsgType").MSG_TYPE.XMA:return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,ephemeralDurationInSec:(l=a.ephemeralSetting)==null?void 0:l.ephemeralExpirationInSec,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:k,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:i,ts:h,type_:a.type});default:return c("WAAssertUnreachable")(a.type)}}function l(a){var b,c=a.ts;switch(a.type){case d("WAMsgType").MSG_TYPE.REVOKED:c=(b=a.originalTs)!=null?b:a.ts;break;default:c=d("MAWDbMsg").getCanonicalTsFromMsg(a)}return{msgId:a.msgId,threadId:a.thread,ts:c}}function m(a,b){b=b.map(l);return{messages:b,threadId:a}}function n(a,b){return{mediaId:b,msgId:a.msgId,threadId:a.thread}}function o(a,b){return{msgId:a.msgId,threadId:a.thread,xmaId:b}}function p(a){a=a.map(function(a){var b,c=a.messageExpirationTs;b=(b=a.ephemeralSetting)==null?void 0:b.ephemeralExpirationInSec;if(c==null||b==null)return;var e=d("WATimeUtils").cappedMillisecondsUntil(c);if(e<=0){d("WALogger").ERROR(i());return}b=b*1e3;e>b&&(e=b);return{chatId:a.thread,countdownTs:c,millisecondsUntilCountdownTs:e,msgId:a.msgId,ts:d("MAWDbMsg").getCanonicalTsFromMsg(a)}}).filter(Boolean);return{msgs:a}}function q(a,b){return{countdownTs:b,msgId:a}}function r(a,b,e){var f,g=b.msgIds.filter(function(b){return d("MAWDbMsg").getThreadIdFromMsgId(b)===a});switch(b.mediaType){case"Image":return{duration:null,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:g,previewHeight:(f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailHeight,previewHeightLarge:(f=b.validatedImageInfo)==null?void 0:f.height,previewWidth:(f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailWidth,previewWidthLarge:(f=b.validatedImageInfo)==null?void 0:f.width,threadId:a,ts:b.ts};case"Video":return{duration:((f=b.validatedVideoInfo)==null?void 0:f.duration)!=null?((f=b.validatedVideoInfo)==null?void 0:f.duration)*1e3:0,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:g,previewHeight:(f=b.validatedVideoInfo)==null?void 0:f.jpegThumbnailHeight,previewHeightLarge:(f=b.validatedVideoInfo)==null?void 0:f.height,previewWidth:(f=b.validatedVideoInfo)==null?void 0:f.jpegThumbnailWidth,previewWidthLarge:(f=b.validatedVideoInfo)==null?void 0:f.width,threadId:a,ts:b.ts};case"Ptt":return{duration:((f=b.validatedAudioInfo)==null?void 0:f.duration)?b.validatedAudioInfo.duration*1e3:null,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:g,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,threadId:a,ts:b.ts};case"Gif":return{duration:null,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:b.msgIds,previewHeight:(f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailHeight,previewHeightLarge:(g=b.validatedImageInfo)==null?void 0:g.height,previewWidth:(f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailWidth,previewWidthLarge:(g=b.validatedImageInfo)==null?void 0:g.width,threadId:a,ts:b.ts};case"Sticker":f=d("MAWImageUtils").boundHeightWidth((f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailHeight,(g=b.validatedImageInfo)==null?void 0:g.jpegThumbnailWidth,128);g=f.height;f=f.width;return{duration:null,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:b.msgIds,previewHeight:g,previewHeightLarge:g,previewWidth:f,previewWidthLarge:f,threadId:a,ts:b.ts};default:return c("WAAssertUnreachable")(b.mediaType)}}function s(a){if(a==null)return void 0;switch(a){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function t(a,b,c){var e;b!=null&&b.mediaType!==d("MAWDbMedia").IMAGE&&d("WALogger").WARN(h(),b.mediaType);return{ctas:c.ctas,defaultCTA:c.defaultCTA,defaultPreviewMediaId:c.defaultPreviewMediaId,duration:null,faviconMediaId:c.faviconMediaId,filesize:b==null?void 0:b.size,headerMediaId:c.headerMediaId,maxSubtitleNumOfLines:c.maxSubtitleNumOfLines,maxTitleNumOfLines:c.maxTitleNumOfLines,mediaType:b==null?void 0:b.mediaType,msgId:c.msgId,overlayIconGlyph:c.overlayIconGlyph,playableUrlMimeType:s(b==null?void 0:b.mediaType),previewHeight:b==null?void 0:(e=b.validatedImageInfo)==null?void 0:e.jpegThumbnailHeight,previewHeightLarge:b==null?void 0:(e=b.validatedImageInfo)==null?void 0:e.height,previewUrlMimeType:s(b==null?void 0:b.mediaType),previewWidth:b==null?void 0:(e=b.validatedImageInfo)==null?void 0:e.jpegThumbnailWidth,previewWidthLarge:b==null?void 0:(e=b.validatedImageInfo)==null?void 0:e.width,subtitleText:c.subtitleText,targetId:c.targetId,targetType:c.targetType,targetUsername:c.targetUsername,threadId:a,titleText:c.titleText,ts:b==null?void 0:b.ts,xmaId:c.xmaId,xmaLayoutType:c.xmaLayoutType}}function u(a,b,c){return{hasMoreBefore:c,minMsgRowId:b,threadId:a}}function v(a,b,c,e,f){return{deliveredWatermarkTs:c||d("WATimeUtils").castToUnixTime(0),fbid:b,lastReadActionTs:f||d("WATimeUtils").castToUnixTime(0),lastReadWatermarkTs:e||d("WATimeUtils").castToUnixTime(0),threadId:a}}function w(a){var b=a.cannotReplyReason,c=a.folder,d=a.muteExpireTimeMs,e=a.snippetParams,f=a.snippetSenderContactId,g=a.snippetType;a=a.threadId;return{cannotReplyReason:b,folder:c,muteExpireTimeMs:d,snippetParams:e,snippetSenderContactId:f,snippetType:g,threadId:a}}function x(a){return{threadId:a.threadId,threadName:a.name}}function y(a,b,c,e,f,g,h,i){return{isCurrentDeviceSendingMsg:i,isDualSend:b,lastActivityTs:c,lastReadTs:e||d("WATimeUtils").castToUnixTime(0),snippetParams:g,snippetSenderContactId:h,snippetType:f,threadId:a}}function z(a,b,c){return{lastActivityTimestampMs:c,lastReadWatermarkTs:b,threadId:a}}function A(a,b,c,e){b=b;return{rangeExtensionType:b.length===0?d("MAWBridgeTypes.re").makeNoMsg():c?d("MAWBridgeTypes.re").makeInitialRange({hasMoreBefore:e,maxMsgId:b[0].msgId,minMsgId:b[b.length-1].msgId,minMsgTs:d("MAWDbMsg").getSortOrderWithFallback(b[b.length-1])}):d("MAWBridgeTypes.re").makeExtendBefore({hasMoreBefore:e,minMsgId:b[b.length-1].msgId,minMsgTs:d("MAWDbMsg").getSortOrderWithFallback(b[b.length-1])}),threadId:a}}function B(a){var b=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId,c=a.author,e=a.chatId,f=a.reaction,g=a.reactToMsgId;a=a.ts;return{actorId:d("WAJids").authorToUserId(c,b),messageId:g,reaction:f,threadId:e,ts:a}}function C(a){var b=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId,c=a.author,e=a.chatId;a=a.reactToMsgId;return{actorId:d("WAJids").authorToUserId(c,b),messageId:a,threadId:e}}function D(a){return{creationTs:a.creationTs,creator:a.creator,groupJid:a.groupJid,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion,threadId:a.threadId}}function E(a){return{fbid:d("WAJids").extractUserId(a.contactJid)}}function F(a,b,c){b=d("WAJids").switchOnMsgrChatJidType(b,{group:function(a){return"Group"},user:function(a){return"User"}});return{ack:a.ack,externalId:a.externalId,isDS:!1,openMessageOtid:c,threadType:b,ts:a.ts,type_:a.type}}function G(a,b){return{event:b,externalIds:a}}function H(a,b,c){return{senderId:d("WAJids").extractUserId(b),state:c,threadId:a}}function I(a,b,c,d,e){return{actionType:e,echoDocument:d,messageId:a,sortOrderMs:c,threadId:b}}function J(a,b,c,d,e,f){return{actionType:f,echoDocument:e,folderType:b,threadId:a,transportKey:c,ts:d}}function K(a,b,c,d,e){return{deliveryObjectId:a,mediaType:b,messageId:c,productType:d,threadId:e}}function L(a,b,c,d,e,f,g){return{backupEntFbid:b,deliveryObjectId:a,mediaType:g,messageId:d,productType:f,sortOrder:c,threadId:e}}function M(a,b,c){return{numMessages:a,oldestTs:c,threadJid:b}}Object.keys(d("MAWBridgeTypes.re")).forEach(function(a){if(a==="default"||a==="__esModule")return;g[a]=d("MAWBridgeTypes.re")[a]});g.createBridgeThread=a;g.createBridgeParticipant=b;g.createBridgeRemovedParticipant=e;g.createBridgeUpdateE2EEMetadataParticipants=f;g.createBridgeMsg=k;g.createBridgeDeletedMessage=l;g.createBridgeDeleteMessages=m;g.createBridgeMediaExpired=n;g.createBridgeXMAShareExpired=o;g.createBridgeMsgsStartCountdown=p;g.createBridgeMsgClearCountdown=q;g.createBridgeMedia=r;g.createBridgeXMA=t;g.createBridgeMediaRange=u;g.createBridgeReceivedReceipt=v;g.createBridgeUpdatedThread=w;g.createBridgeUpdatedGroupInfo=x;g.createBridgeBumpedThread=y;g.createBridgeThreadTimestampsUpdated=z;g.createBridgeMsgsLoadedInfo=A;g.createBridgeUpsertReaction=B;g.createBridgeDeleteReaction=C;g.createBridgeGroupInfo=D;g.createBridgeContact=E;g.createBridgeStartTraceData=F;g.createBridgeUpdateTraceData=G;g.createBridgeReceivedChatState=H;g.createBridgeUploadMessage=I;g.createBridgeUploadThread=J;g.createBridgeUploadAttachment=K;g.createBridgeResignAttachmentCDNUrl=L;g.createBridgeRestoreMessageBatch=M},98);
__d("MAWBackendBridge.re",["MAWBackendBridge.bs"],function(a,b,c,d,e,f){var g={"-7":0,"-6":1,"-5":2,"-4":3,"-3":4,"-2":5,"-1":6,0:7,1:8,2:9,3:10,4:11};a=function(a){a=b("MAWBackendBridge.bs").bridgeMsg({ts:a.ts,isDualSend:a.isDualSend,chatId:a.chatId,rowId:a.rowId,msgId:a.msgId,sender:a.sender,isAdminMessage:a.isAdminMessage,content:a.content,ack:g[a.ack],type_:a.type_,adminType:a.adminType,adminContent:a.adminContent,offlineMsg:a.offlineMsg,isAuthorMe:a.isAuthorMe,isForwarded:a.isForwarded,originalTs:a.originalTs,replySnippet:a.replySnippet,replyMessageText:a.replyMessageText,replySourceId:a.replySourceId,replyToUserId:a.replyToUserId,replySourceTimestampMs:a.replySourceTimestampMs,replyStatusType:a.replyStatusType,replyMediaExpirationTimestampMs:a.replyMediaExpirationTimestampMs,replyMediaId:a.replyMediaId,replyMediaPreviewWidth:a.replyMediaPreviewWidth,replyMediaPreviewHeight:a.replyMediaPreviewHeight,replyMediaUrlMimeType:a.replyMediaUrlMimeType,replyMediaUrlFallback:a.replyMediaUrlFallback,replyCtaId:a.replyCtaId,replyCtaTitle:a.replyCtaTitle,replySenderIsMe:a.replySenderIsMe,ephemeralDurationInSec:a.ephemeralDurationInSec,sortOrderMs:a.sortOrderMs,specialTextSize:a.specialTextSize,isStoryReply:a.isStoryReply,replyXMAId:a.replyXMAId});return a};f.bridgeMsg=a;d=(c=b("MAWBackendBridge.bs")).bridgeGroupInfo;f.bridgeGroupInfo=d;e=c.bridgeContact;f.bridgeContact=e;a=c.bridgeParticipant;f.bridgeParticipant=a;d=c.getThreadJidByChatId;f.getThreadJidByChatId=d;e=c.getProtocolMsgIdByMsgId;f.getProtocolMsgIdByMsgId=e;a=c.getProtocolMsgIdByMediaMsgId;f.getProtocolMsgIdByMediaMsgId=a;d=c.getAllThreadsAsJson;f.getAllThreadsAsJson=d;e=c.getEphemeralSettings;f.getEphemeralSettings=e;a=c.setEphemeralSettingsFromFrontend;f.setEphemeralSettingsFromFrontend=a;d=c.getDualSendFileByFileType;f.getDualSendFileByFileType=d;e=c.insertAdminMessageInCutoverThreads;f.insertAdminMessageInCutoverThreads=e;a=c.fetchExistingThreadForContact;f.fetchExistingThreadForContact=a},null);
__d("WATweetnacl",["tweetnacl.dist"],function(a,b,c,d,e,f){"use strict";Object.keys(importNamespace("tweetnacl.dist")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("tweetnacl.dist")[a]})},null);
__d("WAJobDefinitions",["WAHex"],function(a,b,c,d,e,f,g){"use strict";var h="msgr";a=function(){return{deleteThread:function(a){return{type:"deleteThread",args:{chatId:a}}},generateAndUploadPreKeys:function(){return{type:"generateAndUploadPreKeys",args:{},uniqKey:"generateAndUploadPreKeys"}},getDevices:function(a,b){b===void 0&&(b=!1);return{type:"getDevices",args:{users:a,ignoreDhash:b}}},getCurrentUserDeviceList:function(){return{type:"getCurrentUserDeviceList",args:void 0}},removeDevice:function(a,b){return{type:"removeDevice",args:{deviceId:a,identity:b}}},removeCurrentDevice:function(){return{type:"removeCurrentDevice",args:{}}},notifyDeviceChange:function(a){return{type:"notifyDeviceChange",args:{users:a},uniqKey:"notifyDeviceChange"}},markThreadAsRead:function(a,b){return{type:"markThreadAsRead",args:{chatJid:a,upTo:b},uniqKey:b==null?void 0:b.externalId}},requestPreKeyDigest:function(){return{type:"requestPreKeyDigest",args:{}}},rotateSignedPreKey:function(){return{type:"rotateSignedPreKey",args:{},uniqKey:"rotateSignedPreKey"}},sendPushNotificationSetup:function(a,b,c){return{type:"sendPushNotificationSetup",args:{appId:a,deviceId:b,platform:c},uniqKey:"sendPushNotificationSetup"}},sendXMAShareMsg:function(a,b,c,e,f,g,h,i,j){return{type:"sendXMAShareMsg",args:{chatJid:a,previewFile:b,headerFile:c,faviconFile:e,associatedMsgContent:f,args:g,xmaMsgKey:(a=h)!=null?a:d("WAHex").randomHex(7),associatedMsgContentKey:(b=i)!=null?b:d("WAHex").randomHex(7),xmaArgs:j}}},sendMediaMsg:function(a,b,c,e,f,g,h,i,j,k,l,m,n,o){return{type:"sendMediaMsg",args:{chatJid:a,file:b,args:{openMessageOtid:m,height:f,width:e,jpegThumbnail:c,jpegThumbnailHeight:h,jpegThumbnailWidth:g,duration:i,isPtt:j,ephemeralSetting:k,quote:l,isForwarded:n},key:o!=null?o:d("WAHex").randomHex(7)}}},sendMsg:function(a,b,c){return{type:"sendMsg",args:{chatJid:a,args:b,key:c!=null?c:d("WAHex").randomHex(7)}}},sendReactionMsg:function(a,b,c,e,f){return{type:"sendReactionMsg",args:{chatJid:a,args:{reactToProtocolMsgId:b,reactToAuthor:c,reaction:e,groupingKey:""},key:f!=null?f:d("WAHex").randomHex(7)}}},forwardMsg:function(a,b,c,e){return{type:"forwardMsg",args:{chatJid:a,protocolMsgId:b,ephemeralSetting:c,key:e!=null?e:d("WAHex").randomHex(7)}}},sendWrittenMsg:function(a,b){b===void 0&&(b="message");return{type:"sendWrittenMsg",args:{protocolMsgId:a,type:b}}},handleFutureproofMsg:function(){return{type:"handleFutureproofMsg",args:{}}},createGroup:function(a,b,c,d){return{type:"createGroup",args:{key:null,subject:a,users:b,extras:c!=null?{platform:h,clientThreadKey:c}:null},uniqKey:(a=d)!=null?a:void 0}},queryGroups:function(a){var b;a==null?b={type:"all"}:b={type:"single",group:a};return{type:"queryGroups",args:b}},leaveGroups:function(a){return{type:"leaveGroups",args:{groups:a}}},addGroupParticipants:function(a,b){return{type:"addGroupParticipants",args:{group:a,users:b}}},removeGroupParticipants:function(a,b){return{type:"removeGroupParticipants",args:{group:a,users:b}}},deleteGroups:function(a){return{type:"deleteGroups",args:{groups:a}}},downloadAndHandleMedia:function(a,b){return{type:"downloadAndHandleMedia",args:{protocolMsgId:a,hash:b}}},requestReuploadMedia:function(a,b){return{type:"requestReuploadMedia",args:{protocolMsgId:a,hash:b}}},reuploadMedia:function(a,b,c,d,e){return{type:"reuploadMedia",args:{externalId:a,encProto:d,encIv:e,receiver:b,chatJid:c}}},syncAbProps:function(a){return{type:"syncAbProps",args:{sendHash:a}}},promoteGroupParticipants:function(a,b){return{type:"promoteGroupParticipants",args:{group:a,users:b}}},demoteGroupParticipants:function(a,b){return{type:"demoteGroupParticipants",args:{group:a,users:b}}},setGroupSubject:function(a,b){return{type:"setGroupSubject",args:{group:a,subject:b}}},revokeMsgs:function(a){return{type:"revokeMsgs",args:{msgIds:a}}},deleteMsgsForMe:function(a){return{type:"deleteMsgsForMe",args:{msgIds:a}}},sendAppData:function(a,b){return{type:"sendAppData",args:{args:a,key:b!=null?b:d("WAHex").randomHex(7)}}},sendWrittenAppData:function(a){return{type:"sendWrittenAppData",args:{appDataExternalId:a}}},resendWrittenAppData:function(a){return{type:"resendWrittenAppData",args:{appDataExternalId:a}}},getSpams:function(){return{type:"getSpams",args:void 0}},computeAndUploadICDCInfo:function(){return{type:"computeAndUploadICDCInfo",args:void 0}},handleSpamMsg:function(){return{type:"handleSpamMsg",args:void 0}},uploadRetroactiveThreadsAndMessages:function(){return{type:"uploadRetroactiveThreadsAndMessages",args:void 0}},restoreMessagesFromEncryptedBackups:function(a,b,c,d,e){return{type:"restoreMessagesFromEncryptedBackups",args:{transportKey:a,threadId:b,messages:c,hasMoreBefore:d,hasMoreAfter:e}}},restoreThreadsFromEncryptedBackups:function(a,b){return{type:"restoreThreadsFromEncryptedBackups",args:{transportKey:a,threads:b}}},sendEphemeralSettingMsg:function(a,b,c){return{type:"sendEphemeralSettingMsg",args:{chatJid:a,args:b,key:c!=null?c:d("WAHex").randomHex(7)}}},updateBackupEntFbidForMedia:function(a,b){return{type:"updateBackupEntFbidForMedia",args:{deliveryObjectId:a,backupEntFbid:b}}},backupMessageWithMedia:function(a,b){return{type:"backupMessageWithMedia",args:{deliveryObjectId:a,backupEntFbid:b}}},downloadAndRestoreMedia:function(a,b){return{type:"downloadAndRestoreMedia",args:{deliveryObjectId:a,restorationCdnUrl:b}}},sendGroupInviteMsg:function(a,b){return{type:"sendGroupInviteMsg",args:{args:a,key:b!=null?b:d("WAHex").randomHex(7)}}}}};b=a();g.createJobSerializers=a;g.jobSerializers=b},98);
__d("WAOdsEnums",["$InternalEnum"],function(a,b,c,d,e,f){a=b("$InternalEnum")({MSG_ENCRYPTION:"armadillo_message_encryption",MSG_DECRYPTION:"armadillo_message_decryption",WA_CONNECTIVITY:"armadillo_wa_connectivity",GET_DEVICES:"armadillo_get_devices",PHASH_MISMATCH:"phash_mismatch",WEB_PLACEHOLDER:"armadillo_web_placeholder",PREKEY_UPLOAD:"armadillo_prekey_upload",PREKEY_DIGEST:"armadillo_prekey_digest",C2C_META_SYNC:"armadillo_c2c_meta_sync",ADMIN_MESSAGE:"armadillo_admin_message",PREVIEW_SNIPPET:"armadillo_snippet",GROUP_CREATE:"armadillo_group_create",GROUP_DELETE:"armadillo_group_delete",GROUP_ADD_PARTICIPANT:"armadillo_group_add_participant",GROUP_PROMOTE_PARTICIPANT:"armadillo_group_promote_participant",GROUP_DEMOTE_PARTICIPANT:"armadillo_group_demote_participant",GROUP_REMOVE_PARTICIPANT:"armadillo_group_remove_participant",GROUP_LEAVE_PARTICIPANT:"armadillo_group_leave_participant",SEND_READ_RECEIPTS:"armadillo_send_read_receipts",MESSAGE_MISSING_THREAD_JID:"MESSAGE_MISSING_THREAD_JID",MESSAGE_MISSING:"MESSAGE_MISSING"});f.Entity=a},66);
__d("WABinary",["WAHex"],(function(a,b,c,d,e,f,g){var h=65533,i=10,j=new Uint8Array(i),k=new Uint8Array(0);a=(function(){function a(b,c){var d=this;b===void 0&&(b=k);c===void 0&&(c=!1);this.write=function(){for(var b=0;b<arguments.length;b++){var c=b<0||arguments.length<=b?void 0:arguments[b];typeof c==="string"?d.writeString(c):typeof c==="number"?d.writeUint8(c):c instanceof a?d.writeBinary(c):c instanceof ArrayBuffer?d.writeBuffer(c):c instanceof Uint8Array&&d.writeByteArray(c)}};b instanceof ArrayBuffer?(this.$1=new Uint8Array(b),this.$2=this.$4=b.byteLength):b instanceof Uint8Array&&(this.$1=b,this.$2=this.$4=b.length);this.$5=0;this.$6=this.$3=0;this.$7=null;this.$8=c;this.$9=0;this.$10=0}var b=a.prototype;b.size=function(){return this.$2-this.$3};b.peek=function(a,b){this.$9++;var c=this.$3,d=this.$5;try{return a(this,b)}finally{this.$9--,this.$3=c-(this.$5-d)}};b.advance=function(a){this.$11(a)};b.readWithViewParser=function(a,b,c,d){return b(this.$12(),this.$11(a),a,c,d)};b.readWithBytesParser=function(a,b,c,d){return b(this.$1,this.$11(a),a,c,d)};b.readUint8=function(){return p(this,1,r,!1)};b.readInt8=function(){return p(this,1,r,!0)};b.readUint16=function(a){a===void 0&&(a=this.$8);return p(this,2,s,a)};b.readInt32=function(a){a===void 0&&(a=this.$8);return p(this,4,t,a)};b.readUint32=function(a){a===void 0&&(a=this.$8);return p(this,4,u,a)};b.readInt64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,U,a)};b.readUint64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,V,a)};b.readLong=function(a,b){b===void 0&&(b=this.$8);return p(this,8,v,a,b)};b.readFloat32=function(a){a===void 0&&(a=this.$8);return p(this,4,w,a)};b.readFloat64=function(a){a===void 0&&(a=this.$8);return p(this,8,x,a)};b.readVarInt=(function(a){var b=this.size();b=q(this,0,y,b);return q(this,b,z,a)});b.readBuffer=function(a){a===void 0&&(a=this.size());return a===0?new ArrayBuffer(0):q(this,a,A)};b.readByteArray=function(a){a===void 0&&(a=this.size());return a===0?new Uint8Array(0):q(this,a,B)};b.readBinary=function(b,c){b===void 0&&(b=this.size());c===void 0&&(c=this.$8);if(b===0)return new a(void 0,c);b=q(this,b,B);return new a(b,c)};b.indexOf=function(a){if(a.length===0)return 0;var b=this.$1,c=this.$2,d=this.$3,e=0,f=d;for(var g=d;g<c;g++)if(b[g]===a[e]){e===0&&(f=g);e++;if(e===a.byteLength)return g-d-a.byteLength+1}else e>0&&(e=0,g=f);return-1};b.readString=function(a){return q(this,a,C)};b.ensureCapacity=function(a){this.$13(this.$3+a)};b.ensureAdditionalCapacity=function(a){this.$13(this.$4+a)};b.writeToView=function(a,b,c,d){var e=this.$14(a);return b(this.$12(),e,a,c,d)};b.writeToBytes=(function(a,b,c,d){var e=this.$14(a);return b(this.$1,e,a,c,d)});b.writeUint8=function(a){S(a,0,256,"uint8"),E(this,1,F,a,!1)};b.writeInt8=function(a){S(a,-128,128,"signed int8"),E(this,1,F,a,!0)};b.writeUint16=function(a,b){b===void 0&&(b=this.$8),S(a,0,65536,"uint16"),D(this,2,G,a,b)};b.writeInt16=function(a,b){b===void 0&&(b=this.$8),S(a,-32768,32768,"signed int16"),D(this,2,H,a,b)};b.writeUint32=function(a,b){b===void 0&&(b=this.$8),S(a,0,4294967296,"uint32"),D(this,4,I,a,b)};b.writeInt32=function(a,b){b===void 0&&(b=this.$8),S(a,-2147483648,2147483648,"signed int32"),D(this,4,J,a,b)};b.writeUint64=function(a,b){b===void 0&&(b=this.$8),S(a,0,18446744073709552e3,"uint64"),D(this,8,K,a,b)};b.writeInt64=function(a,b){b===void 0&&(b=this.$8),S(a,-9223372036854776e3,9223372036854776e3,"signed int64"),D(this,8,K,a,b)};b.writeFloat32=function(a,b){b===void 0&&(b=this.$8),D(this,4,L,a,b)};b.writeFloat64=function(a,b){b===void 0&&(b=this.$8),D(this,8,M,a,b)};b.writeVarInt=function(a){S(a,-9223372036854776e3,9223372036854776e3,"varint (signed int64)");var b=a<0;a=b?-a:a;var c=Math.floor(a/4294967296);a=a-c*4294967296;b&&(c=~c,a===0?c++:a=-a);b=R(c,a);E(this,b,N,c,a)};b.writeVarIntFromHexLong=function(a){var b=d("WAHex").hexLongIsNegative(a);a=b?d("WAHex").negateHexLong(a):a;a=d("WAHex").hexLongToHex(a);var c=0,e=0;for(var f=0;f<d("WAHex").NUM_HEX_IN_LONG;f++)c=c<<4|e>>>28,e=e<<4|d("WAHex").hexAt(a,f);b&&(c=~c,e===0?c++:e=-e);a=R(c,e);E(this,a,N,c,e)};b.writeBinary=function(a){a=a.peek(function(a){return a.readByteArray()});if(a.length){var b=this.$14(a.length);this.$1.set(a,b)}};b.writeBuffer=function(a){this.writeByteArray(new Uint8Array(a))};b.writeByteArray=function(a){var b=this.$14(a.length);this.$1.set(a,b)};b.writeBufferView=function(a){this.writeByteArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))};b.writeString=function(a){E(this,n(a),O,a)};b.writeHexLong=function(a,b){b===void 0&&(b=this.$8),D(this,8,P,a,b)};b.writeBytes=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=0;d<b.length;d++)S(b[d],0,256,"byte");E(this,b.length,Q,b)};b.writeAtomically=function(a,b){this.$10++;var c=this.$4,d=this.$5;try{a=a(this,b);c=this.$4;d=this.$5;return a}finally{this.$10--,this.$4=c-(this.$5-d)}};b.writeWithVarIntLength=(function(a,b){var c=this.$4;a=this.writeAtomically(a,b);b=this.$4;this.writeVarInt(b-c);var d=this.$4-b,e=this.$1;for(var f=0;f<d;f++)j[f]=e[b+f];for(var f=b-1;f>=c;f--)e[f+d]=e[f];for(var b=0;b<d;b++)e[c+b]=j[b];return a});a.build=function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=0;for(var f=0;f<c.length;f++){var g=c[f];typeof g==="string"?e+=n(g):typeof g==="number"?e++:g instanceof a?e+=g.size():g instanceof ArrayBuffer?e+=g.byteLength:g instanceof Uint8Array&&(e+=g.length)}var h=new a();h.ensureCapacity(e);h.write.apply(h,arguments);return h};b.$12=function(){return this.$7||(this.$7=new DataView(this.$1.buffer,this.$1.byteOffset))};b.$11=function(a){if(a<0)throw new Error("ReadError: given negative number of bytes to read");var b=this.$3;a=b+a;if(a>this.$2)throw new Error(b===this.$2?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");this.$3=a;this.$9||(this.$6=a);return b};b.$13=function(a){var b=this.$1;if(a<=b.length)return a;else{var c=this.$6;a=a-c;var d=Math.max(a,2*(b.length-c),64);d=new Uint8Array(d);c?(d.set(b.subarray(c)),this.$5+=c,this.$3-=c,this.$2-=c,this.$4-=c,this.$6=0):d.set(b);this.$1=d;this.$7=null;return a}};b.$14=function(a){a=this.$13(this.$4+a);var b=this.$4;this.$4=a;this.$10||(this.$2=a);return b};return a})();var l="",m=0;function n(a){if(a===l)return m;var b=a.length,c=0;for(var d=0;d<b;d++){var e=a.charCodeAt(d);if(e<128)c++;else if(e<2048)c+=2;else if(e<55296||57344<=e&&e<=65535)c+=3;else if(55296<=e&&e<56320&&d+1!==b){e=a.charCodeAt(d+1);56320<=e&&e<57344?(d++,c+=4):c+=3}else c+=3}l=a;return m=c}function o(a,b,c){var d=b>>21;if(!a)return d===0;else{a=b&2097151;b=Boolean(a||c);return d===0||d===-1&&b}}function p(a,b,c,d,e){return a.readWithViewParser(b,c,d,e)}function q(a,b,c,d,e){return a.readWithBytesParser(b,c,d,e)}function r(a,b,c,d){return d?a.getInt8(b):a.getUint8(b)}function s(a,b,c,d){return a.getUint16(b,d)}function t(a,b,c,d){return a.getInt32(b,d)}function u(a,b,c,d){return a.getUint32(b,d)}function v(a,b,c,d,e){c=a.getInt32(e?b+4:b,e);a=a.getInt32(e?b:b+4,e);return d(c,a)}function w(a,b,c,d){return a.getFloat32(b,d)}function x(a,b,c,d){return a.getFloat64(b,d)}function y(a,b,c,d){c=Math.min(d,i);d=0;var e=128;while(d<c&&e&128)e=a[b+d++];if(d===i&&e>1)throw new Error("ParseError: varint exceeds 64 bits");else if(e&128)return d+1;return d}function z(b,c,d,a){var e=0,f=0,g=d;d===i&&(g--,f=b[c+g]&1);for(var d=g-1;d>=0;d--)e=e<<7|f>>>25,f=f<<7|b[c+d]&127;return a(e,f)}function A(a,b,c){b=b+a.byteOffset;a=a.buffer;return b===0&&c===a.byteLength?a:a.slice(b,b+c)}function B(a,b,c){return a.subarray(b,b+c)}function C(a,b,c){c=b+c;var d=[],e=null;for(var b=b;b<c;b++){d.length>5e3&&(e||(e=[]),e.push(String.fromCharCode.apply(String,d)),d=[]);var f=a[b]|0;if((f&128)===0)d.push(f);else if((f&224)===192){var g=W(a,b+1,c);if(g){b++;g=(f&31)<<6|g&63;g>=128?d.push(g):d.push(h)}else d.push(h)}else if((f&240)===224){g=W(a,b+1,c);var i=W(a,b+2,c);if(g&&i){b+=2;i=(f&15)<<12|(g&63)<<6|i&63;i>=2048&&!(55296<=i&&i<57344)?d.push(i):d.push(h)}else g?(b++,d.push(h)):d.push(h)}else if((f&248)===240){i=W(a,b+1,c);g=W(a,b+2,c);var j=W(a,b+3,c);if(i&&g&&j){b+=3;f=(f&7)<<18|(i&63)<<12|(g&63)<<6|j&63;if(f>=65536&&f<=1114111){j=f-65536;d.push(55296|j>>10,56320|j&1023)}else d.push(h)}else i&&g?(b+=2,d.push(h)):i?(b++,d.push(h)):d.push(h)}else d.push(h)}f=String.fromCharCode.apply(String,d);if(e){e.push(f);return e.join("")}else return f}function D(a,b,c,d,e){return a.writeToView(b,c,d,e)}function E(a,b,c,d,e){return a.writeToBytes(b,c,d,e)}function F(a,b,c,d){a[b]=d}function G(a,b,c,d,e){a.setUint16(b,d,e)}function H(a,b,c,d,e){a.setInt16(b,d,e)}function I(a,b,c,d,e){a.setUint32(b,d,e)}function J(a,b,c,d,e){a.setInt32(b,d,e)}function K(a,b,c,d,e){c=d<0;d=c?-d:d;var f=Math.floor(d/4294967296);d=d-f*4294967296;c&&(f=~f,d===0?f++:d=-d);a.setUint32(e?b+4:b,f,e);a.setUint32(e?b:b+4,d,e)}function L(a,b,c,d,e){a.setFloat32(b,d,e)}function M(a,b,c,d,e){a.setFloat64(b,d,e)}function N(a,b,c,d,e){d=d;e=e;c=b+c-1;for(var b=b;b<c;b++)a[b]=128|e&127,e=d<<25|e>>>7,d>>>=7;a[c]=e}function O(a,b,c,d){c=b;b=d.length;for(var e=0;e<b;e++){var f=d.charCodeAt(e);if(f<128)a[c++]=f;else if(f<2048)a[c++]=192|f>>6,a[c++]=128|f&63;else if(f<55296||57344<=f)a[c++]=224|f>>12,a[c++]=128|f>>6&63,a[c++]=128|f&63;else if(55296<=f&&f<56320&&e+1!==b){var g=d.charCodeAt(e+1);if(56320<=g&&g<57344){e++;f=65536+((f&1023)<<10|g&1023);a[c++]=240|f>>18;a[c++]=128|f>>12&63;a[c++]=128|f>>6&63;a[c++]=128|f&63}else a[c++]=239,a[c++]=191,a[c++]=189}else a[c++]=239,a[c++]=191,a[c++]=189}}function P(a,b,c,e,f){c=d("WAHex").hexLongIsNegative(e);e=d("WAHex").hexLongToHex(e);var g=0,h=0;for(var i=0;i<16;i++)g=g<<4|h>>>28,h=h<<4|d("WAHex").hexAt(e,i);c&&(g=~g,h===0?g++:h=-h);a.setUint32(f?b+4:b,g,f);a.setUint32(f?b:b+4,h,f)}function Q(a,b,c,d){for(var e=0;e<c;e++)a[b+e]=d[e]}function R(a,b){var c;a?(c=5,a=a>>>3):(c=1,a=b>>>7);while(a)c++,a>>>=7;return c}function S(a,b,c,d){if(typeof a!=="number"||a!==a||Math.floor(a)!==a||a<b||a>=c)throw new TypeError(typeof a==="string"?'WriteError: string "'+a+'" is not a valid '+d:"WriteError: "+String(a)+" is not a valid "+d)}function T(a,b,c){var d=o(a,b,c),e;b>=0?e=b:e=a?b:4294967296+b;a=c>=0?c:4294967296+c;b=e*4294967296+a;if(!d)throw new Error("ReadError: integer exceeded 53 bits ("+b+")");return b}function U(a,b){return T(!0,a,b)}function V(a,b){return T(!1,a,b)}function W(a,b,c){if(b>=c)return 0;c=a[b]|0;return(c&192)===128?c:0}g.Binary=a;g.numUtf8Bytes=n;g.longFitsInDouble=o;g.parseInt64OrThrow=U;g.parseUint64OrThrow=V}),98);
__d("WATypedArraysCast",["WABase64"],function(a,b,c,d,e,f,g){function a(a,b){if(b instanceof a)return b;return typeof b==="string"?new a(d("WABase64").decodeB64(b)):new a(b)}g.castTypedArrays=a},98);
__d("WATypedArraysConcat",[],function(a,b,c,d,e,f){function a(a,b){var c=b.reduce(function(a,b){return a+b.length},0),d=new a(c),e=0;b.forEach(function(a){d.set(a,e),e+=a.length});return d}f.concatTypedArrays=a},66);
__d("WACryptoAesCbc",["Promise","WABinary","WATypedArraysCast","WATypedArraysConcat","regeneratorRuntime"],function(a,b,c,d,e,f,g){var h=16,i=1024,j=16;f=1024*1024;var k=h*f;f=function(){function a(a,b,c,d){this.$4=null;this.$6=!1;this.$1=a;this.$2=b;this.$3=c;var e={name:"AES-CBC",iv:d};this.$5=self.crypto.subtle.importKey("raw",c,"AES-CBC",!1,[b]).then(function(a){return{algo:e,key:a}})}var b=a.prototype;b.append=function(a){var b=this;this.$7("append");var c=this.$4;if(c){c.writeByteArray(a);if(c.size()>i){var e=c.size()%h;e=c.readByteArray(c.size()-e);c.size()||(this.$4=null)}else e=null}else if(a.length>i){c=a.length%h;!c?e=a:(this.$4=new(d("WABinary").Binary)(a),e=this.$4.readByteArray(a.length-c))}else this.$4=new(d("WABinary").Binary)(a),e=null;var f=e;f&&(this.$5=this.$5.then(function(a){var c=a.key;a=a.algo;if(b.$2==="encrypt")return self.crypto.subtle.encrypt(a,c,f).then(function(a){b.$1.writeByteArray(new Uint8Array(a,0,a.byteLength-h));return new Uint8Array(a,a.byteLength-2*h,h)});else{var d=f.slice(-h);return self.crypto.subtle.decrypt(a,c,f).then(function(a){b.$1.writeBuffer(a);return d})}}).then(function(a){var c={name:"AES-CBC",iv:a};return self.crypto.subtle.importKey("raw",b.$3,"AES-CBC",!1,[b.$2]).then(function(a){return{algo:c,key:a}})}));return this.$5.then(function(){})};b.finalize=function(a){var b=this;this.$7("finalize");var c;this.$4?(a&&this.$4.writeByteArray(a),c=this.$4.readByteArray(),this.$4=null):a&&(c=a);if(c){var d=c;return this.$5.then(function(a){var c=a.algo;a=a.key;if(b.$2==="encrypt")return self.crypto.subtle.encrypt(c,a,d);else return self.crypto.subtle.decrypt(c,a,d)}).then(function(a){b.$1.writeBuffer(a)})}else return this.$5.then(function(){})};b.$7=function(a){if(this.$6)throw new Error("AesCbcStream."+a+" called after finalize")};return a}();function l(a){return{name:"AES-CBC",iv:d("WATypedArraysCast").castTypedArrays(Uint8Array,a)}}function m(a){return self.crypto.subtle.importKey("raw",d("WATypedArraysCast").castTypedArrays(Uint8Array,a),"AES-CBC",!1,["encrypt"])}function n(a){if(a)return d("WATypedArraysCast").castTypedArrays(Uint8Array,a);a=new Uint8Array(j);self.crypto.getRandomValues(a);return a}function o(a){a=a.byteLength;var b=h-a%h;return Number.isNaN(b)?a:a+b}function p(a,c,e){var f=l(c);return b("Promise").resolve(self.crypto.subtle.importKey("raw",d("WATypedArraysCast").castTypedArrays(Uint8Array,a),"AES-CBC",!1,["decrypt"])).then(function(a){return self.crypto.subtle.decrypt(f,a,e)})}function a(a,c){return b("Promise").resolve().then(function(){var b=c.slice(0,j),d=c.slice(j);return p(a,b,d)})}function c(a,c,e){return b("Promise").resolve().then(function(){var f=n(e),g=l(f);return b("Promise").resolve(m(a)).then(function(a){return self.crypto.subtle.encrypt(g,a,c)}).then(function(a){return d("WATypedArraysConcat").concatTypedArrays(Uint8Array,[f,new Uint8Array(a)]).buffer})})}function e(a,c,d,e){var f,g,i,j,p,q,r,s,t,u;return b("regeneratorRuntime").async(function(v){while(1)switch(v.prev=v.next){case 0:e===void 0&&(e=k);if(!(e%h!==0)){v.next=3;break}throw new Error("chunkSize must be a multiple of "+h+", "+e+" received");case 3:v.next=5;return b("regeneratorRuntime").awrap(m(a));case 5:f=v.sent,g=new Uint8Array(c),i=Math.ceil(g.byteLength/e),j=n(d),p=new Uint8Array(o(g)+j.byteLength),p.set(j),q=function(a,c,d,k){var m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:m=a===i-1;n=a*e;d=g.subarray(n,n+e);o.next=5;return b("regeneratorRuntime").awrap(self.crypto.subtle.encrypt(l(c),f,d).then(function(a){return m?new Uint8Array(a):new Uint8Array(a).subarray(0,-h)}));case 5:k=o.sent,p.set(k,j.byteLength+a*e),c=k.slice(-h),s=c,t=d,u=k;case 11:case"end":return o.stop()}},null,this)},(r=0,s=j);case 13:if(!(r<i)){v.next=19;break}v.next=16;return b("regeneratorRuntime").awrap(q(r,s,t,u));case 16:r++;v.next=13;break;case 19:return v.abrupt("return",p.buffer);case 20:case"end":return v.stop()}},null,this)}g.AesCbcStream=f;g.aesCbcDecrypt=p;g.aesCbcDecryptSplit=a;g.aesCbcEncrypt=c;g.aesCbcEncryptWithChunking=e},98);
__d("WACryptoHmac",["WATypedArraysCast"],function(a,b,c,d,e,f,g){var h=32,i=new Uint8Array(h),j={name:"HMAC",hash:"SHA-256"},k={name:"HMAC",hash:"SHA-512"},l={name:"HMAC",hash:"SHA-1"};function m(a,b){b=d("WATypedArraysCast").castTypedArrays(Uint8Array,b);return self.crypto.subtle.importKey("raw",b,a,!1,["sign"]).then(function(b){return{key:b,algo:a}})}function a(a){return m(j,a)}function n(a,b,c){var d=a.key;a=a.algo;return self.crypto.subtle.sign(a,d,b).then(function(a){return c!=null&&c!==0?a.slice(0,c):a})}function b(a,b){return m(j,a!=null?a:i).then(function(a){return n(a,b)})}function c(a,b,c){return m(j,a).then(function(a){return n(a,b,c)})}function e(a,b,c){return m(k,a).then(function(a){return n(a,b,c)})}function f(a,b,c){return m(l,a).then(function(a){return n(a,b,c)})}g.SHA256_BYTE_LENGTH=h;g.DEFAULT_SALT=i;g.encodeKeySha256=a;g.sign=n;g.extractSha256=b;g.hmacSha256=c;g.hmacSha512=e;g.hmacSha1=f},98);
__d("WACryptoHkdf",["Promise","WABinary","WACryptoHmac"],function(a,b,c,d,e,f,g){var h=255*d("WACryptoHmac").SHA256_BYTE_LENGTH;function i(a,c,e){if(e<0||e>h)return b("Promise").reject(new Error("HKDF::expand given bad length "+e));var f,g=Math.ceil(e/d("WACryptoHmac").SHA256_BYTE_LENGTH),i=d("WABinary").Binary.build(c).readByteArray(),j=new(d("WABinary").Binary)(),k=d("WACryptoHmac").encodeKeySha256(a).then(function(a){f=a;return new Uint8Array(0)});c=function(a){k=k.then(function(b){return d("WACryptoHmac").sign(f,d("WABinary").Binary.build(b,i,a).readByteArray())}).then(function(a){a=new Uint8Array(a);j.writeByteArray(a);return a})};for(var a=1;a<=g;a++)c(a);return k.then(function(){return j.readBuffer(e)})}function a(a,b,c){return d("WACryptoHmac").extractSha256(null,a).then(function(a){return i(new Uint8Array(a),b,c)})}function c(a,b,c,e){return d("WACryptoHmac").extractSha256(b,a).then(function(a){return i(new Uint8Array(a),c,e)})}g.expand=i;g.extractAndExpand=a;g.extractWithSaltAndExpand=c},98);
__d("WAConcurrentIterate",["Promise","regeneratorRuntime"],function(a,b,c,d,e,f){function a(a,c,d){var e=[],f=[],g=0,h=function(){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(g<a)){e.next=8;break}d=g;g++;e.next=5;return b("regeneratorRuntime").awrap(c(d));case 5:f[d]=e.sent;e.next=0;break;case 8:case"end":return e.stop()}},null,this)};d=Math.min(a,d);for(var i=0;i<d;i++)e.push(h());return b("Promise").all(e).then(function(){return f})}f.concurrentIterate=a},66);
__d("WAMediaCryptoSidecar",["WAConcurrentIterate","WACryptoHmac"],function(a,b,c,d,e,f,g){function a(a){return a==="video"}function b(a){return a}var h=16,i=10,j=64*1024;function c(a,b,c){c===void 0&&(c=1);var e=b.buffer.byteLength;e=Math.ceil((e-h)/j);var f=new Uint8Array(i*e);return d("WAConcurrentIterate").concurrentIterate(e,function(c){var e=c*j,g=e+h+j;e=b.subarray(e,g);return d("WACryptoHmac").sign(a,e).then(function(a){a=new Uint8Array(a,0,i);f.set(a,c*i)})},c).then(function(){return f.buffer})}g.shouldHaveStreamingSidecar=a;g.castToStreamingSidecar=b;g.calculateStreamingSidecar=c},98);
__d("WAMediaCrypto",["Promise","WABase64","WABinary","WACryptoAesCbc","WACryptoHkdf","WACryptoHmac","WACustomError","WAErr","WAMediaCryptoSidecar","WAMediaUtils","regeneratorRuntime"],function(a,b,c,d,e,f,g){"use strict";function h(){var a=new Uint8Array(32);self.crypto.getRandomValues(a);return a.buffer}function a(a){return a}function e(){return h()}function f(a){return a}var i={image:"WhatsApp Image Keys",sticker:"WhatsApp Image Keys",video:"WhatsApp Video Keys",gif:"WhatsApp Video Keys",audio:"WhatsApp Audio Keys",ptt:"WhatsApp Audio Keys"},j=d("WACustomError").customError("HmacValidationError",!1);function k(a){switch(a){case"image":case"xma-image":return"image";case"sticker":return"sticker";case"video":return"video";case"gif":return"gif";case"audio":return"audio";case"ptt":return"ptt";default:throw c("WAErr")("Unexpected media type with no KEY_SALT")}}function l(a,b){b=i[k(b)];return d("WACryptoHkdf").extractAndExpand(new Uint8Array(a),b,112).then(function(a){return{iv:new Uint8Array(a,0,16),cipherKey:new Uint8Array(a,16,32),hmacKey:new Uint8Array(a,48,32),refKey:new Uint8Array(a,80,32)}})}var m=16,n=16,o=10,p=64*1024;function q(a,c,e,f,g){var h,i,j,k,l,q,r,s,t,u,v,w,x,y,z;return b("regeneratorRuntime").async(function(A){while(1)switch(A.prev=A.next){case 0:h=new(d("WABinary").Binary)(),h.ensureCapacity(n+f.size+m+o),h.writeByteArray(c),i=new(d("WACryptoAesCbc").AesCbcStream)(h,"encrypt",a,c),j=0,k=j+p;case 6:if(!(k<f.size)){A.next=17;break}l=f.slice(j,k);A.next=10;return b("regeneratorRuntime").awrap(d("WAMediaUtils").blobToArrayBuffer(l));case 10:q=A.sent;A.next=13;return b("regeneratorRuntime").awrap(i.append(new Uint8Array(q)));case 13:j=k;k+=p;A.next=6;break;case 17:A.next=19;return b("regeneratorRuntime").awrap(d("WAMediaUtils").blobToArrayBuffer(f.slice(j)));case 19:r=A.sent;A.next=22;return b("regeneratorRuntime").awrap(i.finalize(new Uint8Array(r)));case 22:s=h.peek(function(a){return a.readByteArray()});A.next=25;return b("regeneratorRuntime").awrap(d("WACryptoHmac").encodeKeySha256(e));case 25:t=A.sent;A.next=28;return b("regeneratorRuntime").awrap(d("WACryptoHmac").sign(t,s));case 28:u=A.sent;h.writeByteArray(new Uint8Array(u,0,o));v=h.readByteArray();w=v.subarray(n);A.next=34;return b("regeneratorRuntime").awrap(b("Promise").all([self.crypto.subtle.digest("SHA-256",w),d("WAMediaCryptoSidecar").shouldHaveStreamingSidecar(g)?d("WAMediaCryptoSidecar").calculateStreamingSidecar(t,v):void 0]));case 34:x=A.sent;y=x[0];z=x[1];return A.abrupt("return",{ciphertext:w,ciphertextHash:y,sidecar:z});case 38:case"end":return A.stop()}},null,this)}function r(a,c,e,f,g){var h,i,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:if(10<=g.length&&g.length<=32){n.next=2;break}throw new j("Bad hmac size "+g.length);case 2:h=d("WABinary").Binary.build(c,e).readByteArray();n.next=5;return b("regeneratorRuntime").awrap(d("WACryptoHmac").hmacSha256(f,h).then(function(a){return new Uint8Array(a)}));case 5:i=n.sent;k=i.slice(0,g.length);if(s(k,g)){n.next=9;break}throw new j("hmacAndDecrypt hmac mismatch");case 9:n.next=11;return b("regeneratorRuntime").awrap(d("WACryptoAesCbc").aesCbcDecrypt(a,c,e));case 11:l=n.sent;n.next=14;return b("regeneratorRuntime").awrap(self.crypto.subtle.digest("SHA-256",l));case 14:m=n.sent;return n.abrupt("return",{plaintextHash:d("WABase64").encodeB64UrlSafe(new Uint8Array(m)),plaintext:l});case 16:case"end":return n.stop()}},null,this)}function s(a,b){if(a.length!==b.length)return!1;var c=1,d=a.length;for(var e=0;e<d;e++)c&=a[e]===b[e]?1:0;return c!==0}g.createMediaKey=h;g.castToMediaKey=a;g.createUploadToken=e;g.castToUploadToken=f;g.HmacValidationError=j;g.computeMediaKeys=l;g.HMAC_LENGTH=o;g.encryptAndHmac=q;g.hmacAndDecrypt=r},98);
__d("WALongInt",["WAHex","WALogger"],function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"]);j=function(){return a};return a}function k(a){if(typeof a!=="number"){d("WALogger").LOG(j(),a).color("red");throw new Error("numberOrThrowIfTooLarge is given a non-safe integer")}return a}e=function(a){return a==null?a:k(a)};function a(a,b){if(typeof a==="number"&&typeof b==="number")return a>b;a=typeof a==="number"?d("WAHex").hexLongFromNumber(a):a;b=typeof b==="number"?d("WAHex").hexLongFromNumber(b):b;return d("WAHex").isBiggerHexLong(a,b)}function b(a){if(typeof a==="number")return a.toString(10);var b=d("WAHex").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d("WAHex").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e/10|0}g=c.reverse().join("");return d("WAHex").hexLongIsNegative(a)?"-"+g:g}function c(a){if(!/^-?\d+$/.test(a)){d("WALogger").LOG(i(),a).color("red");throw new Error("decimalStringToLongInt is given an invalid decimal string")}var b=a[0]==="-",c=a.replace(/^-?0*/,""),e=c.length;if(e<16||e===16&&c<="9007199254740991")return b?-Number(c):Number(c);if(e>20||e===20&&c>"18446744073709551615"||b&&(e>19||e===19&&c>"9223372036854775807")){d("WALogger").LOG(h(),a).color("red");throw new Error("decimalStringToHexLong is given value over 64 bits")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a/4294967296),a=a%4294967296;return d("WAHex").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=e;g.isBiggerLongInt=a;g.longIntToDecimalString=b;g.decimalStringToLongInt=c},98);
__d("WAMediaEntryData.pb",["WAProtoConst"],function(a,b,c,d,e,f,g){a={};a.internalSpec={fileSha256:[1,d("WAProtoConst").TYPES.BYTES],mediaKey:[2,d("WAProtoConst").TYPES.BYTES],fileEncSha256:[3,d("WAProtoConst").TYPES.BYTES],directPath:[4,d("WAProtoConst").TYPES.STRING],mediaKeyTimestamp:[5,d("WAProtoConst").TYPES.INT64],serverMediaType:[6,d("WAProtoConst").TYPES.STRING],uploadToken:[7,d("WAProtoConst").TYPES.BYTES],validatedTimestamp:[8,d("WAProtoConst").TYPES.BYTES],sidecar:[9,d("WAProtoConst").TYPES.BYTES],objectId:[10,d("WAProtoConst").TYPES.STRING],fbid:[11,d("WAProtoConst").TYPES.STRING]};g.MediaEntrySpec=a},98);
__d("WAServerMediaType",[],function(a,b,c,d,e,f){b=["image","sticker","ptt","audio","document","video","gif","ppic","md-app-state","md-msg-hist","kyc-id","template","thumbnail-image","thumbnail-video","thumbnail-gif","thumbnail-document","thumbnail-link","payment-bg-image","novi-video","novi-image","product","product-catalog-image","xma-image","biz-cover-photo"];function a(a){switch(a){case"image":case"sticker":case"ptt":case"audio":case"document":case"video":case"gif":case"ppic":case"md-app-state":case"md-msg-hist":case"kyc-id":case"thumbnail-image":case"thumbnail-video":case"thumbnail-gif":case"thumbnail-document":case"thumbnail-link":case"payment-bg-image":case"novi-video":case"novi-image":case"template":case"product":case"product-catalog-image":case"xma-image":case"biz-cover-photo":return a;default:return null}}f.SERVER_MEDIA=b;f.castToServerMediaType=a},66);
__d("WAHasProperty",[],function(a,b,c,d,e,f){function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f["default"]=a},66);
__d("WAProtoCompile",["WAProtoConst"],function(a,b,c,d,e,f,g){var h=function(a,b,c,d,e,f,g,h,i){this.names=a,this.fields=b,this.types=c,this.defaults=d,this.meta=e,this.oneofToFields=f,this.fieldToOneof=g,this.reservedTags=h?h.reduce(function(a,b){a[b]=!0;return a},{}):{},this.reservedFields=i?i.reduce(function(a,b){a[b]=!0;return a},{}):{}};function a(a){if(a.internalCompiledSpec)return a.internalCompiledSpec;var b=a.internalSpec;if(!b)throw new Error("Message Class "+String(a)+" does not have internalSpec");var c=a.internalDefaults||{},e=Object.keys(b).filter(function(a){return a!==d("WAProtoConst").KEYS.ONEOF}),f=new Array(e.length),g=[],j=[],k=new Array(e.length),l=b[d("WAProtoConst").KEYS.ONEOF]||{};e.sort(function(a,c){a=i(b,a);c=i(b,c);return a[0]-c[0]});for(var m=0;m<e.length;m++){var n=e[m],o=i(b,n);k[m]=c[n];n=o[1];var p=o[0];g.push(p);j.push(n);if((n&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE)f[m]=o[2];else if((n&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.ENUM){p=o[2];if(typeof p.cast==="function")f[m]=p;else{n=!0;o=0;for(var q in p)n&&q!==o++&&(n=!1);q=void 0;if(n){q=[];for(var n=0;n<o;n++)q.push(!0)}else{q={};for(var n in p)q[p[n]]=!0}f[m]=q}}else f[m]=null}var r={};o=function(a){l[a].forEach(function(b){r[b]||(r[b]=[]),r[b].push(a)})};for(var n in l)o(n);p=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_TAGS];q=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_FIELDS];m=new h(e,g,j,k,f,l,r,p,q);a.internalCompiledSpec=m;return m}function i(a,b){a=a[b];if(a==null)throw new Error("fieldData of "+b+" is missing");return a}g.Spec=h;g.compileSpec=a},98);
__d("WAProtoUtils",["WAProtoConst"],function(a,b,c,d,e,f,g){function a(a){if(a&d("WAProtoConst").FLAGS.PACKED)return d("WAProtoConst").ENC.BINARY;a=a&d("WAProtoConst").TYPE_MASK;if(a<=d("WAProtoConst").TYPES.ENUM)return d("WAProtoConst").ENC.VARINT;else if(a<=d("WAProtoConst").TYPES.DOUBLE)return d("WAProtoConst").ENC.BIT64;else if(a<=d("WAProtoConst").TYPES.MESSAGE)return d("WAProtoConst").ENC.BINARY;else return d("WAProtoConst").ENC.BIT32}g.typeToEncType=a},98);
__d("WAProtoValidate",["WAHasProperty","WALogger","WAProtoCompile","WAProtoConst"],function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not an array']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not ',""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is out of range']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid int']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid long']);l=function(){return a};return a}var m=Number.MAX_SAFE_INTEGER;function n(a,b){a=o(a,b);if(a){a.reverse();throw new TypeError("Message missing required value "+a.join("."))}}function a(a,b){n(a,b);b=u(b,a);if(b){b.path.reverse();throw new TypeError("Invalid value at "+b.path.join(".")+": "+b.error)}}function o(a,b){a=d("WAProtoCompile").compileSpec(a);var e=a.names,f=a.types;a=a.meta;var g=void 0;for(var h=0;h<f.length&&!g;h++){var i=f[h],j=e[h],k=c("WAHasProperty")(b,j)?b[j]:void 0;if(i&d("WAProtoConst").FLAGS.REQUIRED&&k==null)g=[j];else if((i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&i&d("WAProtoConst").FLAGS.REPEATED&&k!=null){var l=a[h],m=void 0;for(m=0;m<k.length&&!g;m++)g=o(l,k[m]);g&&g.push(j+"["+m+"]")}else(i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&k!=null&&(g=o(a[h],k),g&&g.push(j))}return g}function p(a,b,c){if(typeof a==="string")if(/^-?0x[0-9a-f]{16}$/i.test(a))return!1;else{d("WALogger").LOG(l(),s(a)).color("red");return{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}}else return q(a,b,c)}function q(a,b,c){if(typeof a!=="number"||a!==a||Math.floor(a)!==a){d("WALogger").LOG(k(),s(a)).color("red");return{path:[],error:"value must be an int"}}else if(a<b||a>=c){d("WALogger").LOG(j(),s(a)).color("red");return{path:[],error:"value is out of range"}}else return!1}function r(a,b,c){if(a)return void 0;else{d("WALogger").LOG(i(),s(c),b).color("red");return{path:[],error:"value is invalid"}}}function s(a){if(typeof a==="string")return'"'+a+'"';else if(Array.isArray(a))return"["+a.join(", ")+"]";else return""+a}var t=[void 0,function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return q(a,0,4294967296)},function(a){return p(a,0,m+1)},function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="boolean","boolean",a)},function(a,b){return r(typeof a==="number"&&(b[a]||b.cast(a)!==void 0),"in enum",a)},function(a){return p(a,0,m+1)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="number","number",a)},function(a){return r(typeof a==="string","string",a)},function(a){return r(a instanceof ArrayBuffer||a instanceof Uint8Array,"ArrayBuffer or Uint8Array",a)},u,function(a){return q(a,0,4294967296)},function(a){return q(a,-2147483648,2147483648)},function(a){return r(typeof a==="number","number",a)}];function u(a,b){b=d("WAProtoCompile").compileSpec(b);var c=b.names,e=b.fields,f=b.types,g=b.meta,i=b.oneofToFields,j=b.fieldToOneof,k=b.reservedTags,l=b.reservedFields,m=void 0;b=function(b){var n=c[b],o=f[b],p=a[n],q=o&d("WAProtoConst").TYPE_MASK,r=t[q];if(r===void 0)throw new Error("Can not find the validator for type "+q);if(o&(d("WAProtoConst").FLAGS.PACKED|d("WAProtoConst").FLAGS.REPEATED)&&p!=null)if(!Array.isArray(p))d("WALogger").LOG(h(),s(p)).color("red"),m={path:[n],error:"repeated field must be array"};else{q=g[b];for(var o=0;o<p.length&&!m;o++)m=r(p[o],q),m&&m.path.push(n+"["+o+"]")}else if(p!=null){m=r(p,g[b]);m&&m.path.push(n);o=j[n];o&&o.forEach(function(b){var c=i[b].filter(function(a){return a!==n});c.forEach(function(c){typeof a[c]!=="undefined"&&(m={path:[b],error:"oneof has fields '"+n+"' and '"+c+"' set"})})});k[e[b]]&&(m={path:[n],error:"tag "+e[b]+" is reserved"});l[n]&&(m={path:[n],error:"field name is reserved"})}};for(var n=0;n<c.length&&!m;n++)b(n);return m}g.checkRequirements=n;g.checkValid=a},98);
__d("decodeProtobuf",["WABinary","WAHasProperty","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){function a(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function b(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!0);d("WAProtoValidate").checkRequirements(a,b);return b}function e(a){return c("WAHasProperty")(a,"$$unsafeUnknownFields")?a.$$unsafeUnknownFields:null}function h(a,b,c){if(a!==d("WAProtoUtils").typeToEncType(b))throw new Error("FormatError: "+c+" encoded with wire type "+a)}function i(a,b,c){switch(b){case d("WAProtoConst").TYPES.INT32:return j(c,-2147483648,2147483648,a,d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.INT64:return c.readVarInt(k);case d("WAProtoConst").TYPES.UINT32:return j(c,0,4294967296,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.UINT64:return c.readVarInt(l);case d("WAProtoConst").TYPES.SINT32:b=j(c,0,4294967296,a,d("WABinary").parseInt64OrThrow);return b&1?~(b>>>1):b>>>1;case d("WAProtoConst").TYPES.SINT64:return c.readVarInt(m);case d("WAProtoConst").TYPES.BOOL:return!!j(c,0,2,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.ENUM:return c.readVarInt(d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.FIXED64:return c.readLong(l,!0);case d("WAProtoConst").TYPES.SFIXED64:return c.readLong(k,!0);case d("WAProtoConst").TYPES.DOUBLE:return c.readFloat64(!0);case d("WAProtoConst").TYPES.STRING:return c.readString(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.BYTES:return c.readBuffer(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.FIXED32:return c.readUint32(!0);case d("WAProtoConst").TYPES.SFIXED32:return c.readInt32(!0);case d("WAProtoConst").TYPES.FLOAT:return c.readFloat32(!0)}}function j(a,b,c,d,e){a=a.readVarInt(e);if(a<b||a>=c)throw new Error("FormatError: "+d+" encoded with out-of-range value "+a);return a}function k(a,b){var c=d("WABinary").longFitsInDouble(!0,a,b);if(c){c=o(b);return a*4294967296+c}else{c=a<0;var e;c?e=b===0?-a:~a:e=a;a=c?-b:b;return d("WAHex").createHexLongFrom32Bits(e,a,c)}}function l(a,b){var c=d("WABinary").longFitsInDouble(!1,a,b);if(c){c=o(a);var e=o(b);return c*4294967296+e}else return d("WAHex").createHexLongFrom32Bits(a,b)}function m(a,b){var c=a>>>1;a=a<<31|b>>>1;b&1&&(c=~c,a=~a);return k(c,a)}function n(a,b,c,e){var f=d("WAProtoCompile").compileSpec(a),g=f.names,k=f.fields,l=f.types,m=f.meta,o=f.oneofToFields,p=f.fieldToOneof,q=f.reservedTags,r=f.reservedFields;f=a.internalDefaults;var s=c||babelHelpers["extends"]({},f)||{};s.$$unknownFieldCount=(a=c==null?void 0:c.$$unknownFieldCount)!=null?a:0;for(var f=0;f<g.length;f++)l[f]&d("WAProtoConst").FLAGS.REPEATED&&(s[g[f]]=[]);var t=0;c=k[0];while(b.size()){a=j(b,0,4294967296,"field and enc type",d("WABinary").parseInt64OrThrow);var u=a&7,v=a>>>3;if(v!==c){f=t;do++t===k.length&&(t=0),c=k[t];while(v!==c&&t!==f)}if(v===c)(function(){var a=g[t],c=l[t];h(u,c,a);var f=c&d("WAProtoConst").TYPE_MASK,j=m[t];if(c&d("WAProtoConst").FLAGS.PACKED){var k=b.readVarInt(d("WABinary").parseUint64OrThrow);k=b.readBinary(k);while(k.size()){var w=i(a,f,k);(f!==d("WAProtoConst").TYPES.ENUM||j[w]||(j.cast==null?void 0:j.cast(w))!==void 0)&&s[a].push(w)}}else if(f===d("WAProtoConst").TYPES.MESSAGE){w=b.readVarInt(d("WABinary").parseUint64OrThrow);k=b.readBinary(w);if(c&d("WAProtoConst").FLAGS.REPEATED)s[a].push(n(j,k,void 0,e));else{w=s[a];s[a]=n(j,k,w,e)}}else{k=i(a,f,b);(f!==d("WAProtoConst").TYPES.ENUM||j[k]||(j.cast==null?void 0:j.cast(k))!==void 0)&&(c&d("WAProtoConst").FLAGS.REPEATED?s[a].push(k):s[a]=k)}w=p[a];w&&typeof s[a]!=="undefined"&&w.forEach(function(b){b=o[b].filter(function(b){return b!==a});b.forEach(function(a){delete s[a]})});(q[v]||r[a])&&delete s[a]})();else{s.$$unknownFieldCount++;if(e){s.$$unsafeUnknownFields||(s.$$unsafeUnknownFields={});a=void 0;switch(u){case d("WAProtoConst").ENC.VARINT:a=b.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:a=b.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:a=b.readBinary(b.readVarInt(d("WABinary").parseUint64OrThrow));break;case d("WAProtoConst").ENC.BIT32:a=b.readBinary(4);break}s.$$unsafeUnknownFields[v]=a}else u===d("WAProtoConst").ENC.VARINT?b.readVarInt(d("WABinary").parseInt64OrThrow):u===d("WAProtoConst").ENC.BIT64?b.advance(8):u===d("WAProtoConst").ENC.BINARY?b.advance(b.readVarInt(d("WABinary").parseUint64OrThrow)):u===d("WAProtoConst").ENC.BIT32&&b.advance(4)}}return s}function o(a){return a>=0?a:4294967296+a}g.decodeProtobuf=a;g.decodeProtobufWithUnknowns=b;g.getUnknownFields=e}),98);
__d("encodeProtobuf",["WABinary","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){var h=void 0,i=128;function a(a,b,c){c===void 0&&(c=new(d("WABinary").Binary)());d("WAProtoValidate").checkValid(a,b);o(c,b,a);h=void 0;return c}function b(){return h!==void 0?"Last encoded value for "+h:"No information known"}function c(a,b){a.writeVarInt(b)}function e(a,b){if(typeof b==="number"&&b<4503599627370496&&b>=-4503599627370496)a.writeVarInt(b>=0?2*b:2*-b-1);else{var c=new(d("WABinary").Binary)(),e;typeof b==="number"?(e=b<0,c.writeVarInt(e?-b:b)):(e=d("WAHex").hexLongIsNegative(b),c.writeVarIntFromHexLong(e?d("WAHex").negateHexLong(b):b));b=c.peek(function(){return c.readByteArray()});var f=b.byteLength;if(e){var g=0,h;do h=b[g],b[g]=h&i|(h&127)-1&127,g++;while(b[g-1]===255)}h=e?1:0;for(var g=0;g<f;g++){e=b[g];var j=e&i|(e&63)<<1|h;h=(e&64)>>6;b[g]=j}h===1&&(b[f-1]|=i,c.writeInt8(1));a.writeBinary(c)}}function f(a,b){typeof b==="number"?a.writeVarInt(b):a.writeVarIntFromHexLong(b)}function j(a,b){a.writeVarInt(d("WABinary").numUtf8Bytes(b)),a.writeString(b)}function k(a,b){a.writeVarInt(b.byteLength),a.writeBuffer(b)}function l(a,b,c){a.writeWithVarIntLength((function(a,b){return o(a,b,c)}),b)}var m=[void 0,c,f,c,f,e,e,(function(a,b){a.writeVarInt(b?1:0)}),c,(function(a,b){typeof b==="number"?a.writeUint64(b,!0):a.writeHexLong(b,!0)}),(function(a,b){typeof b==="number"?a.writeInt64(b,!0):a.writeHexLong(b,!0)}),(function(a,b){a.writeFloat64(b,!0)}),j,k,l,(function(a,b){a.writeUint32(b,!0)}),(function(a,b){a.writeInt32(b,!0)}),(function(a,b){a.writeFloat32(b,!0)})];f=function(a){if(a==null)return void 0;function b(b,c){for(var d=0;d<c.length;d++)a(b,c[d])}return function(a,c){a.writeWithVarIntLength(b,c)}};var n=m.map(f);function o(a,b,c){var e=d("WAProtoCompile").compileSpec(c),f=e.names,g=e.fields,i=e.types;e=e.meta;c=c.internalDefaults;for(var j=0;j<f.length;j++){var k=f[j],l=b[k];l==null&&c&&(l=c[k]);if(l!=null){h=k;k=g[j];var o=i[j],p=o&d("WAProtoConst").TYPE_MASK,q=e[j];k=k*8|d("WAProtoUtils").typeToEncType(o);if(o&d("WAProtoConst").FLAGS.PACKED){if(l.length>0){a.writeVarInt(k);var r=n[p];r(a,l,q)}}else if(o&d("WAProtoConst").FLAGS.REPEATED)for(var r=0;r<l.length;r++){a.writeVarInt(k);o=m[p];o(a,l[r],q)}else{a.writeVarInt(k);o=m[p];o(a,l,q)}}}}g.encodeProtobuf=a;g.encodeErrorInfo=b}),98);
__d("WAMediaUtils",["Promise","WABase64","WAErr","WALongInt","WAMediaCrypto","WAMediaCryptoSidecar","WAMediaEntryData.pb","WAServerMediaType","WATimeUtils","decodeProtobuf","encodeProtobuf"],function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WABase64").encodeB64UrlSafe(a)}function e(a){return a}function f(a){return a}function h(a){return a}function i(a){return a}function j(a,b){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,b);b=a.fileSha256;var c=a.mediaKey,e=a.fileEncSha256,f=a.directPath,g=a.mediaKeyTimestamp,h=a.sidecar,i=a.objectId;a=a.fbid;return{fileSha256:b,mediaKey:c,fileEncSha256:e,directPath:f,mediaKeyTimestamp:g==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(g)),sidecar:h&&d("WAMediaCryptoSidecar").castToStreamingSidecar(h),objectId:i,fbid:a}}function k(a,b,c,e,f,g,h,i){a=d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,{fileSha256:a,fileEncSha256:b,mediaKey:c,directPath:e,mediaKeyTimestamp:f,serverMediaType:g,objectId:h,fbid:i});return a.readByteArray()}function l(a){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function m(a){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArray()}function n(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({directPath:b},a)).readByteArray()}function o(a){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a);var b=a.serverMediaType,c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.uploadToken;a=babelHelpers.objectWithoutPropertiesLoose(a,["serverMediaType","mediaKey","mediaKeyTimestamp","uploadToken"]);return babelHelpers["extends"]({},a,{serverMediaType:b==null?null:d("WAServerMediaType").castToServerMediaType(b),mediaKey:c&&d("WAMediaCrypto").castToMediaKey(c),mediaKeyTimestamp:e==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(e)),uploadToken:f&&d("WAMediaCrypto").castToUploadToken(f)})}function p(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(b("Promise"))(function(b,d){var e=new FileReader();e.onload=function(){var a=e.result;a instanceof ArrayBuffer?b(a):d(c("WAErr")("blobToArrayBuffer got error becaues result is not ArrayBuffer"))};e.onerror=function(){d(e.error)};e.readAsArrayBuffer(a)})}function q(a){var b="image/jpeg";switch(a){case"image":b="image/jpeg";break;case"ptt":b="audio/wav";break;case"video":b="video/mp4";break;case"gif":b="image/gif";break;case"sticker":b="image/webp";break;default:throw c("WAErr")("Unsupported server media type: "+a)}return b}g.toPlaintextHash=a;g.stringToPlaintextHash=e;g.toHashedPlaintextHash=f;g.stringToDeliveryObjectId=h;g.stringToBackupEntFbid=i;g.mediaEntryDataToRawData=j;g.rawDataToMediaEntry=k;g.encodeMediaEntryForUpload=l;g.encodeMediaEntryForDownload=m;g.encodeMediaEntryWithUpdatedPath=n;g.decodeMediaEntryData=o;g.blobToArrayBuffer=p;g.getMimeTypeFromServerMediaType=q},98);
__d("WACryptoUtils",["WATweetnacl"],function(a,b,c,d,e,f,g){function a(a,b){return h(new Uint8Array(a),new Uint8Array(b))}function h(a,b){return a.length===0&&b.length===0||d("WATweetnacl").verify(a,b)}function b(a){if(a!==(a|0))throw new Error("bound must be int32");if(a<=0)throw new Error("bound must not be positive");var b=new Int32Array(1),c=-1>>>1;c=a*Math.floor(c/a);var d=-1;while(d===-1){self.crypto.getRandomValues(b);var e=b[0]>>>1;e<c&&(d=e%a)}return d}g.arrayBuffersEqual=a;g.uint8ArraysEqual=h;g.randomNumberLessThan=b},98);
__d("WAFranking",["WACryptoHmac","WACryptoUtils","regeneratorRuntime"],function(a,b,c,d,e,f,g){"use strict";var h=32,i=0;function a(){var a=new Uint8Array(h);self.crypto.getRandomValues(a);return a.buffer}function c(a){return(a=a)!=null?a:i}function e(a,b){return d("WACryptoHmac").hmacSha256(a,b).then(function(a){return new Uint8Array(a)})}function f(a,c,e,f){var g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.t0=f;h.next=h.t0===void 0?3:h.t0===0?3:7;break;case 3:h.next=5;return b("regeneratorRuntime").awrap(d("WACryptoHmac").hmacSha256(c,a));case 5:g=h.sent;return h.abrupt("return",d("WACryptoUtils").uint8ArraysEqual(new Uint8Array(g),e));case 7:return h.abrupt("return",!0);case 8:case"end":return h.stop()}},null,this)}g.createFrankingKey=a;g.getFrankingVersion=c;g.genFrankingTag=e;g.validateFrankingTag=f},98);
__d("WAPREList",["$InternalEnum"],function(a,b,c,d,e,f){a=b("$InternalEnum")({DECRYPT_MESSAGE_FINAL:"decrypt_message_final",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",MEDIA_UPLOAD:"media_upload",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RETRY_RECEIPTS_SENT:"retry_receipts_sent",SAVE_SESSION_RETRIES:"save_session_retries",SAVE_SIGNAL_SESSION_RETRIES:"save_signal_session_retries",SYNCD_FATAL_ERROR:"syncd_fatal_error"});f.PRE_METRIC=a},66);
__d("WAPREMetrics",["WALogger"],function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PRE] "," ends with an error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PRE] "," ends successfully"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PRE] add point "," to ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PRE] start ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]);m=function(){return a};return a}var n=0;function a(){var b=[];function c(a){b.push(a)}function e(){d("WALogger").WARN(m()),b.length=0}function a(a){b.length===0&&d("WALogger").ERROR(l()),b.forEach(function(b){b(a)})}return{subscribe:c,notify:a,clear:e}}c=a();var o=c.notify;e=c.clear;f=c.subscribe;function b(a,b){n++;var c=n;o({name:a,stage:"START",instanceKey:c,annotations:b});d("WALogger").DEV(k(),a);return{addPoint:function(e,b){o({name:a,stage:"POINT",reason:e,instanceKey:c,annotations:b}),d("WALogger").DEV(j(),e,a)},endSuccess:function(b){o({name:a,stage:"SUCCESS",instanceKey:c,annotations:b}),d("WALogger").DEV(i(),a)},endFail:function(e,b){o({name:a,stage:"FAIL",reason:e,instanceKey:c,annotations:b}),d("WALogger").DEV(h(),a,e)}}}g.clear=e;g.subscribe=f;g.startMetric=b},98);
__d("WAOfflineQueueStats",["WALogger","WAPREList","WAPREMetrics","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["OfflineStats::"," called before startOfflineStats or after completion"]);h=function(){return a};return a}[50,100,200,400,600,800,1e3];var i=null;function a(a){if(i)return;i=new m(a)}function b(){var a;return(a=(a=j("completeOfflineStats"))==null?void 0:a.getStartTime())!=null?a:0}function c(a){var b=j("completeOfflineStats");if(b==null)return;b.complete(a);a=b.stats();i=null;return a}function j(a){if(i)return i;else{d("WALogger").LOG(h(),a);return null}}function e(){var a;(a=i)==null?void 0:a.measureDbStart()}function f(){var a;(a=i)==null?void 0:a.measureDbEnd()}function k(){var a;(a=i)==null?void 0:a.measureCryptoStart()}function l(){var a;(a=i)==null?void 0:a.measureCryptoEnd()}var m=(function(){function a(a){this.$1=[],this.$3=0,this.$5=0,this.$6=0,this.$7=0,this.$8=0,this.$9=0,this.$4=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.OFFLINE_QUEUE),this.$9=d("WATimeUtils").performanceAbsoluteNow(),this.$2=a}var b=a.prototype;b.complete=function(a){a={"int":babelHelpers["extends"]({},this.$2,{processedStanzasCount:a,dbTiming:this.$8,cryptoTiming:this.$6})};this.$4.endSuccess(a)};b.stats=function(){return{count:this.$2.count,stanzas:this.$2}};b.measureCryptoStart=function(){this.$5=d("WATimeUtils").performanceAbsoluteNow()};b.measureCryptoEnd=function(){this.$6=this.$6+d("WATimeUtils").performanceAbsoluteNow()-this.$5};b.measureDbStart=function(){this.$7=d("WATimeUtils").performanceAbsoluteNow()};b.measureDbEnd=function(){this.$8=this.$8+d("WATimeUtils").performanceAbsoluteNow()-this.$7};b.getStartTime=function(){return this.$9};return a})();g.startOfflineStats=a;g.getStartTime=b;g.completeOfflineStats=c;g.maybeMeasureDBStart=e;g.maybeMeasureDbEnd=f;g.maybeMeasureCryptoStart=k;g.maybeMeasureCryptoEnd=l}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c=a.payload;if(c==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(d("decodeProtobuf").getUnknownFields(a.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};c=c.subProtocol;if(c==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(d("decodeProtobuf").getUnknownFields(c)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:c.futureProof};c=[];b=(b=a.payload)==null?void 0:(b=b.subProtocol)==null?void 0:b.consumerMessage;a=(a=a.payload)==null?void 0:(a=a.subProtocol)==null?void 0:a.armadillo;if(b!=null){if(b.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};c.push({payload:new Uint8Array(b.payload),type:"success",subprotocolType:"consumerMessage"})}if(a!=null){if(a.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};c.push({payload:new Uint8Array(a.payload),type:"success",subprotocolType:"armadillo"})}return c.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+c.length}:c[0]}g.parseMessageApplication=a},98);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],function(a,b,c,d,e,f,g){a={SMALL:1,MEDIUM:2,LARGE:3};b={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5};c={NONE:0,VIDEO:1};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={};e.internalSpec={payload:[1,d("WAProtoConst").TYPES.MESSAGE,f],metadata:[2,d("WAProtoConst").TYPES.MESSAGE,i]};f.internalSpec={content:[1,d("WAProtoConst").TYPES.MESSAGE,l],applicationData:[2,d("WAProtoConst").TYPES.MESSAGE,k],signal:[3,d("WAProtoConst").TYPES.MESSAGE,j],subProtocol:[4,d("WAProtoConst").TYPES.MESSAGE,h],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};h.internalSpec={futureProof:[1,d("WAProtoConst").TYPES.ENUM,d("WACommon.pb").FUTUREPROOFBEHAVIOR]};i.internalSpec={specialTextSize:[1,d("WAProtoConst").TYPES.ENUM,a]};j.internalSpec={};k.internalSpec={revoke:[1,d("WAProtoConst").TYPES.MESSAGE,t],__oneofs__:{applicationContent:["revoke"]}};l.internalSpec={messageText:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],imageMessage:[2,d("WAProtoConst").TYPES.MESSAGE,G],contactMessage:[3,d("WAProtoConst").TYPES.MESSAGE,y],locationMessage:[4,d("WAProtoConst").TYPES.MESSAGE,B],extendedTextMessage:[5,d("WAProtoConst").TYPES.MESSAGE,A],statusTextMessage:[6,d("WAProtoConst").TYPES.MESSAGE,z],documentMessage:[7,d("WAProtoConst").TYPES.MESSAGE,D],audioMessage:[8,d("WAProtoConst").TYPES.MESSAGE,F],videoMessage:[9,d("WAProtoConst").TYPES.MESSAGE,E],contactsArrayMessage:[10,d("WAProtoConst").TYPES.MESSAGE,x],liveLocationMessage:[11,d("WAProtoConst").TYPES.MESSAGE,w],stickerMessage:[12,d("WAProtoConst").TYPES.MESSAGE,C],groupInviteMessage:[13,d("WAProtoConst").TYPES.MESSAGE,v],viewOnceMessage:[14,d("WAProtoConst").TYPES.MESSAGE,u],reactionMessage:[16,d("WAProtoConst").TYPES.MESSAGE,s],pollCreationMessage:[17,d("WAProtoConst").TYPES.MESSAGE,q],pollUpdateMessage:[18,d("WAProtoConst").TYPES.MESSAGE,p],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage"]}};m.internalSpec={pollOption:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,r]};n.internalSpec={selectedOptions:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.BYTES],senderTimestampMs:[2,d("WAProtoConst").TYPES.INT64]};o.internalSpec={encPayload:[1,d("WAProtoConst").TYPES.BYTES],encIv:[2,d("WAProtoConst").TYPES.BYTES]};p.internalSpec={pollCreationMessageKey:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageKeySpec],vote:[2,d("WAProtoConst").TYPES.MESSAGE,o],addOption:[3,d("WAProtoConst").TYPES.MESSAGE,o]};q.internalSpec={encKey:[1,d("WAProtoConst").TYPES.BYTES],name:[2,d("WAProtoConst").TYPES.STRING],options:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,r],selectableOptionsCount:[4,d("WAProtoConst").TYPES.UINT32]};r.internalSpec={optionName:[1,d("WAProtoConst").TYPES.STRING]};s.internalSpec={key:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageKeySpec],text:[2,d("WAProtoConst").TYPES.STRING],groupingKey:[3,d("WAProtoConst").TYPES.STRING],senderTimestampMs:[4,d("WAProtoConst").TYPES.INT64]};t.internalSpec={key:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageKeySpec]};u.internalSpec={imageMessage:[1,d("WAProtoConst").TYPES.MESSAGE,G],videoMessage:[2,d("WAProtoConst").TYPES.MESSAGE,E],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}};v.internalSpec={groupJid:[1,d("WAProtoConst").TYPES.STRING],inviteCode:[2,d("WAProtoConst").TYPES.STRING],inviteExpiration:[3,d("WAProtoConst").TYPES.INT64],groupName:[4,d("WAProtoConst").TYPES.STRING],jpegThumbnail:[5,d("WAProtoConst").TYPES.BYTES],caption:[6,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec]};w.internalSpec={location:[1,d("WAProtoConst").TYPES.MESSAGE,J],accuracyInMeters:[2,d("WAProtoConst").TYPES.UINT32],speedInMps:[3,d("WAProtoConst").TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,d("WAProtoConst").TYPES.UINT32],caption:[5,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],sequenceNumber:[6,d("WAProtoConst").TYPES.INT64],timeOffset:[7,d("WAProtoConst").TYPES.UINT32]};x.internalSpec={displayName:[1,d("WAProtoConst").TYPES.STRING],contacts:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,y]};y.internalSpec={contact:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec]};z.internalSpec={text:[1,d("WAProtoConst").TYPES.MESSAGE,A],textArgb:[6,d("WAProtoConst").TYPES.FIXED32],backgroundArgb:[7,d("WAProtoConst").TYPES.FIXED32],font:[8,d("WAProtoConst").TYPES.ENUM,b]};A.internalSpec={text:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],matchedText:[2,d("WAProtoConst").TYPES.STRING],canonicalUrl:[3,d("WAProtoConst").TYPES.STRING],description:[4,d("WAProtoConst").TYPES.STRING],title:[5,d("WAProtoConst").TYPES.STRING],thumbnail:[6,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],previewType:[7,d("WAProtoConst").TYPES.ENUM,c]};B.internalSpec={location:[1,d("WAProtoConst").TYPES.MESSAGE,J],address:[2,d("WAProtoConst").TYPES.STRING]};C.internalSpec={sticker:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec]};D.internalSpec={document:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec]};E.internalSpec={video:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],caption:[2,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec]};F.internalSpec={audio:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],ptt:[2,d("WAProtoConst").TYPES.BOOL]};G.internalSpec={image:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],caption:[2,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec]};H.internalSpec={polygonVertices:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,I],location:[2,d("WAProtoConst").TYPES.MESSAGE,J],__oneofs__:{action:["location"]}};I.internalSpec={x:[1,d("WAProtoConst").TYPES.DOUBLE],y:[2,d("WAProtoConst").TYPES.DOUBLE]};J.internalSpec={degreesLatitude:[1,d("WAProtoConst").TYPES.DOUBLE],degreesLongitude:[2,d("WAProtoConst").TYPES.DOUBLE],name:[3,d("WAProtoConst").TYPES.STRING]};K.internalSpec={protocol:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec]};g.CONSUMER_APPLICATION_METADATA_SPECIALTEXTSIZE=a;g.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONTTYPE=b;g.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEWTYPE=c;g.ConsumerApplicationSpec=e;g.ConsumerApplication$PayloadSpec=f;g.ConsumerApplication$SubProtocolPayloadSpec=h;g.ConsumerApplication$MetadataSpec=i;g.ConsumerApplication$SignalSpec=j;g.ConsumerApplication$ApplicationDataSpec=k;g.ConsumerApplication$ContentSpec=l;g.ConsumerApplication$PollAddOptionMessageSpec=m;g.ConsumerApplication$PollVoteMessageSpec=n;g.ConsumerApplication$PollEncValueSpec=o;g.ConsumerApplication$PollUpdateMessageSpec=p;g.ConsumerApplication$PollCreationMessageSpec=q;g.ConsumerApplication$OptionSpec=r;g.ConsumerApplication$ReactionMessageSpec=s;g.ConsumerApplication$RevokeMessageSpec=t;g.ConsumerApplication$ViewOnceMessageSpec=u;g.ConsumerApplication$GroupInviteMessageSpec=v;g.ConsumerApplication$LiveLocationMessageSpec=w;g.ConsumerApplication$ContactsArrayMessageSpec=x;g.ConsumerApplication$ContactMessageSpec=y;g.ConsumerApplication$StatusTextMesageSpec=z;g.ConsumerApplication$ExtendedTextMessageSpec=A;g.ConsumerApplication$LocationMessageSpec=B;g.ConsumerApplication$StickerMessageSpec=C;g.ConsumerApplication$DocumentMessageSpec=D;g.ConsumerApplication$VideoMessageSpec=E;g.ConsumerApplication$AudioMessageSpec=F;g.ConsumerApplication$ImageMessageSpec=G;g.ConsumerApplication$InteractiveAnnotationSpec=H;g.ConsumerApplication$PointSpec=I;g.ConsumerApplication$LocationSpec=J;g.ConsumerApplication$MediaPayloadSpec=K},98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],function(a,b,c,d,e,f,g){a={NONE:0,GIPHY:1,TENOR:2};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={};b.internalSpec={integral:[1,d("WAProtoConst").TYPES.MESSAGE,h],ancillary:[2,d("WAProtoConst").TYPES.MESSAGE,c]};c.internalSpec={fileLength:[1,d("WAProtoConst").TYPES.UINT64],mimetype:[2,d("WAProtoConst").TYPES.STRING],thumbnail:[3,d("WAProtoConst").TYPES.MESSAGE,e],objectId:[4,d("WAProtoConst").TYPES.STRING]};e.internalSpec={jpegThumbnail:[1,d("WAProtoConst").TYPES.BYTES],downloadableThumbnail:[2,d("WAProtoConst").TYPES.MESSAGE,f],thumbnailWidth:[3,d("WAProtoConst").TYPES.UINT32],thumbnailHeight:[4,d("WAProtoConst").TYPES.UINT32]};f.internalSpec={fileSha256:[1,d("WAProtoConst").TYPES.BYTES],fileEncSha256:[2,d("WAProtoConst").TYPES.BYTES],directPath:[3,d("WAProtoConst").TYPES.STRING]};h.internalSpec={fileSha256:[1,d("WAProtoConst").TYPES.BYTES],mediaKey:[2,d("WAProtoConst").TYPES.BYTES],fileEncSha256:[3,d("WAProtoConst").TYPES.BYTES],directPath:[4,d("WAProtoConst").TYPES.STRING],mediaKeyTimestamp:[5,d("WAProtoConst").TYPES.INT64]};i.internalSpec={integral:[1,d("WAProtoConst").TYPES.MESSAGE,k],ancillary:[2,d("WAProtoConst").TYPES.MESSAGE,j]};j.internalSpec={height:[1,d("WAProtoConst").TYPES.UINT32],width:[2,d("WAProtoConst").TYPES.UINT32],scansSidecar:[3,d("WAProtoConst").TYPES.BYTES],scanLengths:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.UINT32],midQualityFileSha256:[5,d("WAProtoConst").TYPES.BYTES]};k.internalSpec={transport:[1,d("WAProtoConst").TYPES.MESSAGE,b]};l.internalSpec={integral:[1,d("WAProtoConst").TYPES.MESSAGE,n],ancillary:[2,d("WAProtoConst").TYPES.MESSAGE,m]};m.internalSpec={seconds:[1,d("WAProtoConst").TYPES.UINT32],caption:[2,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],gifPlayback:[3,d("WAProtoConst").TYPES.BOOL],height:[4,d("WAProtoConst").TYPES.UINT32],width:[5,d("WAProtoConst").TYPES.UINT32],sidecar:[6,d("WAProtoConst").TYPES.BYTES],gifAttribution:[7,d("WAProtoConst").TYPES.ENUM,a]};n.internalSpec={transport:[1,d("WAProtoConst").TYPES.MESSAGE,b]};o.internalSpec={integral:[1,d("WAProtoConst").TYPES.MESSAGE,q],ancillary:[2,d("WAProtoConst").TYPES.MESSAGE,p]};p.internalSpec={seconds:[1,d("WAProtoConst").TYPES.UINT32]};q.internalSpec={transport:[1,d("WAProtoConst").TYPES.MESSAGE,b]};r.internalSpec={integral:[1,d("WAProtoConst").TYPES.MESSAGE,t],ancillary:[2,d("WAProtoConst").TYPES.MESSAGE,s]};s.internalSpec={pageCount:[1,d("WAProtoConst").TYPES.UINT32]};t.internalSpec={transport:[1,d("WAProtoConst").TYPES.MESSAGE,b]};u.internalSpec={integral:[1,d("WAProtoConst").TYPES.MESSAGE,w],ancillary:[2,d("WAProtoConst").TYPES.MESSAGE,v]};v.internalSpec={pageCount:[1,d("WAProtoConst").TYPES.UINT32],height:[2,d("WAProtoConst").TYPES.UINT32],width:[3,d("WAProtoConst").TYPES.UINT32],firstFrameLength:[4,d("WAProtoConst").TYPES.UINT32],firstFrameSidecar:[5,d("WAProtoConst").TYPES.BYTES]};w.internalSpec={transport:[1,d("WAProtoConst").TYPES.MESSAGE,b],isAnimated:[2,d("WAProtoConst").TYPES.BOOL]};x.internalSpec={integral:[1,d("WAProtoConst").TYPES.MESSAGE,z],ancillary:[2,d("WAProtoConst").TYPES.MESSAGE,y]};y.internalSpec={displayName:[1,d("WAProtoConst").TYPES.STRING]};z.internalSpec={vcard:[1,d("WAProtoConst").TYPES.STRING],downloadableVcard:[2,d("WAProtoConst").TYPES.MESSAGE,b],__oneofs__:{contact:["vcard","downloadableVcard"]}};g.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=a;g.WAMediaTransportSpec=b;g.WAMediaTransport$AncillarySpec=c;g.WAMediaTransport$Ancillary$ThumbnailSpec=e;g.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=f;g.WAMediaTransport$IntegralSpec=h;g.ImageTransportSpec=i;g.ImageTransport$AncillarySpec=j;g.ImageTransport$IntegralSpec=k;g.VideoTransportSpec=l;g.VideoTransport$AncillarySpec=m;g.VideoTransport$IntegralSpec=n;g.AudioTransportSpec=o;g.AudioTransport$AncillarySpec=p;g.AudioTransport$IntegralSpec=q;g.DocumentTransportSpec=r;g.DocumentTransport$AncillarySpec=s;g.DocumentTransport$IntegralSpec=t;g.StickerTransportSpec=u;g.StickerTransport$AncillarySpec=v;g.StickerTransport$IntegralSpec=w;g.ContactTransportSpec=x;g.ContactTransport$AncillarySpec=y;g.ContactTransport$IntegralSpec=z},98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={};a.internalSpec={payload:[1,d("WAProtoConst").TYPES.MESSAGE,f],metadata:[2,d("WAProtoConst").TYPES.MESSAGE,b]};b.internalSpec={chatEphemeralSetting:[1,d("WAProtoConst").TYPES.MESSAGE,l],ephemeralSettingList:[2,d("WAProtoConst").TYPES.MESSAGE,e],ephemeralSharedSecret:[3,d("WAProtoConst").TYPES.BYTES],forwardingScore:[5,d("WAProtoConst").TYPES.UINT32],isForwarded:[6,d("WAProtoConst").TYPES.BOOL],businessMetadata:[7,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],frankingKey:[8,d("WAProtoConst").TYPES.BYTES],frankingVersion:[9,d("WAProtoConst").TYPES.INT32],quotedMessage:[10,d("WAProtoConst").TYPES.MESSAGE,c],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}};c.internalSpec={stanzaId:[1,d("WAProtoConst").TYPES.STRING],remoteJid:[2,d("WAProtoConst").TYPES.STRING],participant:[3,d("WAProtoConst").TYPES.STRING],payload:[4,d("WAProtoConst").TYPES.MESSAGE,f]};e.internalSpec={chatJid:[1,d("WAProtoConst").TYPES.STRING],ephemeralSetting:[2,d("WAProtoConst").TYPES.MESSAGE,l]};f.internalSpec={coreContent:[1,d("WAProtoConst").TYPES.MESSAGE,k],signal:[2,d("WAProtoConst").TYPES.MESSAGE,j],applicationData:[3,d("WAProtoConst").TYPES.MESSAGE,i],subProtocol:[4,d("WAProtoConst").TYPES.MESSAGE,h],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}};h.internalSpec={futureProof:[1,d("WAProtoConst").TYPES.ENUM,d("WACommon.pb").FUTUREPROOFBEHAVIOR],consumerMessage:[2,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],businessMessage:[3,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],paymentMessage:[4,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],multiDevice:[5,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],voip:[6,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],armadillo:[7,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}};i.internalSpec={};j.internalSpec={};k.internalSpec={};l.internalSpec={ephemeralExpiration:[2,d("WAProtoConst").TYPES.UINT32],ephemeralSettingTimestamp:[3,d("WAProtoConst").TYPES.INT64]};g.MessageApplicationSpec=a;g.MessageApplication$MetadataSpec=b;g.MessageApplication$Metadata$QuotedMessageSpec=c;g.MessageApplication$Metadata$EphemeralSettingMapSpec=e;g.MessageApplication$PayloadSpec=f;g.MessageApplication$SubProtocolPayloadSpec=h;g.MessageApplication$ApplicationDataSpec=i;g.MessageApplication$SignalSpec=j;g.MessageApplication$ContentSpec=k;g.MessageApplication$EphemeralSettingSpec=l},98);
__d("WAStanzaUtils",[],function(a,b,c,d,e,f){"use strict";function a(a){return a}f.toStanzaId=a},66);
__d("WAResultOrError",[],function(a,b,c,d,e,f){function a(a){return{success:!1,error:a}}function b(a){return{success:!0,value:a}}f.makeError=a;f.makeSuccess=b},66);
__d("WASortedLists",[],function(a,b,c,d,e,f){function a(){return[]}function b(){return[]}function c(a,b){return a.filter(b)}function d(a,b){return l(a.map(b))}function e(a,b){var c=a.length===b.length;for(var d=0;c&&d<a.length;d++)a[d]!==b[d]&&(c=!1);return c}function g(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return a;return a.concat([b]).sort()}function h(a,b){if(a.length<b.length)return!1;var c=!0;for(var d=0,e=0;c&&e<b.length;e++)do c=a[d]===b[e];while(!c&&++d<a.length);return c}function i(a,b){var c=[];for(var d=0,e=0;d<a.length;d++){var f=a[d];while(e<b.length&&f>b[e])e++;(e===b.length||f<b[e])&&c.push(f)}return c}function j(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length){var f=a[d],g=b[e];f<g?d++:f===g?(c.push(f),d++,e++):e++}return c}function k(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length)a[d]<b[e]?c.push(a[d++]):a[d]===b[e]?(c.push(a[d++]),e++):c.push(b[e++]);while(d<a.length)c.push(a[d++]);while(e<b.length)c.push(b[e++]);return c}function l(a){return m(a.slice().sort())}function m(a){var b=!1;for(var c=0;c<a.length-1;c++)a[c]===a[c+1]&&(b=!0);if(!b)return a;c=[];for(var b=0;b<a.length-1;b++)a[b]!==a[b+1]&&c.push(a[b]);c.push(a[a.length-1]);return c}function n(a){return Array.from(a).sort()}function o(a){return a.slice().sort()}function p(a,b,c){var d=null;for(var e=0;!d&&e<a.length;e++)a[e]===b&&(d=a.slice(),d[e]=c,d=m(d.sort()));return d||a}function q(a){return[a]}function r(a){return a.length<1}function s(a,b,c){return a.slice(b,c)}f.emptySet=a;f.emptyList=b;f.filter=c;f.map=d;f.areEqual=e;f.addToSet=g;f.contains=h;f.subtract=i;f.intersect=j;f.joinUniq=k;f.sortAndDedupe=l;f.asSortedSet=n;f.sort=o;f.swapIn=p;f.singleElement=q;f.isEmpty=r;f.slice=s},66);
__d("WAExternalIdFromRandomHex",["WAHex","WAStanzaUtils"],function(a,b,c,d,e,f,g){function a(a){a=new Uint8Array(d("WAHex").parseHex(a));var b=new Uint8Array(a.length+1),c=0;for(var e=0;e<a.length;e++)c^=a[e],b[e]=a[e];b[a.length]=c;return d("WAStanzaUtils").toStanzaId(d("WAHex").toHex(b))}g.externalIdFromRandomHex=a},98);
__d("WAMessageKey",["WAErr","WAGlobals","WAJids","WAStanzaUtils"],function(a,b,c,d,e,f,g){"use strict";function h(a){return a===d("WAJids").AUTHOR_ME||a==d("WAGlobals").getMyUserJid()}function a(a,b,e){if(e==null)throw c("WAErr")("messageKey is null");var f=e.id,g=e.remoteJid;if(f==null)throw c("WAErr")("messageKey.id is null");else if(g==null)throw c("WAErr")("messageKey.remoteJid is null");g=d("WAJids").interpretAndValidateJid(g);if(g.jidType==="unknown")throw c("WAErr")("messageKey.remoteJid is invalid");var i,j=d("WAJids").AUTHOR_ME;if(g.jidType==="group"){i=g.groupJid;if(h(b)&&e.fromMe===!0)j=d("WAJids").AUTHOR_ME;else if(e.fromMe==!0)j=b;else{var k=e.participant;if(k==null)throw c("WAErr")("key.participant is null");k=d("WAJids").interpretAndValidateJid(k);if(k.jidType==="msgrUser")j=k.userJid;else throw c("WAErr")("key.participant is invalid")}}else if(g.jidType==="msgrUser"||g.jidType==="msgrDevice"){k=d("WAJids").interpretAndValidateJid(a);if(k.jidType!=="msgrUser")throw c("WAErr")("expected user type jid.");i=k.userJid;h(b)?e.fromMe===!0?j=d("WAJids").AUTHOR_ME:j=k.userJid:e.fromMe===!0&&(j=k.userJid)}else throw c("WAErr")("Unsupported jidtype type");return{chat:i,author:h(j)?d("WAJids").AUTHOR_ME:j,externalId:d("WAStanzaUtils").toStanzaId(f)}}g.extractProtocolMessageId=a},98);
__d("isObject",[],function(a,b,c,d,e,f){function a(a){var b=typeof a;return b==="function"||b==="object"&&!!a}f["default"]=a},66);
/**
 * License: https://www.facebook.com/legal/license/7R_-0_GF-gR/
 */
__d("dexie-3.1.0-alpha.4",[],function(a,b,c,d,e,f){"use strict";var g={},h={exports:g},i;function j(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():typeof i==="function"&&i.amd?i(c):b.Dexie=c()})(this,function(){var b=function(){b=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return b.apply(this,arguments)};function c(){for(var a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(var d=Array(a),e=0,b=0;b<c;b++)for(var f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d}var d=Object.keys,e=Array.isArray,f=typeof self!=="undefined"?self:typeof window!=="undefined"?window:a;typeof Promise!=="undefined"&&!f.Promise&&(f.Promise=Promise);function g(a,b){if(typeof b!=="object")return a;d(b).forEach(function(c){a[c]=b[c]});return a}var h=Object.getPrototypeOf,i={}.hasOwnProperty;function j(a,b){return i.call(a,b)}function k(a,b){typeof b==="function"&&(b=b(h(a))),d(b).forEach(function(c){m(a,c,b[c])})}var l=Object.defineProperty;function m(a,b,c,d){l(a,b,g(c&&j(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function n(a){return{from:function(b){a.prototype=Object.create(b.prototype);m(a.prototype,"constructor",a);return{extend:k.bind(null,a.prototype)}}}}var o=Object.getOwnPropertyDescriptor;function p(a,b){var c=o(a,b);return c||(c=h(a))&&p(c,b)}var q=[].slice;function r(a,b,c){return q.call(a,b,c)}function s(a,b){return b(a)}function t(a){if(!a)throw new Error("Assertion Failed")}function aa(a){f.setImmediate?setImmediate(a):setTimeout(a,0)}function u(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function ba(a,b,c){try{a.apply(null,c)}catch(a){b&&b(a)}}function v(a,b){if(j(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=v(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d===void 0?void 0:v(d,b.substr(f+1))}return void 0}function w(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){t(typeof c!=="string"&&"length"in c);for(var d=0,f=b.length;d<f;++d)w(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){f=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?e(a)&&!isNaN(parseInt(f))?a.splice(f,1):delete a[f]:a[f]=c;else{var g=a[f];g||(g=a[f]={});w(g,d,c)}}else c===void 0?e(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ca(a,b){typeof b==="string"?w(a,b,void 0):"length"in b&&[].map.call(b,function(b){w(a,b,void 0)})}function da(a){var b={};for(var c in a)j(a,c)&&(b[c]=a[c]);return b}var ea=[].concat;function fa(a){return ea.apply([],a)}var x="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(fa([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return f[a]}),ga=x.map(function(a){return f[a]}),ha=u(x,function(a){return[a,!0]});function y(a){if(!a||typeof a!=="object")return a;var b;if(e(a)){b=[];for(var c=0,d=a.length;c<d;++c)b.push(y(a[c]))}else if(ga.indexOf(a.constructor)>=0)b=a;else{b=a.constructor?Object.create(a.constructor.prototype):{};for(var c in a)j(a,c)&&(b[c]=y(a[c]))}return b}var ia={}.toString;function ja(a){return ia.call(a).slice(8,-1)}var ka=function(a,b){return b==="Array"?""+a.map(function(a){return ka(a,ja(a))}):b==="ArrayBuffer"?""+new Uint8Array(a):b==="Date"?a.getTime():ArrayBuffer.isView(a)?""+new Uint8Array(a.buffer):a};function la(a,b,c,e){c=c||{};e=e||"";d(a).forEach(function(d){if(!j(b,d))c[e+d]=void 0;else{var f=a[d],g=b[d];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ja(f),i=ja(g);h===i?ha[h]?ka(f,h)!==ka(g,i)&&(c[e+d]=b[d]):la(f,g,c,e+d+"."):c[e+d]=b[d]}else f!==g&&(c[e+d]=b[d])}});d(b).forEach(function(d){j(a,d)||(c[e+d]=b[d])});return c}var ma=typeof Symbol!=="undefined"&&Symbol.iterator,na=ma?function(a){var b;return a!=null&&(b=a[ma])&&b.apply(a)}:function(){return null},z={};function A(a){var b,c,d,f;if(arguments.length===1){if(e(a))return a.slice();if(this===z&&typeof a==="string")return[a];if(f=na(a)){c=[];while(d=f.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var oa=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},B=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function pa(a,b){B=a,qa=b}var qa=function(){return!0},ra=!new Error("").stack;function C(){if(ra)try{throw new Error()}catch(a){return a}return new Error()}function sa(a,b){var c=a.stack;if(!c)return"";b=b||0;c.indexOf(a.name)===0&&(b+=(a.name+a.message).split("\n").length);return c.split("\n").slice(b).filter(qa).map(function(a){return"\n"+a}).join("")}x=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var D=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];x=x.concat(D);var ta={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function E(a,b){this._e=C(),this.name=a,this.message=b}n(E).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+sa(this._e,2))}},toString:function(){return this.name+": "+this.message}});function ua(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function va(a,b,c,d){this._e=C(),this.failures=b,this.failedKeys=d,this.successCount=c,this.message=ua(a,b)}n(va).from(E);function wa(a,b){this._e=C(),this.name="BulkError",this.failures=b,this.message=ua(a,b)}n(wa).from(E);var xa=x.reduce(function(a,b){return a[b]=b+"Error",a},{}),ya=E,F=x.reduce(function(b,c){var d=c+"Error";function a(a,b){this._e=C(),this.name=d,!a?(this.message=ta[c]||d,this.inner=null):typeof a==="string"?(this.message=""+a+(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message=a.name+" "+a.message,this.inner=a)}n(a).from(ya);b[c]=a;return b},{});F.Syntax=SyntaxError;F.Type=TypeError;F.Range=RangeError;var za=D.reduce(function(a,b){a[b+"Error"]=F[b];return a},{});function Aa(a,b){if(!a||a instanceof E||a instanceof TypeError||a instanceof SyntaxError||!a.name||!za[a.name])return a;b=new za[a.name](b||a.message,a);"stack"in a&&m(b,"stack",{get:function(){return this.inner.stack}});return b}D=x.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=F[b]);return a},{});D.ModifyError=va;D.DexieError=E;D.BulkError=wa;function G(){}function Ba(a){return a}function Ca(a,b){return a==null||a===Ba?b:function(c){return b(a(c))}}function H(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Da(a,b){return a===G?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?H(d,this.onsuccess):d);e&&(this.onerror=this.onerror?H(e,this.onerror):e);return f!==void 0?f:c}}function Ea(a,b){return a===G?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?H(c,this.onsuccess):c);d&&(this.onerror=this.onerror?H(d,this.onerror):d)}}function Fa(a,b){return a===G?b:function(c){var d=a.apply(this,arguments);g(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var h=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?H(e,this.onsuccess):e);f&&(this.onerror=this.onerror?H(f,this.onerror):f);return d===void 0?h===void 0?void 0:h:g(d,h)}}function Ga(a,b){return a===G?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ha(a,b){return a===G?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var Ia={},Ja=100,Ka=20,La=100;x=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,a.__proto__,a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,b.__proto__,a]}();var Ma=x[0],Na=x[1],Oa=x[2],Pa=Na&&Na.then,Qa=Ma&&Ma.constructor,Ra=!!Oa,Sa=!1,Ta=Oa?function(){Oa.then(kb)}:f.setImmediate?setImmediate.bind(null,kb):f.MutationObserver?function(){var a=document.createElement("div");new MutationObserver(function(){kb(),a=null}).observe(a,{attributes:!0});a.setAttribute("i","1")}:function(){setTimeout(kb,0)},Ua=function(a,b){$a.push([a,b]),Wa&&(Ta(),Wa=!1)},Va=!0,Wa=!0,I=[],Xa=[],Ya=null,Za=Ba,J={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Gb,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(a){try{Gb(a[0],a[1])}catch(a){}})}},K=J,$a=[],L=0,ab=[];function M(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=G;this._lib=!1;var b=this._PSD=K;B&&(this._stackHolder=C(),this._prev=null,this._numPrev=0);if(typeof a!=="function"){if(a!==Ia)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&eb(this,this._value);return}this._state=null;this._value=null;++b.ref;db(this,a)}var bb={get:function(){var a=K,b=vb;function c(c,d){var e=this,f=!a.global&&(a!==K||b!==vb),g=f&&!R(),h=new M(function(b,h){gb(e,new cb(Db(c,a,f,g),Db(d,a,f,g),b,h,a))});B&&jb(h,this);return h}c.prototype=Ia;return c},set:function(a){m(this,"then",a&&a.prototype===Ia?bb:{get:function(){return a},set:bb.set})}};k(M.prototype,{then:bb,_then:function(a,b){gb(this,new cb(null,null,a,b,K))},"catch":function(a){if(arguments.length===1)return this.then(null,a);var b=arguments[0],c=arguments[1];return typeof b==="function"?this.then(null,function(a){return a instanceof b?c(a):rb(a)}):this.then(null,function(a){return a&&a.name===b?c(a):rb(a)})},"finally":function(a){return this.then(function(b){a();return b},function(b){a();return rb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Sa=!0;var a=ib(this,[],Ka);a=a.join("\nFrom previous: ");this._state!==null&&(this._stack=a);return a}finally{Sa=!1}}},timeout:function(a,b){var c=this;return a<Infinity?new M(function(d,e){var f=setTimeout(function(){return e(new F.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&m(M.prototype,Symbol.toStringTag,"Dexie.Promise");J.env=Ab();function cb(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}k(M,{all:function(){var a=A.apply(null,arguments).map(xb);return new M(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return M.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof M)return a;if(a&&typeof a.then==="function")return new M(function(b,c){a.then(b,c)});var b=new M(Ia,!0,a);jb(b,Ya);return b},reject:rb,race:function(){var a=A.apply(null,arguments).map(xb);return new M(function(b,c){a.map(function(a){return M.resolve(a).then(b,c)})})},PSD:{get:function(){return K},set:function(a){return K=a}},totalEchoes:{get:function(){return vb}},newPSD:P,usePSD:Bb,scheduler:{get:function(){return Ua},set:function(a){Ua=a}},rejectionMapper:{get:function(){return Za},set:function(a){Za=a}},follow:function(a,b){return new M(function(c,d){return P(function(b,c){var d=K;d.unhandleds=[];d.onunhandled=c;d.finalize=H(function(){var a=this;ob(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});Qa&&(Qa.allSettled&&m(M,"allSettled",function(){var a=A.apply(null,arguments).map(xb);return new M(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return M.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),Qa.any&&typeof AggregateError!=="undefined"&&m(M,"any",function(){var a=A.apply(null,arguments).map(xb);return new M(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return M.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function db(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&lb();b&&typeof b.then==="function"?db(a,function(a,c){b instanceof M?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,fb(a));c&&mb()},eb.bind(null,a))}catch(b){eb(a,b)}}function eb(a,b){Xa.push(b);if(a._state!==null)return;var c=a._lib&&lb();b=Za(b);a._state=!1;a._value=b;B&&b!==null&&typeof b==="object"&&!b._promise&&ba(function(){var c=p(b,"stack");b._promise=a;m(b,"stack",{get:function(){return Sa?c&&(c.get?c.get.apply(b):c.value):a.stack}})});pb(a);fb(a);c&&mb()}function fb(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)gb(a,b[c]);c=a._PSD;--c.ref||c.finalize();L===0&&(++L,Ua(function(){--L===0&&nb()},[]))}function gb(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++L;Ua(hb,[c,a,b])}function hb(a,b,c){try{Ya=b;var d,e=b._value;b._state?d=a(e):(Xa.length&&(Xa=[]),d=a(e),Xa.indexOf(e)===-1&&qb(b));c.resolve(d)}catch(a){c.reject(a)}finally{Ya=null,--L===0&&nb(),--c.psd.ref||c.psd.finalize()}}function ib(a,b,c){if(b.length===c)return b;var d="";if(a._state===!1){var e=a._value,f,g;e!=null?(f=e.name||"Error",g=e.message||e,d=sa(e,0)):(f=e,g="");b.push(f+(g?": "+g:"")+d)}B&&(d=sa(a._stackHolder,2),d&&b.indexOf(d)===-1&&b.push(d),a._prev&&ib(a._prev,b,c));return b}function jb(a,b){var c=b?b._numPrev+1:0;c<Ja&&(a._prev=b,a._numPrev=c)}function kb(){lb()&&mb()}function lb(){var a=Va;Va=!1;Wa=!1;return a}function mb(){var a,b,c;do while($a.length>0){a=$a;$a=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while($a.length>0);Va=!0;Wa=!0}function nb(){var a=I;I=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=ab.slice(0);var b=a.length;while(b)a[--b]()}function ob(a){function b(){a(),ab.splice(ab.indexOf(b),1)}ab.push(b);++L;Ua(function(){--L===0&&nb()},[])}function pb(a){I.some(function(b){return b._value===a._value})||I.push(a)}function qb(a){var b=I.length;while(b)if(I[--b]._value===a._value){I.splice(b,1);return}}function rb(a){return new M(Ia,!1,a)}function N(a,b){var c=K;return function(){var d=lb(),e=K;try{S(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{S(e,!1),d&&mb()}}}var O={awaits:0,echoes:0,id:0},sb=0,tb=[],ub=0,vb=0,wb=0;function P(a,b,c,d){var e=K,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++wb;var h=J.env;f.env=Ra?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject,nthen:Eb(h.nthen,f),gthen:Eb(h.gthen,f)}:{};b&&g(f,b);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};h=Bb(f,a,c,d);f.ref===0&&f.finalize();return h}function Q(){O.id||(O.id=++sb);++O.awaits;O.echoes+=La;return O.id}function R(){if(!O.awaits)return!1;--O.awaits===0&&(O.id=0);O.echoes=O.awaits*La;return!0}(""+Pa).indexOf("[native code]")===-1&&(Q=R=G);function xb(a){if(O.echoes&&a&&a.constructor===Qa){Q();return a.then(function(a){R();return a},function(a){R();return T(a)})}return a}function yb(a){++vb,(!O.echoes||--O.echoes===0)&&(O.echoes=O.id=0),tb.push(K),S(a,!0)}function zb(){var a=tb[tb.length-1];tb.pop();S(a,!1)}function S(a,b){var c=K;(b?O.echoes&&(!ub++||a!==K):ub&&(!--ub||a!==K))&&Cb(b?yb.bind(null,a):zb);if(a===K)return;K=a;c===J&&(J.env=Ab());if(Ra){b=J.env.Promise;var d=a.env;Na.then=d.nthen;b.prototype.then=d.gthen;(c.global||a.global)&&(Object.defineProperty(f,"Promise",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function Ab(){var a=f.Promise;return Ra?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject,nthen:Na.then,gthen:a.prototype.then}:{}}function Bb(a,b,c,d,e){var f=K;try{S(a,!0);return b(c,d,e)}finally{S(f,!1)}}function Cb(a){Pa.call(Ma,a)}function Db(a,b,c,d){return typeof a!=="function"?a:function(){var e=K;c&&Q();S(b,!0);try{return a.apply(this,arguments)}finally{S(e,!1),d&&Cb(R)}}}function Eb(a,b){return function(c,d){return a.call(this,Db(c,b),Db(d,b))}}var Fb="unhandledrejection";function Gb(a,b){var c;try{c=b.onuncatched(a)}catch(a){}if(c!==!1)try{var d;b={promise:b,reason:a};f.document&&document.createEvent?(d=document.createEvent("Event"),d.initEvent(Fb,!0,!0),g(d,b)):f.CustomEvent&&(d=new CustomEvent(Fb,{detail:b}),g(d,b));if(d&&f.dispatchEvent){dispatchEvent(d);if(!f.PromiseRejectionEvent&&f.onunhandledrejection)try{f.onunhandledrejection(d)}catch(a){}}B&&d&&!d.defaultPrevented}catch(a){}}var T=M.reject;function Hb(a,b,c,d){if(!a._state.openComplete&&!K.letThrough){if(!a._state.isBeingOpened){if(!a._options.autoOpen)return T(new F.DatabaseClosed());a.open()["catch"](G)}return a._state.dbReadyPromise.then(function(){return Hb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create()}catch(a){return T(a)}return e._promise(b,function(a,b){return P(function(){K.trans=e;return d(a,b,e)})}).then(function(a){return e._completion.then(function(){return a})})}}x="3.1.0-alpha.4";var Ib=String.fromCharCode(65535),Jb=-Infinity,U="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Kb="String expected.",Lb=[],Mb=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Nb=Mb,Ob=Mb,Pb=function(a){return!/(dexie\.js|dexie\.min\.js)/.test(a)},Qb="__dbnames",Rb="readonly",Sb="readwrite";function V(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Tb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ub(a){return function(b){v(b,a)===void 0&&(b=y(b),ca(b,a));return b}}var Vb=function(){function a(){}a.prototype._trans=function(a,b,c){var d=this._tx||K.trans,e=this.name;function f(c,d,a){if(!a.schema[e])throw new F.NotFound("Table "+e+" not part of transaction");return b(a.idbtrans,a)}var g=lb();try{return d&&d.db===this.db?d===K.trans?d._promise(a,f,c):P(function(){return d._promise(a,f,c)},{trans:d,transless:K.transless||K}):Hb(this.db,a,[this.name],f)}finally{g&&mb()}};a.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(e(a))return new this.db.WhereClause(this,"["+a.join("+")+"]");var b=d(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){return a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})&&a.keyPath.every(function(a){return b.indexOf(a)>=0})})[0];if(c&&this.db._maxKey!==Ib)return this.where(c.name).equals(c.keyPath.map(function(b){return a[b]}));!c&&B&&!1;var f=this.schema.idxByName,g=this.db._deps.indexedDB;function h(a,b){try{return g.cmp(a,b)===0}catch(a){return!1}}var i=b.reduce(function(b,c){var d=b[0];b=b[1];var g=f[c],i=a[c];return[d||g,d||!g?V(b,g&&g.multi?function(a){a=v(a,c);return e(a)&&a.some(function(a){return h(i,a)})}:function(a){return h(i,v(a,c))}):b]},[null,null]),j=i[0];i=i[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(i):c?this.filter(i):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,e(a)?"["+a.join("+")+"]":a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){this.schema.mappedClass=a;var b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(j(b,d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){g(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ub(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?M.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{w(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof b!=="object"||e(b))throw new F.InvalidArgument("Modifications must be an object.");if(typeof a==="object"&&!e(a)){d(b).forEach(function(c){w(a,c,b[c])});var c=v(a,this.schema.primKey.keyPath);return c===void 0?T(new F.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Ub(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?M.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{w(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?M.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Tb})}).then(function(a){return a.numFailures?M.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(a,b,c){var d=this,e=Array.isArray(b)?b:void 0;c=c||(e?void 0:b);var f=c?c.allKeys:void 0;return this._trans("readwrite",function(b){var c=d.schema.primKey,g=c.auto;c=c.keyPath;if(c&&e)throw new F.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==a.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var h=a.length;g=c&&g?a.map(Ub(c)):a;return d.core.mutate({trans:b,type:"add",keys:e,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,e=a.lastResult,g=a.failures;a=f?c:e;if(b===0)return a;throw new wa(d.name+".bulkAdd(): "+b+" of "+h+" operations failed",Object.keys(g).map(function(a){return g[a]}))})})};a.prototype.bulkPut=function(a,b,c){var d=this,e=Array.isArray(b)?b:void 0;c=c||(e?void 0:b);var f=c?c.allKeys:void 0;return this._trans("readwrite",function(b){var c=d.schema.primKey,g=c.auto;c=c.keyPath;if(c&&e)throw new F.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==a.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var h=a.length;g=c&&g?a.map(Ub(c)):a;return d.core.mutate({trans:b,type:"put",keys:e,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,e=a.lastResult,g=a.failures;a=f?c:e;if(b===0)return a;throw new wa(d.name+".bulkPut(): "+b+" of "+h+" operations failed",Object.keys(g).map(function(a){return g[a]}))})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new wa(b.name+".bulkDelete(): "+d+" of "+c+" operations failed",a)})};return a}();function Wb(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=h;for(var f=1,g=arguments.length;f<g;++f)h(arguments[f]);return c;function h(a,d,e){if(typeof a==="object")return i(a);d||(d=Ga);e||(e=G);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){d(a).forEach(function(b){var c=a[b];if(e(c))h(b,a[b][0],a[b][1]);else if(c==="asap")var d=h(b,Ba,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){aa(function(){a.apply(null,b)})})});else throw new F.InvalidArgument("Invalid event config")})}}function Xb(a,b){n(b).from({prototype:a});return b}function Yb(a){return Xb(Vb.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:Wb(null,{creating:[Da,G],reading:[Ca,Ba],updating:[Fa,G],deleting:[Ea,G]})})}function Zb(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function $b(a,b){a.filter=V(a.filter,b)}function ac(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return V(d(),b())}:b;a.justLimit=c&&!d}function bc(a,b){a.isMatch=V(a.isMatch,b)}function cc(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new F.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function dc(a,b,c){var d=cc(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function ec(a,b,c,d){var e=a.replayFilter?V(a.filter,a.replayFilter()):a.filter;if(!a.or)return fc(dc(a,d,c),V(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));j(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),fc(dc(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function fc(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=N(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=G},function(b){a.fail(b),c=G}))&&f(a.value,a,function(a){return c=a});c()})})}var gc=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,T.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,T.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=V(b.algorithm,a)};a.prototype._iterate=function(a,b){return ec(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&g(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return ec(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(Zb(c,!0))return d.count({trans:a,query:{index:cc(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return ec(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&Zb(c,!0)&&c.limit>0){var d=c.valueMapper,e=cc(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return ec(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;Zb(b)?ac(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):ac(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);ac(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){$b(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){$b(this._ctx,function(b){return a(b.value)});bc(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&Zb(b,!0)&&b.limit>0)return this._read(function(a){var c=cc(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};$b(this._ctx,function(a){a=a.primaryKey.toString();var c=j(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(e){var f;if(typeof a==="function")f=a;else{var g=d(a),h=g.length;f=function(b){var c=!1;for(var d=0;d<h;++d){var e=g[d],f=a[e];v(b,e)!==f&&(w(b,e,f),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||2e3,n=b.db.core.cmp,o=[],p=0,q=[],r=function(a,b){var c=b.failures;b=b.numFailures;p+=a-b;for(var a=0,b=d(c);a<b.length;a++){var e=b[a];o.push(c[e])}};return b.clone().primaryKeys().then(function(a){var b=function(c){var d=Math.min(m,a.length-c);return i.getMany({trans:e,keys:a.slice(c,c+d)}).then(function(g){var h=[],j=[],o=k?[]:null,p=[];for(var q=0;q<d;++q){var s=g[q],t={value:y(s),primKey:a[c+q]};f.call(t,t.value,t)!==!1&&(t.value==null?p.push(a[c+q]):!k&&n(l(s),l(t.value))!==0?(p.push(a[c+q]),h.push(t.value)):(j.push(t.value),k&&o.push(a[c+q])))}return Promise.resolve(h.length>0&&i.mutate({trans:e,type:"add",values:h}).then(function(a){for(var b in a.failures)p.splice(parseInt(b),1);r(h.length,a)})).then(function(a){return j.length>0&&i.mutate({trans:e,type:"put",keys:o,values:j}).then(function(a){return r(j.length,a)})}).then(function(){return p.length>0&&i.mutate({trans:e,type:"delete",keys:p}).then(function(a){return r(p.length,a)})}).then(function(){return a.length>c+d&&b(c+m)})})};return b(0).then(function(){if(o.length>0)throw new va("Error modifying one or more objects",o,p,q);return a.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return Zb(a)&&(a.isPrimKey&&!Ob||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new va("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(function(b,a){return a.value=null})};return a}();function hc(a){return Xb(gc.prototype,function(b,c){this.db=a;var d=Tb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Ba?f:null}})}function ic(a,b){return a<b?-1:a===b?0:1}function jc(a,b){return a>b?-1:a===b?0:1}function W(a,b,c){a=a instanceof qc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function kc(a){return new a.Collection(a,function(){return pc("")}).limit(0)}function lc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function mc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function nc(a,b,c,d,e,f){var g=Math.min(a.length,d.length),h=-1;for(var i=0;i<g;++i){var j=b[i];if(j!==d[i]){if(e(a[i],c[i])<0)return a.substr(0,i)+c[i]+c.substr(i+1);if(e(a[i],d[i])<0)return a.substr(0,i)+d[i]+c.substr(i+1);return h>=0?a.substr(0,h)+b[h]+c.substr(h+1):null}e(a[i],j)<0&&(h=i)}if(g<d.length&&f==="next")return a+c.substr(a.length);return g<a.length&&f==="prev"?a.substr(0,c.length):h<0?null:a.substr(0,h)+d[h]+c.substr(h+1)}function oc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return W(a,Kb);function m(a){e=lc(a);f=mc(a);g=a==="next"?ic:jc;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return X(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=nc(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function X(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function pc(a){return{type:1,lower:a,upper:a}}var qc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?kc(this):new this.Collection(this,function(){return X(a,b,!c,!d)})}catch(a){return W(this,U)}};a.prototype.equals=function(a){return a==null?W(this,U):new this.Collection(this,function(){return pc(a)})};a.prototype.above=function(a){return a==null?W(this,U):new this.Collection(this,function(){return X(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?W(this,U):new this.Collection(this,function(){return X(a,void 0,!1)})};a.prototype.below=function(a){return a==null?W(this,U):new this.Collection(this,function(){return X(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?W(this,U):new this.Collection(this,function(){return X(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?W(this,Kb):this.between(a,a+Ib,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):oc(this,function(a,b){return a.indexOf(b[0])===0},[a],Ib)};a.prototype.equalsIgnoreCase=function(a){return oc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=A.apply(z,arguments);return a.length===0?kc(this):oc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=A.apply(z,arguments);return a.length===0?kc(this):oc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,Ib)};a.prototype.anyOf=function(){var a=this,b=A.apply(z,arguments),c=this._cmp;try{b.sort(c)}catch(a){return W(this,U)}if(b.length===0)return kc(this);var d=new this.Collection(this,function(){return X(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Jb,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=A.apply(z,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return W(this,U)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Jb,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(a,b){var c=this,d=this._cmp,e=this._ascending,f=this._descending,g=this._min,h=this._max;if(a.length===0)return kc(this);if(!a.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&e(a[0],a[1])<=0}))return W(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",F.InvalidArgument);var i=!b||b.includeLowers!==!1,j=b&&b.includeUppers===!0;function k(a,b){var c=0,e=a.length;for(;c<e;++c){var f=a[c];if(d(b[0],f[1])<0&&d(b[1],f[0])>0){f[0]=g(f[0],b[0]);f[1]=h(f[1],b[1]);break}}c===e&&a.push(b);return a}var l=e;function m(a,b){return l(a[0],b[0])}var n;try{n=a.reduce(k,[]),n.sort(m)}catch(a){return W(this,U)}var o=0,p=j?function(a){return e(a,n[o][1])>0}:function(a){return e(a,n[o][1])>=0},q=i?function(a){return f(a,n[o][0])>0}:function(a){return f(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;b=new this.Collection(this,function(){return X(n[0][0],n[n.length-1][1],!i,!j)});b._ondirectionchange=function(a){a==="next"?(s=p,l=e):(s=q,l=f),n.sort(m)};b._addAlgorithm(function(a,b,d){var f=a.key;while(s(f)){++o;if(o===n.length){b(d);return!1}}if(r(f))return!0;else if(c._cmp(f,n[o][1])===0||c._cmp(f,n[o][0])===0)return!1;else{b(function(){l===e?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return b};a.prototype.startsWithAnyOf=function(){var a=A.apply(z,arguments);if(!a.every(function(a){return typeof a==="string"}))return W(this,"startsWithAnyOf() only works with strings");return a.length===0?kc(this):this.inAnyRange(a.map(function(a){return[a,a+Ib]}))};return a}();function rc(a){return Xb(qc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};var e=a._deps.indexedDB;if(!e)throw new F.MissingAPI("indexedDB API missing");this._cmp=this._ascending=e.cmp.bind(e);this._descending=function(a,b){return e.cmp(b,a)};this._max=function(a,b){return e.cmp(a,b)>0?a:b};this._min=function(a,b){return e.cmp(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange})}function sc(a){return a.length===1?a[0]:a}function tc(a){try{a.only([[]]);return[[]]}catch(a){return Ib}}function Y(a){return N(function(b){uc(b);a(b.target.error);return!1})}function uc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Z=Wb(null,"txcommitted"),vc=function(){function a(){}a.prototype._lock=function(){t(!K.global);++this._reculock;this._reculock===1&&!K.global&&(K.lockOwnerFor=this);return this};a.prototype._unlock=function(){t(!K.global);if(--this._reculock===0){K.global||(K.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{Bb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&K.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;t(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new F.DatabaseClosed(d);case"MissingAPIError":throw new F.MissingAPI(d.message,d);default:throw new F.OpenFailed(d)}if(!this.active)throw new F.TransactionInactive();t(this._completion._state===null);a=this.idbtrans=a||c.transaction(sc(this.storeNames),this.mode);a.onerror=N(function(c){uc(c),b._reject(a.error)});a.onabort=N(function(c){uc(c),b.active&&b._reject(new F.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=N(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&Z.txcommitted.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return T(new F.ReadOnly("Transaction is readonly"));if(!this.active)return T(new F.TransactionInactive());if(this._locked())return new M(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},K])});else if(c)return P(function(){var a=new M(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new M(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=M.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new M(function(a,d){c.then(function(c){return b._waitingQueue.push(N(a.bind(null,c)))},function(a){return b._waitingQueue.push(N(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&this._reject(new F.Abort()),this.active=!1};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(j(b,a))return b[a];var c=this.schema[a];if(!c)throw new F.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function wc(a){return Xb(vc.prototype,function(b,c,d,e){var f=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.idbtrans=null;this.on=Wb(this,"complete","error","abort");this.parent=e||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new M(function(a,b){f._resolve=a,f._reject=b});this._completion.then(function(){f.active=!1,f.on.complete.fire()},function(a){var b=f.active;f.active=!1;f.on.error.fire(a);f.parent?f.parent._reject(a):b&&f.idbtrans&&f.idbtrans.abort();return T(a)})})}function xc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+yc(b)}}function yc(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function zc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:u(c,function(a){return[a.name,a]})}}function Ac(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return Bc(a);else return function(b){return v(b,a)}}function Bc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return v(b,a)}}function Cc(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}function Dc(a,b,c){return b.type==="add"?Promise.resolve(new Array(b.values.length)):a.getMany({trans:b.trans,keys:c})}function Ec(a){return[].slice.call(a)}var Fc=0;function Gc(a){return a==null?":id":typeof a==="string"?a:"["+a.join("+")+"]"}function Hc(a,b,d,f){b=b.cmp.bind(b);function g(a,b){var c=Ec(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=e(b),f=b==null,g={};f={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:f,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:Ac(b)},indexes:Ec(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,f=b.multiEntry;b=b.keyPath;var a=e(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:f,extractKey:Ac(b)};g[Gc(b)]=c;return c}),getIndexByKeyPath:function(a){return g[Gc(a)]}};g[":id"]=f.primaryKey;b!=null&&(g[Gc(b)]=f.primaryKey);return f})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function h(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=a.lower,c=a.upper,e=a.lowerOpen;a=a.upperOpen;b=b===void 0?c===void 0?null:d.upperBound(c,!!a):c===void 0?d.lowerBound(b,!!e):d.bound(b,c,!!e,!!a);return b}function i(b){var d=b.name;function e(a){var e=a.trans,f=a.type,g=a.keys,i=a.values,j=a.range,k=a.wantResults;return new Promise(function(a,l){a=N(a);l=e.objectStore(d);var m=l.keyPath==null,n=f==="put"||f==="add";if(!n&&f!=="delete"&&f!=="deleteRange")throw new Error("Invalid operation type: "+f);var o=(g||i||{length:1}).length;if(g&&i&&g.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(o===0)return a({numFailures:0,failures:{},results:[],lastResult:void 0});var p=k&&c(g?g:Cc(b.primaryKey,{type:f,keys:g,values:i})),q,r=[],s=0,t=function(a){++s,uc(a),p&&(p[a.target._reqno]=void 0),r[a.target._reqno]=a.target.error},aa=function(a){a=a.target;p[a._reqno]=a.result};if(f==="deleteRange"){if(j.type===4)return a({numFailures:s,failures:r,results:p,lastResult:void 0});j.type===3?q=l.clear():q=l["delete"](h(j))}else{m=n?m?[i,g]:[i,null]:[g,null];var u=m[0];m=m[1];if(n)for(var n=0;n<o;++n)q=m&&m[n]!==void 0?l[f](u[n],m[n]):l[f](u[n]),q._reqno=n,p&&p[n]===void 0&&(q.onsuccess=aa),q.onerror=t;else for(var n=0;n<o;++n)q=l[f](u[n]),q._reqno=n,q.onerror=t}var ba=function(b){b=b.target.result;p&&(p[o-1]=b);a({numFailures:s,failures:r,results:p,lastResult:b})};q.onerror=function(a){t(a),ba(a)};q.onsuccess=ba})}function a(b){var c=b.trans,e=b.values,a=b.query,f=b.reverse,g=b.unique;return new Promise(function(b,i){b=N(b);var j=a.index,k=a.range,l=c.objectStore(d);l=j.isPrimaryKey?l:l.index(j.name);j=f?g?"prevunique":"prev":g?"nextunique":"next";var m=e||!("openKeyCursor"in l)?l.openCursor(h(k),j):l.openKeyCursor(h(k),j);m.onerror=Y(i);m.onsuccess=N(function(a){var d=m.result;if(!d){b(null);return}d.___id=++Fc;d.done=!1;var e=d["continue"].bind(d),f=d.continuePrimaryKey;f&&(f=f.bind(d));var g=d.advance.bind(d);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};d.trans=c;d.stop=d["continue"]=d.continuePrimaryKey=d.advance=a;d.fail=N(i);d.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};d.start=function(a){var b=new Promise(function(a,b){a=N(a),m.onerror=Y(b),d.fail=b,d.stop=function(b){d.stop=d["continue"]=d.continuePrimaryKey=d.advance=h,a(b)}}),c=function(){if(m.result)try{a()}catch(a){d.fail(a)}else d.done=!0,d.start=function(){throw new Error("Cursor behind last entry")},d.stop()};m.onsuccess=N(function(a){m.onsuccess=c,c()});d["continue"]=e;d.continuePrimaryKey=f;d.advance=g;c();return b};b(d)},i)})}function f(a){return function(b){return new Promise(function(e,f){e=N(e);var g=b.trans,i=b.values,j=b.limit,c=b.query,k=j===Infinity?void 0:j,l=c.index;c=c.range;g=g.objectStore(d);g=l.isPrimaryKey?g:g.index(l.name);l=h(c);if(j===0)return e({result:[]});if(a){c=i?g.getAll(l,k):g.getAllKeys(l,k);c.onsuccess=function(a){return e({result:a.target.result})};c.onerror=Y(f)}else{var m=0,n=i||!("openKeyCursor"in g)?g.openCursor(l):g.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return e({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return e({result:o});a["continue"]()};n.onerror=Y(f)}})}}return{name:d,schema:b,mutate:e,getMany:function(a){var b=a.trans,c=a.keys;return new Promise(function(a,e){a=N(a);var f=b.objectStore(d),g=c.length,h=new Array(g),i=0,j=0,k=0,l=function(b){b=b.target;(h[b._pos]=b.result)!=null&&++k;++j===i&&a(h)};e=Y(e);for(var m=0;m<g;++m){var n=c[m];n!=null&&(n=f.get(c[m]),n._pos=m,n.onsuccess=l,n.onerror=e,++i)}i===0&&a(h)})},get:function(a){var b=a.trans,c=a.key;return new Promise(function(a,e){a=N(a);var f=b.objectStore(d);f=f.get(c);f.onsuccess=function(b){return a(b.target.result)};f.onerror=Y(e)})},query:f(j),openCursor:a,count:function(b){var a=b.query,c=b.trans,e=a.index,f=a.range;return new Promise(function(a,b){var g=c.objectStore(d);g=e.isPrimaryKey?g:g.index(e.name);var i=h(f);i=i?g.count(i):g.count();i.onsuccess=N(function(b){return a(b.target.result)});i.onerror=Y(b)})}}}g=g(a,f);f=g.schema;var j=g.hasGetAll;g=f.tables.map(function(a){return i(a)});var k={};g.forEach(function(a){return k[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=k[a];if(!b)throw new Error("Table '"+a+"' not found");return k[a]},cmp:b,MIN_KEY:-Infinity,MAX_KEY:tc(d),schema:f}}function Ic(a,c){return c.reduce(function(a,c){c=c.create;return b(b({},a),c(a))},a)}function Jc(a,b,c,d){var e=c.IDBKeyRange;c=c.indexedDB;b=Ic(Hc(b,c,e,d),a.dbcore);return{dbcore:b}}function Kc(a,b){var c=b.db;c=Jc(a._middlewares,c,a._deps,b);a.core=c.dbcore;a.tables.forEach(function(b){var c=b.name;a.core.schema.tables.some(function(a){return a.name===c})&&(b.core=a.core.table(c),a[c]instanceof a.Table&&(a[c].core=b.core))})}function Lc(a,b,c,d){c.forEach(function(c){var e=d[c];b.forEach(function(b){var d=p(b,c);(!d||"value"in d&&d.value===void 0)&&(b===a.Transaction.prototype||b instanceof a.Transaction?m(b,c,{get:function(){return this.table(c)},set:function(a){l(this,c,{value:a,writable:!0,configurable:!0,enumerable:!0})}}):b[c]=new a.Table(c,e))})})}function Mc(a,b){b.forEach(function(b){for(var c in b)b[c]instanceof a.Table&&delete b[c]})}function Nc(a,b){return a._cfg.version-b._cfg.version}function Oc(a,b,c,e){var f=a._dbSchema,g=a._createTransaction("readwrite",a._storeNames,f);g.create(c);g._completion["catch"](e);var h=g._reject.bind(g),i=K.transless||K;P(function(){K.trans=g,K.transless=i,b===0?(d(f).forEach(function(a){Rc(c,a,f[a].primKey,f[a].indexes)}),Kc(a,c),M.follow(function(){return a.on.populate.fire(g)})["catch"](h)):Pc(a,b,g,c)["catch"](h)})}function Pc(a,b,c,e){var f=[],g=a._versions,h=a._dbSchema=Vc(a,a.idbdb,e),i=!1;g=g.filter(function(a){return a._cfg.version>=b});g.forEach(function(g){f.push(function(){var f=h,j=g._cfg.dbschema;Yc(a,f,e);Yc(a,j,e);h=a._dbSchema=j;var k=Qc(f,j);k.add.forEach(function(a){Rc(e,a[0],a[1].primKey,a[1].indexes)});k.change.forEach(function(a){if(a.recreate)throw new F.Upgrade("Not yet support for changing primary key");else{var b=e.objectStore(a.name);a.add.forEach(function(a){return Uc(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),Uc(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var l=g._cfg.contentUpgrade;if(l&&g._cfg.version>b){Kc(a,e);c._memoizedTables={};i=!0;var m=da(j);k.del.forEach(function(a){m[a]=f[a]});Mc(a,[a.Transaction.prototype]);Lc(a,[a.Transaction.prototype],d(m),m);c.schema=m;var n=oa(l);n&&Q();var o;j=M.follow(function(){o=l(c);if(o&&n){var a=R.bind(null,null);o.then(a,a)}});return o&&typeof o.then==="function"?M.resolve(o):j.then(function(){return o})}}),f.push(function(b){if(!i||!Nb){var d=g._cfg.dbschema;Tc(d,b)}Mc(a,[a.Transaction.prototype]);Lc(a,[a.Transaction.prototype],a._storeNames,a._dbSchema);c.schema=a._dbSchema})});function j(){return f.length?M.resolve(f.shift()(c.idbtrans)).then(j):M.resolve()}return j().then(function(){Sc(h,e)})}function Qc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto&&!Mb)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Rc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return Uc(e,a)});return e}function Sc(a,b){d(a).forEach(function(c){b.db.objectStoreNames.contains(c)||Rc(b,c,a[c].primKey,a[c].indexes)})}function Tc(a,b){for(var c=0;c<b.db.objectStoreNames.length;++c){var d=b.db.objectStoreNames[c];a[d]==null&&b.db.deleteObjectStore(d)}}function Uc(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function Vc(a,b,c){var d={};a=r(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=xc(yc(e),e||"",!1,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=xc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=zc(a,f,g)});return d}function Wc(a,b,c){a.verno=b.version/10;c=a._dbSchema=Vc(a,b,c);a._storeNames=r(b.objectStoreNames,0);Lc(a,[a._allTables],d(c),c)}function Xc(a,b){b=Vc(a,a.idbdb,b);b=Qc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function Yc(a,b,c){var d=c.db.objectStoreNames;for(var e=0;e<d.length;++e){var g=d[e],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+r(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function Zc(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return xc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),e(d),b===0)})}var $c=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){d(a).forEach(function(c){if(a[c]!==null){var d=Zc(a[c]),e=d.shift();if(e.multi)throw new F.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new F.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new F.Schema("Index must have a name and cannot be an empty string")});b[c]=zc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,a):a;a=b._versions;var c={},e={};a.forEach(function(a){g(c,a._cfg.storesSource),e=a._cfg.dbschema={},a._parseStoresSpec(c,e)});b._dbSchema=e;Mc(b,[b._allTables,b,b.Transaction.prototype]);Lc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],d(e),e);b._storeNames=d(e);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=a;return this};return a}();function ad(a){return Xb($c.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}var bd;function cd(a){var b=a&&typeof a.databases==="function",c;if(!b){var d=new pd(Qb,{addons:[]});d.version(1).stores({dbnames:"name"});c=d.table("dbnames")}return{getDatabaseNames:function(){return b?M.resolve(a.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Qb})}):c.toCollection().primaryKeys()},add:function(a){return!b&&a!==Qb&&c.put({name:a})["catch"](G)},remove:function(a){return!b&&a!==Qb&&c["delete"](a)["catch"](G)}}}function dd(a){try{bd=cd(a)}catch(a){}}function ed(a){return P(function(){K.letThrough=!0;return a()})}function fd(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?T(b.dbOpenError):a});B&&(b.openCanceller._stackHolder=C());b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.dbReadyResolve,e=null;return M.race([b.openCanceller,new M(function(d,f){if(!c)throw new F.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var g=a.name,h=b.autoSchema?c.open(g):c.open(g,Math.round(a.verno*10));if(!h)throw new F.MissingAPI("IndexedDB API not available");h.onerror=Y(f);h.onblocked=N(a._fireOnBlocked);h.onupgradeneeded=N(function(d){e=h.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){h.onerror=uc;e.abort();h.result.close();var i=c.deleteDatabase(g);i.onsuccess=i.onerror=N(function(){f(new F.NoSuchDatabase("Database "+g+" doesnt exist"))})}else{e.onerror=Y(f);i=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a.idbdb=h.result;Oc(a,i/10,e,f)}},f);h.onsuccess=N(function(){e=null;var c=a.idbdb=h.result,f=r(c.objectStoreNames);if(f.length>0)try{f=c.transaction(sc(f),"readonly");b.autoSchema?Wc(a,c,f):(Yc(a,a._dbSchema,f),!Xc(a,f));Kc(a,f)}catch(a){}Lb.push(a);c.onversionchange=N(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});bd.add(g);d()},f)})]).then(function(){b.onReadyBeingFired=[];return M.resolve(ed(a.on.ready.fire)).then(function a(){if(b.onReadyBeingFired.length>0){var c=b.onReadyBeingFired.reduce(Ha,G);b.onReadyBeingFired=[];return M.resolve(ed(c)).then(a)}})})["finally"](function(){b.onReadyBeingFired=null}).then(function(){b.isBeingOpened=!1;return a})["catch"](function(c){try{e&&e.abort()}catch(a){}b.isBeingOpened=!1;a.close();b.dbOpenError=c;return T(b.dbOpenError)})["finally"](function(){b.openComplete=!0,d()})}function gd(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=g(b),f=g(c);function g(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?e(c)?Promise.all(c).then(d,f):d(c):c.then(d,f)}}return g(b)()}function hd(a,b,c){var d=arguments.length;if(d<2)throw new F.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=fa(e);return[a,f,c]}function id(a,b,c,d,e){return M.resolve().then(function(){var f=K.transless||K,g=a._createTransaction(b,c,a._dbSchema,d);f={trans:g,transless:f};d?g.idbtrans=d.idbtrans:g.create();var h=oa(e);h&&Q();var i;f=M.follow(function(){i=e.call(g,g);if(i)if(h){var a=R.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=gd(i))},f);return(i&&typeof i.then==="function"?M.resolve(i).then(function(a){return g.active?a:T(new F.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return T(a)})})}function jd(a,b,c){a=e(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function kd(a){return b(b({},a),{table:function(c){var d=a.table(c);c=d.schema;var e={},f=[];function g(a,c,d){var h=Gc(a);h=e[h]=e[h]||[];var i=a==null?0:typeof a==="string"?1:a.length,j=c>0;j=b(b({},d),{isVirtual:j,isPrimaryKey:!j&&d.isPrimaryKey,keyTail:c,keyLength:i,extractKey:Ac(a),unique:!j&&d.unique});h.push(j);j.isPrimaryKey||f.push(j);if(i>1){a=i===2?a[0]:a.slice(0,i-1);g(a,c+1,d)}h.sort(function(a,b){return a.keyTail-b.keyTail});return j}var h=g(c.primaryKey.keyPath,0,c.primaryKey);e[":id"]=[h];for(var i=0,j=c.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Gc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:jd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:jd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(c){var a=c.query.index;return a.isVirtual?b(b({},c),{query:{index:a,range:m(c.query.range,a.keyTail)}}):c}k=b(b({},d),{schema:b(b({},c),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return d.count(n(a))},query:function(a){return d.query(n(a))},openCursor:function(c){var b=c.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return d.openCursor(c);function h(b){function d(d){d!=null?b["continue"](jd(d,c.reverse?a.MAX_KEY:a.MIN_KEY,e)):c.unique?b["continue"](jd(b.key,c.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}d=Object.create(b,{"continue":{value:d},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(jd(d,a.MAX_KEY,e),c)}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return d}return d.openCursor(n(c)).then(function(a){return a&&h(a)})}});return k}})}var ld={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:kd},md={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return b(b({},a),{table:function(d){var e=a.table(d),f=e.schema.primaryKey,g=b(b({},e),{mutate:function(a){var g=K.trans,h=g.table(d).hook,i=h.deleting,k=h.creating,l=h.updating;switch(a.type){case"add":if(k.fire===G)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(k.fire===G&&l.fire===G)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===G)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===G)break;return g._promise("readwrite",function(){return n(a)},!0)}return e.mutate(a);function m(a){var d=K.trans,g=a.keys||Cc(f,a);if(!g)throw new Error("Keys missing");a=a.type==="add"||a.type==="put"?b(b({},a),{keys:g,wantResults:!0}):b({},a);a.type!=="delete"&&(a.values=c(a.values));a.keys&&(a.keys=c(a.keys));return Dc(e,a,g).then(function(b){var c=g.map(function(c,e){var g=b[e],h={onerror:null,onsuccess:null};if(a.type==="delete")i.fire.call(h,c,g,d);else if(a.type==="add"||g===void 0){var m=k.fire.call(h,c,a.values[e],d);c==null&&m!=null&&(c=m,a.keys[e]=c,f.outbound||w(a.values[e],f.keyPath,c))}else{m=la(g,a.values[e]);var n=l.fire.call(h,m,c,g,d);if(n){var o=a.values[e];Object.keys(n).forEach(function(a){j(o,a)?o[a]=n[a]:w(o,a,n[a])})}}return h});return e.mutate(a).then(function(d){var e=d.failures,f=d.results,h=d.numFailures;d=d.lastResult;for(var i=0;i<g.length;++i){var j=f?f[i]:g[i],k=c[i];j==null?k.onerror&&k.onerror(e[i]):k.onsuccess&&k.onsuccess(a.type==="put"&&b[i]?a.values[i]:j)}return{failures:e,results:f,numFailures:h,lastResult:d}})["catch"](function(a){c.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,c,d){return e.query({trans:a,values:!1,query:{index:f,range:c},limit:d}).then(function(e){var f=e.result;return m({type:"delete",keys:f,trans:a}).then(function(e){if(e.numFailures>0)return Promise.reject(e.failures[0]);if(f.length<d)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,b(b({},c),{lower:f[f.length-1],lowerOpen:!0}),d)})})}}});return g}})}};function nd(a,b){d(b).forEach(function(c){var e=a[c],f=b[c];e?d(f).forEach(function(a){var b=e[a],c=f[a];b&&b!==!0&&b.keys?c===!0?e[a]=!0:c.keys&&(e[a]={keys:b.keys.concat(c.keys)}):e[a]=y(c)}):a[c]=y(f)});return a}var od={stack:"dbcore",level:0,create:function(a){var c=a.schema.name,d=function(a){return[a.key]},e=function(a){return a.keys},f=function(a){a=a.query;var b=a.index;a=a.range;return b.isPrimaryKey&&a.type===1&&[a.lower]},g=[["get",d],["getMany",e],["count",f],["query",f],["openCursor",f]];return b(b({},a),{table:function(d){var e=a.table(d),f=b(b({},e),{mutate:function(b){var a=b.type!=="deleteRange"&&(b.type==="delete"?b.keys:b.keys=Cc(e.schema.primaryKey,b)),f=b.trans;return e.mutate(b).then(function(b){var e,g;g=(e={},e[c]=(g={},g[d]=a&&a.every(function(a){return a!=null})?{keys:a}:!0,g),e);f.mutatedParts||(f.mutatedParts={});nd(f.mutatedParts,g);return b})}});g.forEach(function(g){var h=g[0],b=g[1];f[h]=function(i){var g,j;if(K.subscr){var f=b&&b(i),k=(g={},g[c]=(j={},j[d]=f?{keys:f,cmp:a.cmp}:!0,j),g);nd(K.subscr,k)}return e[h].apply(this,arguments)}});return f}})}},pd=function(){function a(c,d){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=d=b({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},d);this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange};f=d.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:G,dbReadyPromise:null,cancelOpen:G,openCanceller:null,autoSchema:!0};g.dbReadyPromise=new M(function(a){g.dbReadyResolve=a});g.openCanceller=new M(function(a,b){g.cancelOpen=b});this._state=g;this.name=c;this.on=Wb(this,"populate","blocked","versionchange",{ready:[Ha,G]});this.on.ready.subscribe=s(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||M.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=hc(this);this.Table=Yb(this);this.Transaction=wc(this);this.Version=ad(this);this.WhereClause=rc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close()});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=tc(d.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Lb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(ld);this.use(md);this.use(od);f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new F.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new F.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Nc);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this._state.openComplete||K.letThrough?a():new M(function(a,c){if(!b._state.isBeingOpened){if(!b._options.autoOpen){c(new F.DatabaseClosed());return}b.open()["catch"](G)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){return fd(this)};a.prototype.close=function(){var a=Lb.indexOf(this),b=this._state;a>=0&&Lb.splice(a,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this.idbdb=null}this._options.autoOpen=!1;b.dbOpenError=new F.DatabaseClosed();b.isBeingOpened&&b.cancelOpen(b.dbOpenError);b.dbReadyPromise=new M(function(a){b.dbReadyResolve=a});b.openCanceller=new M(function(a,c){b.cancelOpen=c})};a.prototype["delete"]=function(){var a=this,b=arguments.length>0,c=this._state;return new M(function(d,e){var f=function(){a.close();var b=a._deps.indexedDB.deleteDatabase(a.name);b.onsuccess=N(function(){bd.remove(a.name),d()});b.onerror=Y(e);b.onblocked=a._fireOnBlocked};if(b)throw new F.InvalidArgument("Arguments not allowed in db.delete()");c.isBeingOpened?c.dbReadyPromise.then(f):f()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return d(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!0,configurable:!0});a.prototype.transaction=function(){var a=hd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=K.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Rb)g=Rb;else if(a=="rw"||a==Sb)g=Sb;else throw new F.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Rb&&g===Sb)if(f)e=null;else throw new F.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new F.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):T(a)}var i=id.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):K.trans?Bb(K.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!j(this._allTables,a))throw new F.InvalidTable("Table "+a+" does not exist");return this._allTables[a]};return a}(),qd=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return typeof a==="function"?this._subscribe({next:a,error:b,complete:c}):this._subscribe(a)};return a}();function rd(a){return new qd(function(b){var c=b.start,e=b.next,f=b.error,g=oa(a);function h(b){g&&Q();var c=function(){return P(a,{subscr:b,trans:null})};c=K.trans?Bb(K.transless,c):c();g&&c.then(R,R);return c}var i=!1,j={},k={},l={get closed(){return i},unsubscribe:function(){i=!0,Z.txcommitted.unsubscribe(p)}};c&&c(l);var m=!1,n=!1;function o(){for(var b=0,a=d(k);b<a.length;b++){var c=a[b],e=j[c];if(e){var f=k[c];c=function(a){var b=e[a],c=f[a];if(b===!0)if(c)return{value:!0};else return"continue";if(c===!0)if(b)return{value:!0};else return"continue";if(b&&b.keys&&c.keys.some(function(a){return b.keys.some(function(b){try{return c.cmp(a,b)===0}catch(a){return!1}})}))return{value:!0}};for(var g=0,h=d(f);g<h.length;g++){var i=h[g];i=c(i);if(typeof i==="object")return i.value}}}return!1}var p=function(a){nd(j,a),o()&&q()},q=function(){if(m||i)return;j={};var a={},b=h(a);n||(Z("txcommitted",p),n=!0);m=!0;Promise.resolve(b).then(function(b){m=!1;if(i)return;o()?q():(j={},k=a,e&&e(b))},function(a){m=!1,f&&f(a),l.unsubscribe()})};q();return l})}var $=pd;k($,b(b({},D),{"delete":function(a){a=new $(a);return a["delete"]()},exists:function(a){return new $(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){return bd?bd.getDatabaseNames().then(a):M.resolve([])},defineClass:function(){function a(a){g(this,a)}return a},ignoreTransaction:function(a){return K.trans?Bb(K.transless,a):a()},vip:ed,async:function(a){return function(){try{var b=gd(a.apply(this,arguments));return!b||typeof b.then!=="function"?M.resolve(b):b}catch(a){return T(a)}}},spawn:function(a,b,c){try{a=gd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?M.resolve(a):a}catch(a){return T(a)}},currentTransaction:{get:function(){return K.trans||null}},waitFor:function(a,b){a=M.resolve(typeof a==="function"?$.ignoreTransaction(a):a).timeout(b||6e4);return K.trans?K.trans.waitFor(a):a},Promise:M,debug:{get:function(){return B},set:function(a){pa(a,a==="dexie"?function(){return!0}:Pb)}},derive:n,extend:g,props:k,override:s,Events:Wb,on:Z,liveQuery:rd,extendObservabilitySet:nd,getByKeyPath:v,setByKeyPath:w,delByKeyPath:ca,shallowClone:da,deepClone:y,getObjectDiff:la,asap:aa,minKey:Jb,addons:[],connections:Lb,errnames:xa,dependencies:function(){try{return{indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch(a){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:x,version:x.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)}),"default":$,Dexie:$}));$.maxKey=tc($.dependencies.IDBKeyRange);function sd(a){var b=ud;try{ud=!0,Z.txcommitted.fire(a)}finally{ud=b}}var td=sd,ud=!1,vd={};if(typeof document!=="undefined"&&document.addEventListener){var wd=function(){document.visibilityState==="visible"&&(Object.keys(vd).length>0&&sd(vd),vd={})};document.addEventListener("visibilitychange",wd);td=function(a){nd(vd,a),wd()}}if(typeof BroadcastChannel!=="undefined"){var xd=new BroadcastChannel("dexie-txcommitted");Z("txcommitted",function(a){ud||xd.postMessage(a)});xd.onmessage=function(a){a.data&&td(a.data)}}else typeof localStorage!=="undefined"&&(Z("txcommitted",function(a){try{ud||localStorage.setItem("dexie-txcommitted",JSON.stringify({trig:Math.random(),changedParts:a}))}catch(a){}}),addEventListener("storage",function(a){if(a.key==="dexie-txcommitted"){a=JSON.parse(a.newValue);a&&td(a.changedParts)}}));dd(pd.dependencies.indexedDB);M.rejectionMapper=Aa;pa(B,Pb);return pd})}var k=!1;function l(){k||(k=!0,j());return h.exports}function b(a){switch(a){case void 0:return l()}}e.exports=b},null);
__d("dexie_alpha",["dexie-3.1.0-alpha.4"],function(a,b,c,d,e,f){e.exports=b("dexie-3.1.0-alpha.4")()},null);